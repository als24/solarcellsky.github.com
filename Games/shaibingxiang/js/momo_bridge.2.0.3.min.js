!function(window){"use strict";function loadWebViewBridge(){function e(e){_=e.createElement("iframe"),_.style.display="none",_.src=u+"://"+b,e.documentElement.appendChild(_)}function i(e){if(WebViewJavascriptBridge._messageHandler)throw new Error("WebViewJavascriptBridge.init called twice");WebViewJavascriptBridge._messageHandler=e;var i=l;l=null;for(var n=0;n<i.length;n++)s(i[n])}function n(e,i){o({data:e},i)}function t(e,i){p[e]=i}function a(e,i,n){o({handlerName:e,data:i},n)}function o(e,i){if(i){var n="cb_"+w++ +"_"+(new Date).getTime();f[n]=i,e.callbackId=n}c.push(e),_.src=u+"://"+b}function r(){var e=JSON.stringify(c);return c=[],e}function s(e){setTimeout(function(){var i,n=JSON.parse(e);if(n.responseId){if(i=f[n.responseId],!i)return;i(n.responseData),delete f[n.responseId]}else{if(n.callbackId){var t=n.callbackId;i=function(e){o({responseId:t,responseData:e})}}var a=WebViewJavascriptBridge._messageHandler;n.handlerName&&(a=p[n.handlerName]);try{a(n.data,i)}catch(r){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",n,r)}}})}function d(e){l?l.push(e):s(e)}if(!window.WebViewJavascriptBridge){var _,c=[],l=[],p={},u="wvjbscheme",b="__WVJB_QUEUE_MESSAGE__",f={},w=1;window.WebViewJavascriptBridge={init:i,send:n,registerHandler:t,callHandler:a,_fetchQueue:r,_handleMessageFromObjC:d};var h=document;e(h)}}if(!window.MomoBridge){var BRIDGE_VERSION="2.0",last_modified="Modified: 2015-01-27_16:58:29",uniqueId=1,ua=window.navigator.userAgent,is_webview=/momoWebView/.test(ua),is_ios=window.WebViewJavascriptBridge?!0:/iPhone OS/.test(ua),is_android=window.aobj?!0:/android/.test(ua),is_wp=/Windows Phone/.test(ua),is_mobile=/Mobile/.test(ua),is_pc=!is_mobile,is_unknown=!is_android&&!is_ios&&!is_wp,is_wifi=is_webview&&"1"==/netType\/(\d)/.exec(ua)[1]?!0:!1,version=/momoWebView\/(\d+)\.(\d+)/.exec(ua)||["","0","0"],momo_main_version=parseInt(version[1]),momo_minor_version=parseInt(version[2]),momo_version=version[1]+"."+version[2],_native_obj=null,debug=0,query={};try{location.search.substr(1).split("&").forEach(function(e){e.split("=")[0]in query?query[e.split("=")[0]].push(e.split("=")[1]):query[e.split("=")[0]]=[e.split("=")[1]]})}catch(err){}is_android&&window.aobj?_native_obj=window.aobj:is_ios&&(window.WebViewJavascriptBridge?_native_obj=window.WebViewJavascriptBridge:is_webview&&(loadWebViewBridge(),_native_obj=window.WebViewJavascriptBridge));var MoAdapter=function(e){var i;this.name="basic",this.invoke=function(){};for(i in e)this[i]=e[i];return this},NOOP=function(){},iOSAdapter={name:"ios",_NAME:{init:"handleStateInfo",closeWindow:"close",callShare:"showGeneralShare"},_CB:{readImage:"momo_btn_controller_setImageSrc"},_pre:function(){this._native_obj.init(function(){this.log("ios initial")})},invoke:function(){var args=Array.prototype.slice.apply(arguments);try{var _adp=this._adapter,__handler,__callback,__cbk;"undefined"==typeof args[1]&&(args[1]="{}"),args.push(NOOP);var _orig=args[0];args[0]=_adp._NAME.hasOwnProperty(args[0])?_adp._NAME[args[0]]:args[0];var _obj="string"==typeof args[1]?JSON.parse(args[1]):args[1];if("init"==_orig){if(_obj.hasOwnProperty("ui_btn"))for(var i=0;i<_obj.ui_btn.buttons.length;i++)_obj.ui_btn.buttons[i].param.callback&&(__callback=_obj.ui_btn.buttons[i].param.callback,this._native_obj.registerHandler(__callback.replace(/\./g,"_"),function(data){try{var cbk=eval(__callback);cbk&&"function"==typeof cbk&&cbk.call(null,data)}catch(err){}}.bind(this)))}else"callShare"==_orig?(__callback=_obj.hasOwnProperty("callback")?_obj.callback:null,__handler=__callback.replace(/\./g,"_")):(__callback=_obj.hasOwnProperty("callback")?_obj.callback:null,__handler=_adp._CB.hasOwnProperty(_orig)?_adp._CB[_orig]:"",__handler=""==__handler?"momo_bridge_"+_orig:__handler);__callback&&__handler&&this._native_obj.registerHandler(__handler,function(data){try{var cbk=eval(__callback);cbk&&"function"==typeof cbk&&("readImage"==_orig?cbk.call(null,data.id,data.data,data.size,data.type):cbk.call(null,data))}catch(err){}}.bind(this)),this._native_obj.callHandler.apply(null,args)}catch(err){}}},AndroidAdapter={name:"android",invoke:function(){var e=Array.prototype.slice.apply(arguments),i=e.shift();if(this._native_obj[i]&&"function"==typeof this._native_obj[i])try{e[0]?this._native_obj[i](e[0]):this._native_obj[i]()}catch(n){}}},WpAdapter={name:"win phone",invoke:function(){var e=Array.prototype.slice.apply(arguments),i=e.shift();try{window.external.notify('{"'+i+'": '+e+"}")}catch(n){}}},_Bridge=function(){return _native_obj?(this._native_obj=_native_obj,is_ios?this._adapter=new MoAdapter(iOSAdapter):is_android&&(this._adapter=new MoAdapter(AndroidAdapter))):(this._native_obj=null,this._adapter=is_wp?new MoAdapter(WpAdapter):new MoAdapter),this._adapter._pre&&this._adapter._pre.call(this),this};_Bridge.prototype={version:BRIDGE_VERSION,last_modified:last_modified,is_webview:is_webview,momo_version:momo_version,momo_main_version:momo_main_version,momo_minor_version:momo_minor_version,is_wifi:is_wifi,ua:ua,query:query,href:window.location.href,platform:is_ios?"ios":is_android?"android":is_wp?"win_phone":"unknown",_callbacks:{},init:function(e){this.ready(function(i){e?i.invoke("init",e):is_android?i.invoke("init",{enable:{back:0,forward:0,refresh:0,share:0,scrollbar:0,ui_btn:0},ui_btn:{buttons:[{text:"",action:0}]}}):i.invoke("init",{enable:{back:0,forward:0,refresh:0,share:0,scrollbar:0,ui_btn:0}})})},invoke:function(e,i,n){var t=this._adapter[e]||null,a=Array.prototype.slice.apply(arguments);if(i)try{var o="string"==typeof i?JSON.parse(i):i;if(n&&"function"==typeof n&&"undefined"==typeof o.callback){var r="cb_"+uniqueId++ +"_"+(new Date).getTime();this._callbacks.hasOwnProperty(e)||(this._callbacks[e]={}),this._callbacks[e][r]=n,o.callback="MomoBridge._callbacks."+e+"."+r}i=JSON.stringify(o)}catch(s){return}t&&"function"==typeof t?(a.shift(),window.setTimeout(function(){t.apply(this,a)}.bind(this))):window.setTimeout(function(){this._adapter.invoke.call(this,e,i)}.bind(this))},get:function(e){return this._adapter[e]},ready:function(e){return/complete|loaded|interactive/.test(document.readyState)&&document.body?e.call(null,this):document.addEventListener("DOMContentLoaded",function(){e.call(null,this)}.bind(this),!1),this}},_Bridge.prototype.debug=function(){},_Bridge.prototype.set_logger=function(){},_Bridge.prototype.log=function(){},window.mm=window.MomoBridge=new _Bridge,"function"==typeof define&&(define.amd||define.cmd)&&(define.amd?define(function(){return window.MomoBridge}):define.cmd&&define(function(e,i,n){n.exports=window.MomoBridge})),query.hasOwnProperty("_momo_bridge_debug_")&&MomoBridge.ready(function(e){e.debug(query._momo_bridge_debug_[0])}),5.6>momo_version&&(window.momo_btn_controller||(window.momo_btn_controller={setImageSrc:function(e,i){return i?void(document.getElementById(e).src="data:image/jpeg;base64,"+i):!1}})),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=Array.prototype.slice.call(arguments,1),n=this,t=function(){},a=function(){return n.apply(this instanceof t&&e?this:e||window,i.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,a.prototype=new t,a})}}(window);