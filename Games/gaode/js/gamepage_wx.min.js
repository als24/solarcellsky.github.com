var gamesound = {
        islow: !1,
        isMute: !1,
        isSupport: !gameConfig.android5down && createjs.WebAudioPlugin.isSupported(),
        idList: {},
        soundDom: {},
        config: [{
            id: "stone",
            src: "sound/stone.mp3"
        }, {
            id: "openbox",
            src: "sound/openbox.mp3"
        }, {
            id: "back",
            src: "sound/back.mp3"
        }, {
            id: "collapse",
            src: "sound/collapse.mp3"
        }, {
            id: "jackpot",
            src: "sound/jackpot.mp3"
        }, {
            id: "empty",
            src: "sound/empty.mp3"
        }, {
            id: "timeup",
            src: "sound/timeup.mp3"
        }, {
            id: "countdown",
            src: "sound/countdown.mp3"
        }, {
            id: "countdown321",
            src: "sound/321.mp3"
        }],
        init: function() {
            var e = this;
            if (e.isSupport) {
                if (gameConfig.gd_android) createjs.Sound.registerSound({
                    src: "sound/back.mp3",
                    id: "back"
                });
                else
                    for (var i in e.config) {
                        var a = e.config[i];
                        createjs.Sound.registerSound({
                            src: a.src,
                            id: a.id
                        })
                    }
                window.addEventListener("touchend", e.initSound, !1)
            } else userInfo.canPlay && (e.soundDom.audioBack = $("#audioBack").get(0), gameConfig.gd_android || (e.soundDom.audioTimeup = $("#audioTimeup").get(0), e.soundDom.audio321 = $("#audio321").get(0), e.soundDom.audioCollapse = $("#audioCollapse").get(0), e.soundDom.audioGo = $("#audioGo").get(0), e.soundDom.audioOpenbox = $("#audioOpenbox").get(0), e.soundDom.audioStone = $("#audioStone").get(0), e.soundDom.audioJackpot = $("#audioJackpot").get(0), e.soundDom.audioEmpty = $("#audioEmpty").get(0)), window.addEventListener("touchstart", e.initSound, !1)), e.islow = !0
        },
        initSound: function() {
            var e = gamesound;
            e.isSupport ? (createjs.Sound.play("back"), createjs.Sound.stop("back")) : userInfo.canPlay && (e.soundDom.audioBack.volume = 0, e.soundDom.audioBack.play(), e.soundDom.audioBack.pause(), e.soundDom.audioBack.volume = 1, gameConfig.gd_android || (e.soundDom.audioTimeup.volume = 0, e.soundDom.audioTimeup.play(), e.soundDom.audioTimeup.pause(), e.soundDom.audioTimeup.volume = 1, e.soundDom.audio321.volume = 0, e.soundDom.audio321.play(), e.soundDom.audio321.pause(), e.soundDom.audio321.volume = 1, e.soundDom.audioCollapse.volume = 0, e.soundDom.audioCollapse.play(), e.soundDom.audioCollapse.pause(), e.soundDom.audioCollapse.volume = 1, e.soundDom.audioGo.volume = 0, e.soundDom.audioGo.play(), e.soundDom.audioGo.pause(), e.soundDom.audioGo.volume = 1, e.soundDom.audioOpenbox.volume = 0, e.soundDom.audioOpenbox.play(), e.soundDom.audioOpenbox.pause(), e.soundDom.audioOpenbox.volume = 1, e.soundDom.audioStone.volume = 0, e.soundDom.audioStone.play(), e.soundDom.audioStone.pause(), e.soundDom.audioStone.volume = 1, e.soundDom.audioJackpot.volume = 0, e.soundDom.audioJackpot.play(), e.soundDom.audioJackpot.pause(), e.soundDom.audioJackpot.volume = 1, e.soundDom.audioEmpty.volume = 0, e.soundDom.audioEmpty.play(), e.soundDom.audioEmpty.pause(), e.soundDom.audioEmpty.volume = 1)), window.removeEventListener("touchstart", e.initSound, !1), window.removeEventListener("touchend", e.initSound, !1)
        },
        countdown321: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audio321;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("countdown321") || e.playVideo("countdown321")
        },
        playCountdown: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioGo;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("countdown") || e.playVideo("countdown")
        },
        playGameOver: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioTimeup;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("timeup") || e.playVideo("timeup")
        },
        playBack: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioBack;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("back") || e.playVideo("back")
        },
        stopBack: function() {
            var e = this;
            if (e.islow) {
                var i = e.soundDom.audioBack;
                return void(i && i.pause())
            }
            e.isPlaying("back") && createjs.Sound.stop("back")
        },
        playStone: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioStone;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("stone") || e.playVideo("stone")
        },
        openChest: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioOpenbox;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.isPlaying("openbox") || e.playVideo("openbox")
        },
        playCollapse: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioCollapse;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.playVideo("collapse")
        },
        getChest: function(e) {
            var i = this;
            e ? i._playEmpty() : i._playJackpot()
        },
        _playJackpot: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioJackpot;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.playVideo("jackpot")
        },
        _playEmpty: function() {
            var e = this;
            if (e.islow && !e.isMute) {
                var i = e.soundDom.audioEmpty;
                return void(i && (i.currentTime && (i.currentTime = 0), i.play()))
            }
            e.playVideo("empty")
        },
        playVideo: function(e) {
            this.idList[e] = createjs.Sound.play(e)
        },
        isPlaying: function(e) {
            return this.idList[e] && "playFinished" !== this.idList[e].playState ? !0 : !1
        },
        allMute: function() {
            var e = this;
            e.islow ? (e.soundDom.audioBack.pause(), gameConfig.gd_android || (e.soundDom.audioTimeup.pause(), e.soundDom.audio321.pause(), e.soundDom.audioCollapse.pause(), e.soundDom.audioGo.pause(), e.soundDom.audioOpenbox.pause(), e.soundDom.audioStone.pause(), e.soundDom.audioJackpot.pause(), e.soundDom.audioEmpty.pause())) : createjs.Sound.setMute(!0), e.isMute = !0
        },
        NoMute: function() {
            var e = this;
            e.islow ? gameObj.isStart && $("#audioBack").get(0).play() : createjs.Sound.setMute(!1), e.isMute = !1
        }
    },
    gameBuffer = {
        init: function(e) {
            var i = this;
            i.cw = document.body.clientWidth, i.ch = document.body.clientHeight, i.left = 0, i.top = 0, i.devicePixelRatio = gameConfig.devicePixelRatio, i.gamesCtx = e, i.initMapData(gameConfig.row, gameConfig.col), i.bili = gameConfig.bili, i.mapDisToTop = gameConfig.mapDisToTop * i.bili, i.mapDisToleft = gameConfig.mapDisToleft * i.bili, i.itemHeight = gameConfig.itemH * i.bili, i.itemWidth = gameConfig.itemW * i.bili, i.enumType = mapData.enumType, i._createGameBuffer()
        },
        initMapData: function(e, i) {
            var a = this;
            a.map = mapData.createMapData(e, i)
        },
        setRen3: function() {
            var e = this;
            mapData.setRen3(e.map)
        },
        _createGameBuffer: function() {
            var e = this;
            e.bufferCanvas = document.createElement("canvas"), e.bufferCanvas.id = "bufferCanvas", e.bufferCtx = e.bufferCanvas.getContext("2d"), e.bufferCanvas.width = e.cw * e.devicePixelRatio, e.bufferCanvas.height = e.ch * e.devicePixelRatio, e.bufferCanvas.style.width = e.cw + "px", e.bufferCanvas.style.height = e.ch + "px", e.drawBufferMap()
        },
        _drawBg: function() {
            var e = this;
            e.bufferCtx.drawImage(God.imglist.bg, 0, 0, e.cw * e.devicePixelRatio, e.ch * e.devicePixelRatio)
        },
        _drawMapBg: function() {
            var e = this,
                i = gameConfig.mapEleList.mapbg,
                a = God.imglist.mapbg;
            e.bufferCtx.drawImage(a, i.left * e.bili * e.devicePixelRatio, i.top * e.bili * e.devicePixelRatio, i.width * e.bili * e.devicePixelRatio, i.height * e.bili * e.devicePixelRatio)
        },
        drawMap: function() {
            var e = this,
                i = gameConfig.mapEleList.mapbg,
                a = God.imglist.mapbg,
                t = document.createElement("canvas");
            t.id = "oldCanvas", t.style.position = "absolute", t.style.left = i.left * e.bili + "px", t.style.top = i.top * e.bili + "px";
            var o = t.getContext("2d");
            t.width = i.width * e.bili * e.devicePixelRatio, t.height = i.height * e.bili * e.devicePixelRatio, t.style.width = i.width * e.bili + "px", t.style.height = i.height * e.bili + "px", o.drawImage(a, 0, 0, i.width * e.bili * e.devicePixelRatio, i.height * e.bili * e.devicePixelRatio);
            for (var n = 0; n < e.map.length; n++)
                for (var s = e.map[n], r = e.itemHeight * n, m = 0; m < s.length; m++) {
                    var g = s[m];
                    s[m] === e.enumType.chest && (g = e.enumType.caopi);
                    var d = e.itemWidth * m;
                    o.drawImage(God.imglist[g], (d + e.mapDisToleft - i.left * e.bili) * e.devicePixelRatio, (r + e.mapDisToTop - i.top * e.bili) * e.devicePixelRatio, e.itemWidth * e.devicePixelRatio, e.itemHeight * e.devicePixelRatio)
                }
            var c = gameConfig.mapEleList.hua;
            if (c) {
                var u = God.imglist.hua;
                o.drawImage(u, (c.left - i.left) * e.bili * e.devicePixelRatio, (c.top - i.top) * e.bili * e.devicePixelRatio, c.width * e.bili * e.devicePixelRatio, c.height * e.bili * e.devicePixelRatio)
            }
            return t
        },
        drawBottomHua: function() {
            var e = this,
                i = gameConfig.mapEleList.hua;
            if (i) {
                var a = God.imglist.hua;
                e.gamesCtx.drawImage(a, i.left * e.bili * e.devicePixelRatio, i.top * e.bili * e.devicePixelRatio, i.width * e.bili * e.devicePixelRatio, i.height * e.bili * e.devicePixelRatio)
            }
        },
        drawBufferMap: function() {
            var e = this;
            e.bufferCanvas.width = e.bufferCanvas.width, e.bufferCanvas.height = e.bufferCanvas.height, e._drawBg(), e._drawMapBg();
            for (var i = 0; i < e.map.length; i++)
                for (var a = e.map[i], t = e.itemHeight * i, o = 0; o < a.length; o++) {
                    var n = a[o];
                    a[o] === e.enumType.chest && (n = e.enumType.caopi);
                    var s = e.itemWidth * o;
                    e.bufferCtx.drawImage(God.imglist[n], (s + e.mapDisToleft) * e.devicePixelRatio, (t + e.mapDisToTop) * e.devicePixelRatio, e.itemWidth * e.devicePixelRatio, e.itemHeight * e.devicePixelRatio)
                }
        },
        drawOtherInMap: function() {
            for (var e = this, i = 0; i < e.map.length; i++)
                for (var a = e.map[i], t = e.itemHeight * i, o = 0; o < a.length; o++) {
                    var n = a[o];
                    if (a[o] !== e.enumType.stone && a[o] !== e.enumType.caopi) {
                        var s = e.itemWidth * o;
                        e.gamesCtx.drawImage(God.imglist[n], (s + e.mapDisToleft) * e.devicePixelRatio, (t + e.mapDisToTop) * e.devicePixelRatio, e.itemWidth * e.devicePixelRatio, e.itemHeight * e.devicePixelRatio)
                    }
                }
            e.drawBottomHua()
        },
        drawInGame: function() {
            var e = this;
            e.gamesCtx.drawImage(e.bufferCanvas, e.left, e.top, e.cw * e.devicePixelRatio, e.ch * e.devicePixelRatio)
        },
        updateBuffer: function() {
            var e = this;
            e.drawBufferMap()
        }
    };
! function(e) {
    e.global.gamefirst = {
        init: function(i) {
            var a = this;
            $(".wrap").show();
            var t = userInfo.pieces ? userInfo.pieces.length : 0;
            $(".first-error").text(i), $(".btnlist").hide();
            var o = shareInfo.self_play;
            o ? ($("#who").text("我"), $(".my-rank p").addClass("gotomychest"), $(".btn-long").text("让好友帮我挖").addClass("sharetimeline").on("click", function() {
                e.pageLog.sendLog("letFriendHelp")
            })) : ($("#who").text(userInfo.nickname), $(".my-rank p").addClass("noneline"), $(".btn-long").text("查看我的宝藏").addClass("tiptreasures")), $("#myicon").attr("src", userInfo.avatar), e.day101.is101() ? ($(".game-first-box .tip").show(), $(".game-first-box .tip").addClass("tiptreasures"), $(".game-first-box .text p").eq(0).text("喜大普奔 o(*≧▽≦)ツ！")) : 19 === userInfo.pieces.length && shareInfo.self_play ? ($(".game-first-box .tip").text("只差1块碎片了，快去高德地图领Smart >>").show().on("click", function() {
                e.util.goCallNative(e.os + "amap://openFeature?featureName=DigTreasure&sourceApplication=app")
            }), $(".game-first-box .text p").eq(0).html("Smart 碎片已获得<span>" + t + "</span>块")) : ($(".game-first-box .tip").hide(), $(".game-first-box .text p").eq(0).html("Smart 碎片已获得<span>" + t + "</span>块"));
            var n = e.global.gameinit.getPieceText(t, !shareInfo.self_play);
            $(".game-first-box .text p").eq(1).text(n), recordList.length ? $(".friend-rank").append(a.getRank()) : $(".friend-rank").hide(), this.bindEvent()
        },
        getRank: function() {
            var e = {},
                i = '<div class="friend-info"><h3>好友给力榜</h3><p>（还可以找' + shareInfo.target_left + "个好友帮忙）</p></div>";
            i += "<ul class='rank'>";
            for (var a = 0; a < recordList.length; a++) {
                var t = recordList[a],
                    o = t.avatar;
                if (!e[o]) {
                    e[o] = !0;
                    var n = new Date(1e3 * t.ts),
                        s = n.getMonth() + 1,
                        r = n.getDate();
                    i += "<li class='clearfix'><img src='" + t.avatar + "'>", i += "<div class='rank-content'><h4>" + t.nickname + "</h4>", i += shareInfo.self_play ? "<p>帮我找到了" + t.goods + "等" + t.count + "个宝贝</p></div>" : "<p>帮TA找到了" + t.goods + "等" + t.count + "个宝贝</p></div>", i += "<div class='time'>" + s + "月" + r + "日</div></li>"
                }
            }
            return i += "</ul>"
        },
        bindEvent: function() {
            $(".game-first-box .mychest,.game-first-box .tiptreasures").on("click", function() {
                e.pageLog.sendLog("treasures_mychest"), setTimeout(function() {
                    gamenative.gotoLink("treasures_wx.html")
                }, 400)
            }), $(".my-rank").on("click", ".gotomychest", function() {
                e.pageLog.sendLog("treasures_gotomychest"), setTimeout(function() {
                    gamenative.gotoLink("treasures_wx.html")
                }, 400)
            }), $(".activeinfoline").on("click", function() {
            	alert("fuck");
                e.pageLog.sendLog("activeInfo"), gamenative.gotoLink("index_wx.html")
            })
        },
        _clickActiveInfo: function() {
            gamenative.gotoLink("index_wx.html")
        },
        _clickToSelfGame: function() {
            window.location.href = window.location.href.replace(location.search, "") + "?shareGDId=" + gameInfo.new_shareid + "&gd_from=othershare"
        },
        _clickShare: function() {
            e.common.shareObj.share()
        }
    }
}(God),
function(e) {
    e.global.gamerules = {
        init: function() {
            var i = this;
            if (i.ruleBox = $(".game-rules-box"), i.clientHeight = document.body.clientHeight, i.clientWidth = document.body.clientWidth, e.inGod && gameConfig.gd_morelow ? $(".startbtn-wx,.bottom-tip-wx,.top-tip-wx").show() : $(".startbtn,.bottom-tip,.top-tip").show(), !e.inGod && !shareInfo.self_play) {
                $(".startbtn").addClass("startbtn1");
                var a = 20 - userInfo.oldPieces.length,
                    t = "玩游戏，帮好友";
                0 === a && (t = "TA已经获得Smart，去找TA请客吧"), $(".top-tip").addClass("top-tip-ta").removeClass("top-tip").html(t)
            }
            i.setClassName(), i.bindEvent(), i.ruleBox.show()
        },
        setClassName: function() {
            var e = this,
                i = gameConfig.gameindex + 1,
                a = "game" + i;
            e.ruleBox.addClass(a), $(".rule-alert").addClass(a)
        },
        bindEvent: function() {
            var i = this;
            $(".rule-cursor").on("webkitAnimationEnd", function() {
                var e = this.className;
                return e.indexOf("cursor-move1") >= 0 ? void $(this).removeClass("cursor-move1").addClass("cursor-tap1") : e.indexOf("cursor-tap1") >= 0 ? ($(".game-rules-box .center-area").addClass("opened"), $(".game-rules-box .bird").addClass("bird-move1"), void $(this).removeClass("cursor-tap1").addClass("cursor-move3")) : e.indexOf("cursor-move3") >= 0 ? void $(this).removeClass("cursor-move3").addClass("cursor-tap3") : e.indexOf("cursor-tap3") >= 0 ? void $(".error-tip").addClass("error-tip-ani") : e.indexOf("cursor-move2") >= 0 ? void $(this).removeClass("cursor-move2").addClass("cursor-tap2") : -1 !== e.indexOf("cursor-tap2") ? ($(".game-rules-box .bird").removeClass("bird-move1").addClass("bird-move2"), void $(".rule-chest").addClass("rule-chest-ani")) : void 0
            }), $(".rule-chest").on("webkitAnimationEnd", function() {
                $(this).removeClass("rule-chest-ani"), setTimeout(function() {
                    $(".rule-cursor").removeClass("cursor-tap2").addClass("cursor-move1"), $(".game-rules-box .bird").removeClass("bird-move2"), $(".game-rules-box .center-area").removeClass("opened")
                }, 500)
            }), $(".error-tip").on("webkitAnimationEnd", function() {
                $(this).removeClass("error-tip-ani"), $(".rule-cursor").removeClass("cursor-tap3").addClass("cursor-move2")
            }), $(".game-rule-yy").on("touchstart", function() {
                void 0
            }), $(".jccontrol").on("touchstart", function() {
                $(".rule-alert").toggle(), $("#startGame").toggle();
                var i = "block" === $(".rule-alert").css("display");
                e.pageLog.sendLog("helpWindow_" + (i ? "open" : "close"))
            }), $(".rule-alert .close").on("touchstart", function() {
                $(".rule-alert").toggle(), $("#startGame").toggle(), e.pageLog.sendLog("helpCloseButton")
            }), $(".startbtn").on("touchstart", function() {
                gameObj.hasStartGame || (gameObj.hasStartGame = !0, gamenative.startGame(), e.pageLog.sendLog("startGame"))
            }), $("#startGameWX").on("touchstart", function() {
                e.inGod && (e.pageLog.sendLog("cantPlayShare"), e.common.shareObj.share())
            }), $("body").on("startGame", function() {
                i.ruleBox.hide(), $(".rule-cursor,.rule-chest,.error-tip").off("webkitAnimationEnd"), gameObj.isStart = !0, gameObj.init(), $(".game-steg").show(), $(".start-game-djs").css("line-height", i.clientHeight + "px"), $(".start-game-djs").show();
                var e = 3;
                gamesound.countdown321();
                var a = setInterval(function() {
                    e--, $(".start-game-djs").text(e), 0 === e ? (clearInterval(a), a = null, gameObj.renderCanvas(), $("#proess").addClass("loading-ani"), $(".start-game-djs").hide(), gamesound.playBack()) : 1 === e ? gamesound.playCountdown() : gamesound.countdown321()
                }, 1e3)
            }), $(".yycontrol").on("touchstart", function() {
                var i;
                gamesound.isMute ? (i = "on", $(".yycontrol").removeClass("yycontrolno"), gamesound.NoMute()) : (i = "off", $(".yycontrol").addClass("yycontrolno"), gamesound.allMute()), e.pageLog.sendLog("bgm_" + i)
            })
        }
    }
}(God);
var gamenative = {
        gameCheckShare: function() {
            var e = this,
                i = location.search.match(/shareGDId=([^&]*)/),
                a = "";
            i && (a = i[1]), gameInfo.old_shareid = a ? parseInt(a, 10) : "", e.getGDShareID(function(i) {
                gameInfo.new_shareid = i, gameInfo.shareid = gameInfo.old_shareid ? gameInfo.old_shareid : gameInfo.new_shareid, God.common.shareObj.share(), e.gameCheck()
            })
        },
        gameCheck: function() {
            new API.share_info({
                share_id: gameInfo.shareid
            }, function(e) {
                var i = "";
                if ("102" == e.code) return i = "不在活动期间内", location.href = "index_wx.html", void(userInfo.canPlay = !1);
                if (14 == e.code || 18 == e.code) God.common.goWxAuth(location.href, void 0, "info");
                else if ("1" === e.code) {
                    ganemSelfInfo = e.selfinfo, shareInfo = e.shareinfo, userInfo = e.userinfo, userInfo.pieces = shareInfo.pieces, userInfo.oldPieces = [];
                    for (var a = 0; a < userInfo.pieces.length; a++) userInfo.oldPieces.push(userInfo.pieces[a]);
                    recordList = e.recordlist, userInfo.canPlay = !0, shareInfo.self_play && 0 !== shareInfo.self_left ? userInfo.canPlay = !0 : shareInfo.self_play && 0 === shareInfo.self_left ? (God.day101.is101() || (i = "明天再来挖宝哦"), userInfo.canPlay = !1) : 0 === shareInfo.fromto_left ? (i = "你已经帮TA玩过一次啦", userInfo.canPlay = !1) : 0 === shareInfo.target_left && (i = "帮TA挖宝的小伙伴太多了！暂时不用你帮忙啦~", userInfo.canPlay = !1)
                } else "1" !== e.code && (location.href = "error_wx.html");
                God.pageLog.sendLog("game_check_wx_" + e.code), shareInfo.open_share || (God.common.shareObj.setNoShareTimeline(), God.common.shareObj.share()), userInfo.canPlay ? (God.global.gamerules.init(), gamesound.init()) : God.global.gamefirst.init(i)
            })
        },
        startGame: function() {
            $("#startGame").hide(), $(".go").addClass("go-ani startbtn").show();
            var e = setTimeout(function() {
                gamenative.toastOther("亲，好像发生了一些异常状况，请稍候重试哦。")
            }, 5e3);
            new API.weixinGameStart({
                share_id: gameInfo.shareid
            }, function(i) {
                // void 0, void 0, "1" === i.code && (clearTimeout(e), gameInfo.gameKey = i.data.gamekey, $("body").trigger("startGame")), God.pageLog.sendLog("weixinGameStart_" + i.code)
                $("body").trigger("startGame")
            })
        },
        openChest: function(e) {
            new API.weixinGameOpenbox({
                gamekey: gameInfo.gameKey
            }, function(i) {
                void 0, void 0, e(i)
            })
        },
        getGDShareID: function(e) {
            new API.share_weixin(function(i) {
                God.pageLog.sendLog("share_weixin_" + i.code), "1" === i.code ? e(i.share_id) : 14 == i.code || 18 == i.code ? God.common.goWxAuth(location.href, void 0, "info") : setTimeout(function() {
                    location.href = "error_wx.html"
                }, 400)
            })
        },
        toast: function(e) {
            var i = $(".toast");
            "none" === i.css("display") && (i.html(e), i.show(), setTimeout(function() {
                $(".toast").hide()
            }, 1e3))
        },
        toastOther: function(e) {
            var i = $(".toast-other");
            i.html(e), "none" === i.css("display") && (i.show(), setTimeout(function() {
                $(".toast-other").hide()
            }, 1500))
        },
        gotoLink: function(e) {
            location.href = e
        }
    },
    // gameInfo = {},
    gameInfo = {old_shareid: "", new_shareid: "219883", shareid: "219883", gamekey: "212121215555115115155"}
    shareInfo = {},
    recordList = [],
    // userInfo = {},
    userInfo = {
        nickname: "Kevin",
        avatar: "http://wx.qlogo.cn/mmopen/5RCticWKlABMdsghOj4tTGQD…iaZcK8HOicmSRMpEKTOIAySmTlexYf1vv8WMfxG7SX9m8eh/0",
        pieces: [24,18,26,15,21],
        oldPieces: [24,18,26,15,21],
        canPlay: true
    }
    ganemSelfInfo = {};
$(".toast").on("webkitAnimationEnd", function() {
    $(".toast").removeClass("toast-ani")
});
var gameObj = {
    isStart: !1,
    init: function() {
        var e = this;
        e.hasOpenChestCount = 0, e.curChestIndex = 0, e.chestList = [], userInfo.newPieces = [], userInfo.juanCount = 0, userInfo.youCount = 0, userInfo.liuCount = 0, e.chestTopPositionList = [{
            x: 34,
            y: 100
        }, {
            x: 108,
            y: 100
        }, {
            x: 182,
            y: 100
        }, {
            x: 256,
            y: 100
        }, {
            x: 330,
            y: 100
        }, {
            x: 404,
            y: 100
        }, {
            x: 600,
            y: 100
        }], e.chestHasToPositionCount = 0, e.chestPostionMap = {
            0: 5,
            1: "",
            2: "",
            3: "",
            4: "",
            5: ""
        }, e.chestListInfo = {}, e.chestOBj = {
            0: 0,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 0
        }, e.chestEnum = {
            wen: 0,
            you: 1,
            liu: 2,
            juan: 3,
            che: 4,
            kong: 5
        }, e.liwuArr = ["wen_liwu", "you_liwu", "liu_liwu", "juan_liwu", "che_liwu", "kong_liwu"], e.screen = 1, e.djs = gameConfig.djs, e.fps = 0, e.opening = !1, e.startTime = +new Date, e.cw = document.body.clientWidth, e.ch = document.body.clientHeight, e.devicePixelRatio = gameConfig.devicePixelRatio, e.pagecanvasw = e.cw * e.devicePixelRatio, e.pagecanvash = e.ch * e.devicePixelRatio, e.setGamestage(), e.bili = gameConfig.bili, e.mapDisToTop = gameConfig.mapDisToTop * e.bili, e.mapDisToleft = gameConfig.mapDisToleft * e.bili, e.itemHeight = gameConfig.itemH * e.bili, e.itemWidth = gameConfig.itemW * e.bili, e.enumType = mapData.enumType, e.ren = gameConfig.renStart, e.gameMapInit(), e.chestCountInMap = mapData.chestInMap, e.bindEvent()
    },
    requestAnimateFrame: function(e) {
        var e = e || 60;
        return function(i) {
            return setTimeout(i, 1e3 / e)
        }
    },
    renderCanvas: function() {
        var e = this,
            i = e.requestAnimateFrame(),
            a = +new Date,
            t = a - e.startTime;
        if (e.fps++, t > 1e3) {
            if (0 === e.djs) {
                if ($("#proess").hide(), e.isStart = !1, aniQueue.isAllStop()) return e.gameEnd = !0, $(".rule-alert").hide(), void(e.hasOpenChestCount === e.curChestIndex ? setTimeout(function() {
                    $("body").trigger("gameEnd")
                }, 500) : ($(".load-chest").show(), e.gameEndTiemr = setTimeout(function() {
                    $("body").trigger("gameEnd")
                }, 5e3)))
            } else e.djs--, $("#djs").html(e.djs);
            e.startTime = e.startTime + t, e.fps = 0
        }
        e.gamesCtx.clearRect(0, 0, e.pagecanvasw, e.pagecanvash), e.updateMap(), e.frame = i(function() {
            e.renderCanvas()
        })
    },
    showResultPage: function() {
        var e = this;
        void 0;
        var i = e.chestOBj[e.chestEnum.liu],
            a = e.chestOBj[e.chestEnum.you],
            t = e.chestOBj[e.chestEnum.che],
            o = e.chestOBj[e.chestEnum.juan],
            n = (e.chestOBj[e.chestEnum.kong], i + a + t + o),
            s = i + a + o,
            r = userInfo.pieces.length;
        $(".resultpagebox,.resultpage").width(e.cw).height(e.ch), God.global.resultPage.showResultPage(n, s, r, t, e.chestListInfo)
    },
    gameMapInit: function(e) {
        var i = this;
        gameBuffer.init(i.gamesCtx), e && gameBuffer.setRen3(), gameBuffer.drawInGame(), gameBuffer.drawOtherInMap(), gameBuffer.drawBottomHua()
    },
    bindEvent: function() {
        var e = this;
        e.games.addEventListener("touchstart", function(i) {
            if (e.isStart && (i.preventDefault(), !e.opening)) {
                var a = i.touches[0],
                    t = e.canvasPosition(),
                    o = a.pageX - t.x,
                    n = a.pageY - t.y,
                    s = {
                        x: Math.floor(o / e.itemWidth),
                        y: Math.floor(n / e.itemHeight)
                    };
                e.isRightWay(s) ? e.clickMapItem(s) : gamenative.toast("路要一步步走哦")
            }
        }, !1), $("body").on("gameEnd", function() {
            clearTimeout(e.gameEndTiemr), e.gameEndTiemr = null, $("body").off("gameEnd"), $("body").off("openchest"), $(".load-chest").hide(), gamesound.stopBack(), gamesound.playGameOver(), e.showResultPage()
        }), $("body").on("openchest", function(i, a) {
            var t = e.chestList[a],
                o = t.chestName,
                n = t.point,
                s = n.x * e.itemWidth + e.mapDisToleft,
                r = n.y * e.itemHeight + e.mapDisToTop,
                m = o.split("_")[0],
                g = e.chestHasToPositionCount;
            t.awardID === e.chestEnum.wen ? g = e.chestPostionMap[t.awardID] : "" === e.chestPostionMap[t.awardID] ? e.chestPostionMap[t.awardID] = g : g = e.chestPostionMap[t.awardID];
            var d = new aniObj({
                    imgObj: God.imglist[o],
                    ctx: e.gamesCtx,
                    devicePixelRatio: e.devicePixelRatio,
                    startProperty: {
                        left: s,
                        top: r
                    },
                    endProperty: {
                        left: s,
                        top: r - 10
                    },
                    duration: 100,
                    delay: 100,
                    zindex: 10,
                    animationEnd: function() {
                        if (aniQueue.delAnimationObj(d), e.curChestIndex === e.chestCountInMap && (gameConfig.gd_android44down || e.createOldCanvas(), e.changeToNextMap(), e.ren = {
                                x: 0,
                                y: 0
                            }, !gameConfig.gd_android44down)) {
                            var i = gameConfig.mapEleList.mapbg;
                            new aniObj({
                                imgObj: e.oldcanvas,
                                ctx: e.gamesCtx,
                                devicePixelRatio: e.devicePixelRatio,
                                startProperty: {
                                    left: i.left * e.bili,
                                    top: i.top * e.bili,
                                    width: i.width * e.bili,
                                    height: i.height * e.bili,
                                    opacity: 1
                                },
                                endProperty: {
                                    left: i.left * e.bili,
                                    top: i.top * e.bili - 400,
                                    width: i.width * e.bili,
                                    height: i.height * e.bili,
                                    opacity: 0
                                },
                                duration: 800,
                                zindex: 1,
                                animationEnd: function() {
                                    var e = this;
                                    aniQueue.delAnimationObj(e)
                                }
                            })
                        }
                    }
                }),
                c = e.chestTopPositionList[g];
            c && (t.ani = new aniObj({
                imgObj: God.imglist[m],
                ctx: e.gamesCtx,
                devicePixelRatio: e.devicePixelRatio,
                startProperty: {
                    left: s,
                    top: r - 10
                },
                endProperty: {
                    left: c.x * gameConfig.oldbili,
                    top: c.y * gameConfig.oldbili
                },
                duration: 1e3,
                delay: 200,
                zindex: 11,
                animationEnd: function() {
                    var i = this;
                    aniQueue.delAnimationObj(i), t.needToReset && (e.chestList[t.curChestIndex] = t, e.chestOBj[t.awardID] ++)
                }
            }))
        })
    },
    isRightWay: function(e) {
        var i = this;
        return 1 === Math.abs(i.ren.x - e.x) && 0 === Math.abs(i.ren.y - e.y) && e.x < gameConfig.col && e.y < gameConfig.row || 0 === Math.abs(i.ren.x - e.x) && 1 === Math.abs(i.ren.y - e.y) && e.x < gameConfig.col && e.y < gameConfig.row ? !0 : !1
    },
    clickMapItem: function(e) {
        var i = this,
            a = gameBuffer.map[e.y][e.x];
        switch (a) {
            case i.enumType.caopi:
                i.clickCaopi(e);
                break;
            case i.enumType.way:
                i.clickWay(e);
                break;
            case i.enumType.stone:
                i.clickStone(e);
                break;
            case i.enumType.chest:
                i.clickChest(e)
        }
    },
    clickCaopi: function(e) {
        var i = this;
        i.changeRenPosition(e), gameConfig.gd_android44down || (i.renAnimation(), i.feishi(e)), gamesound.playCollapse()
    },
    feishi: function(e) {
        var i = this,
            a = e.x * i.itemWidth + i.mapDisToleft + i.itemWidth / 2,
            t = e.y * i.itemHeight + i.mapDisToTop;
        new aniObj({
            imgObj: God.imglist.feishi1,
            ctx: i.gamesCtx,
            devicePixelRatio: i.devicePixelRatio,
            startProperty: {
                left: a,
                top: t
            },
            endProperty: {
                left: a - 50,
                top: t - 30
            },
            duration: 200,
            delay: 0,
            zindex: 2,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            imgObj: God.imglist.feishi2,
            ctx: i.gamesCtx,
            devicePixelRatio: i.devicePixelRatio,
            startProperty: {
                left: a,
                top: t
            },
            endProperty: {
                left: a - 30,
                top: t - 20
            },
            duration: 200,
            delay: 0,
            zindex: 2,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            imgObj: God.imglist.feishi3,
            ctx: i.gamesCtx,
            devicePixelRatio: i.devicePixelRatio,
            startProperty: {
                left: a,
                top: t
            },
            endProperty: {
                left: a - 10,
                top: t - 30
            },
            duration: 200,
            delay: 0,
            zindex: 2,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            imgObj: God.imglist.feishi4,
            ctx: i.gamesCtx,
            devicePixelRatio: i.devicePixelRatio,
            startProperty: {
                left: a,
                top: t
            },
            endProperty: {
                left: a + 20,
                top: t - 40
            },
            duration: 200,
            delay: 0,
            zindex: 2,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            imgObj: God.imglist.feishi5,
            ctx: i.gamesCtx,
            devicePixelRatio: i.devicePixelRatio,
            startProperty: {
                left: a,
                top: t
            },
            endProperty: {
                left: a + 30,
                top: t - 10
            },
            duration: 200,
            delay: 0,
            zindex: 2,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        })
    },
    renAnimation: function() {
        var e = this;
        new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.ren2
            },
            duration: 200,
            delay: 0,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.ren
            },
            duration: 200,
            delay: 200,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        })
    },
    yunAnimation: function() {
        var e = this;
        new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun1
            },
            duration: 200,
            delay: 0,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun2
            },
            duration: 200,
            delay: 200,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun1
            },
            duration: 200,
            delay: 400,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun2
            },
            duration: 200,
            delay: 600,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun1
            },
            duration: 200,
            delay: 800,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.yun2
            },
            duration: 200,
            delay: 1e3,
            zindex: 1,
            animationEnd: function() {
                var e = this;
                aniQueue.delAnimationObj(e)
            }
        }), new aniObj({
            renderItem: function() {
                gameBuffer.map[e.ren.y][e.ren.x] = e.enumType.ren
            },
            duration: 200,
            delay: 1200,
            zindex: 1,
            animationEnd: function() {
                var i = this;
                aniQueue.delAnimationObj(i), e.isYun = !1
            }
        })
    },
    clickWay: function(e) {
        var i = this;
        i.changeRenPosition(e)
    },
    clickStone: function() {
        var e = this;
        e.isYun || (gamesound.playStone(), gameConfig.gd_morelow || e.yunAnimation(), e.isYun = !0)
    },
    clickChest: function(e) {
        var i = this;
        gamesound.openChest(), i.changeChestToOpenInMap(e)
    },
    ajaxGetChest: function(e) {
        var i = this,
            a = {};
        a.curChestIndex = i.curChestIndex, a.point = e, i.chestList.push(a), i.curChestIndex++;
        var t = setTimeout(function() {
            a.isSoundPlayed || (a.awardID = i.chestEnum.wen, a.chestName = i.liwuArr[a.awardID], gamesound.getChest(!1), a.isSoundPlayed = !0, $("body").trigger("openchest", a.curChestIndex), void 0)
        }, 200);
        gamenative.openChest(function(e) {
            if ("1" === e.code) {
                clearTimeout(t), t = null, a.awardID = e.data.award_typeid, a.chestName = i.liwuArr[a.awardID], a.name = e.data.desc;
                var o = e.data.id;
                a.awardID === i.chestEnum.che ? 0 === userInfo.pieces.length ? (userInfo.pieces.push(o), userInfo.newPieces.push(o)) : -1 === $.inArray(o.toString(), userInfo.pieces) && -1 === $.inArray(o, userInfo.pieces) && (userInfo.pieces.push(o), userInfo.newPieces.push(o)) : a.awardID !== i.chestEnum.kong && (i.chestListInfo[o] ? i.chestListInfo[o].count++ : (i.chestListInfo[o] = {}, i.chestListInfo[o].count = 1, i.chestListInfo[o].name = e.data.desc, i.chestListInfo[o].pic = e.data.picurl, i.chestListInfo[o].amount = e.data.amount), a.awardID === i.chestEnum.juan && (userInfo.juanCount += 1), a.awardID === i.chestEnum.liu && (userInfo.liuCount += e.data.amount), a.awardID === i.chestEnum.you && (userInfo.youCount += e.data.amount))
            } else a.awardID = i.chestEnum.kong, a.chestName = i.liwuArr[a.awardID];
            if (i.hasOpenChestCount++, "" === i.chestPostionMap[a.awardID] && (i.chestPostionMap[a.awardID] = i.chestHasToPositionCount, i.chestHasToPositionCount++), a.isSoundPlayed) a.needToReset = !0, a.ani.isStop && i.chestOBj[a.awardID] ++;
            else {
                var n = a.awardID === i.chestEnum.kong;
                gamesound.getChest(n), a.isSoundPlayed = !0, $("body").trigger("openchest", a.curChestIndex), i.chestOBj[a.awardID] ++
            }
            i.gameEnd && i.hasOpenChestCount === i.curChestIndex && $("body").trigger("gameEnd")
        })
    },
    changeChestToOpenInMap: function(e) {
        var i = this;
        gameBuffer.map[e.y][e.x] = i.enumType.chestopen, i.changeRenPosition(e), i.ajaxGetChest(e)
    },
    createOldCanvas: function() {
        var e = this;
        e.oldcanvas = gameBuffer.drawMap()
    },
    changeToNextMap: function() {
        var e = this;
        e.gameMapInit(!0), e.chestCountInMap += mapData.chestInMap
    },
    changeRenPosition: function(e) {
        var i = this;
        gameBuffer.map[e.y][e.x] = i.enumType.ren, gameBuffer.map[i.ren.y][i.ren.x] = i.enumType.way, i.ren = e
    },
    canvasPosition: function() {
        var e = this;
        return {
            x: e.mapDisToleft,
            y: e.mapDisToTop
        }
    },
    setGamestage: function() {
        var e = this;
        e.games = document.getElementById("games"), e.gamesCtx = e.games.getContext("2d"), e.games.width = e.cw * e.devicePixelRatio, e.games.height = e.ch * e.devicePixelRatio, e.games.style.width = e.cw + "px", e.games.style.height = e.ch + "px"
    },
    updateMap: function() {
        var e = this;
        gameBuffer.drawInGame(), gameBuffer.drawOtherInMap(), aniQueue.render(), e.drawChestCount()
    },
    drawChestCount: function() {
        var e = this;
        for (var i in e.chestList) {
            var a = e.chestList[i],
                t = a.awardID;
            if (a.ani && a.ani.isStop) {
                var o = e.chestTopPositionList[e.chestPostionMap[t]],
                    n = o.x,
                    s = o.y,
                    r = God.imglist[a.chestName.split("_")[0]];
                if (e.gamesCtx.drawImage(r, n * gameConfig.oldbili * e.devicePixelRatio, s * gameConfig.oldbili * e.devicePixelRatio, r.width * gameConfig.bili * e.devicePixelRatio, r.height * gameConfig.bili * e.devicePixelRatio), e.chestOBj[t]) {
                    var o = e.chestTopPositionList[e.chestPostionMap[t]],
                        m = 60;
                    e.ch < 420 && (m = 50);
                    var n = (o.x + m) * gameConfig.oldbili * e.devicePixelRatio,
                        s = (o.y + 10) * gameConfig.oldbili * e.devicePixelRatio;
                    e.gamesCtx.beginPath(), e.gamesCtx.arc(n, s, 25 * gameConfig.bili, 0, 360, !1), e.gamesCtx.fillStyle = "#f94336", e.gamesCtx.fill(), e.gamesCtx.closePath(), e.gamesCtx.textAlign = "center", e.gamesCtx.textBaseline = "middle", e.gamesCtx.fillStyle = "#ffffff", e.gamesCtx.font = "18px Verdana", e.gamesCtx.fillText(e.chestOBj[t], n, s)
                }
            }
        }
    }
};
! function(e) {
    e.global.resultPage = {
        init: function() {
            var e = this;
            e.bindEvent()
        },
        bindEvent: function() {
            var e = this;
            $(".resultpagebox").on("click", function(i) {
                var a = i.target,
                    t = a.className; - 1 !== t.indexOf("activeinfo") && e._clickActiveInfo(), -1 !== t.indexOf("toselfgame") && e._clickToSelfGame(), -1 !== t.indexOf("mychest") && e._clickMyChest(), -1 !== t.indexOf("result-mychest") && e._clickMyChest(), -1 !== t.indexOf("sharetimeline") && e._clickShare(), -1 !== t.indexOf("bindMobile") && e._clickBindMobile(), -1 !== t.indexOf("bindMobile-mychest") && e._clickBindMobile()
            })
        },
        _randomRange: function(e, i) {
            return e + (i - e) * Math.random()
        },
        _replaceTpl: function(e, i, a) {
            var t = String(e),
                o = a || /#\{([^}]*)\}/gm,
                n = String.trim || function(e) {
                    return e.replace(/^\s+|\s+$/g, "")
                };
            return t.replace(o, function(e, a) {
                return e = i[n(a)]
            })
        },
        _clickActiveInfo: function() {
            gamenative.gotoLink("index_wx.html")
        },
        _clickMyChest: function() {
            e.pageLog.sendLog("treasures_mychest"), gamenative.gotoLink("treasures_wx.html")
        },
        _clickShare: function() {
            e.common.shareObj.share()
        },
        _clickBindMobile: function() {
            gamenative.gotoLink("bind_wx.html")
        },
        _clickToSelfGame: function() {
            window.location.href = window.location.href.replace(location.search, "") + "?shareGDId=" + gameInfo.new_shareid + "&gd_from=othershare"
        },
        showResultPage: function(e, i, a, t, o) {
            var n = this,
                s = document.getElementById("resultpage").innerHTML;
            $("html,body").css("overflow", "hidden");
            var r = "",
                m = "";
            shareInfo.self_play ? r = "<span style='color:#ffcf2d'>您挖到了" + e + "个宝藏</span>" : (r = "<p class='ch1'><span>您帮好友</span>" + userInfo.nickname + "</p>", r += "<p class='ch2'><span>挖到了</span>" + e + "<span>个宝藏</span></p>", m = "wabao-tip");
            var g = {
                chenghao2: r,
                zoom: document.body.clientWidth / 640,
                wabaotipclass: m
            };
            0 === e ? (g.descclass = "block", g.desc2 = "抱歉，您还没有挖到任何奖励。<br>下次挖宝加油哦！") : g.descclass = "none", shareInfo.self_play || 1 !== shareInfo.self_left ? shareInfo.self_play ? (g.btn1class = "sharetimeline", g.rbtn2class = shareInfo.mobile_bind ? "mychest" : "bindMobile", g.rbtn4 = "我的宝藏") : (g.rbtn2class = "none", g.btn1class = "result-mychest") : (g.btn1class = "toselfgame", g.rbtn2class = "mychest", g.rbtn4 = "我的宝藏");
            var d = [];
            for (var c in gameObj.chestList) gameObj.chestList[c].chestName && "kong_liwu" !== gameObj.chestList[c].chestName && "wen_liwu" !== gameObj.chestList[c].chestName && d.push(gameObj.chestList[c]);

            g.rank = recordList.length > 0 || d.length > 0 ? n.getRank(d) : "";
            var u = n._replaceTpl(s, g);
            $(".resultpagebox").empty().append(u).show(), 0 === e ? ($(".chestlist1").hide(), $(".nochest").show()) : ($("#liucount span").text(userInfo.liuCount + "M流量"), $("#juancount span").text(userInfo.juanCount + "张优惠券"), $("#youcount span").text(userInfo.youCount + "元油卡"), $("#checount span").text(t + "块碎片"), $(".nochest").hide())
        },
        getRank: function(i) {
            var a = {},
                t = "<div class='friend-info'>";
            t += "<h3>好友给力榜</h3>", t += "<p class='rank-tip'>(还可以找" + (shareInfo.target_left - 1) + "个好友帮忙)</p></div>", t += "<ul class='rank'>";
            var o = i.length;
            if (o > 0) {
                var n = i[o - 1].name,
                    s = o,
                    r = e.util.makeTs(),
                    m = new Date(1e3 * r),
                    g = m.getMonth() + 1,
                    d = m.getDate();
                t += "<li class='clearfix'><img src='" + ganemSelfInfo.avatar + "'>", t += "<div class='content'><h4>" + ganemSelfInfo.nickname + "</h4>", t += shareInfo.self_play ? "<p>帮我找到了" + n + "等" + s + "个宝贝</p></div>" : "<p>帮TA找到了" + n + "等" + s + "个宝贝</p></div>", t += "<div class='time'>" + g + "月" + d + "日</div></li>"
            }
            for (var c = 0; c < recordList.length; c++) {
                var u = recordList[c],
                    p = u.avatar;
                if (!a[p]) {
                    a[p] = !0;
                    var l = new Date(1e3 * u.ts),
                        h = l.getMonth() + 1,
                        f = l.getDate();
                    t += "<li class='clearfix'><img src='" + u.avatar + "'>", t += "<div class='content'><h4>" + u.nickname + "</h4>", t += shareInfo.self_play ? "<p>帮我找到了" + u.goods + "等" + u.count + "个宝贝</p></div>" : "<p>帮TA找到了" + u.goods + "等" + u.count + "个宝贝</p></div>", t += "<div class='time'>" + h + "月" + f + "日</div></li>"
                }
            }
            return t += "</ul>"
        }
    }, e.global.resultPage.init()
}(God),
function(e) {
    if (e.imglist = {}, e.global.gameinit = {
            init: function() {
                var i = this;
                i.cw = document.body.clientWidth, i.zoom = i.cw / 640, $(".header").show(), e.inGod || Pop.init(), $("html").css("font-size", 100 * i.cw / 640 + "px"), /(iPad|iPhone|iPod).*OS\s?9/.test(navigator.userAgent) && $("body").addClass("ios9"), e.inGod ? i.loadProess() : i.checkAuth()
            },
            loadProess: function() {
                var i, a = gameConfig.gamename;
                i = "game1" === a ? [{
                    id: "bg",
                    url: "img/game1/bg-9f8f2f80.jpg"
                }, {
                    id: "mapbg",
                    url: "img/game1/mapbg-55d28096.png"
                }, {
                    id: "caopi",
                    url: "img/game1/caopi-ad08ea68.png"
                }, {
                    id: "stone",
                    url: "img/game1/stone-87c03116.png"
                }, {
                    id: "chest",
                    url: "img/game1/chest-5d9041a1.png"
                }, {
                    id: "chestopen",
                    url: "img/game1/chestopen-6881cb0d.png"
                }, {
                    id: "ren",
                    url: "img/game1/ren-447d3358.png"
                }, {
                    id: "ren2",
                    url: "img/game1/ren2-4338a2b6.png"
                }, {
                    id: "ren3",
                    url: "img/game1/ren3-15a95c25.png"
                }, {
                    id: "way",
                    url: "img/game1/way-32442e9d.png"
                }, {
                    id: "yun1",
                    url: "img/game1/yun1-84a84d76.png"
                }, {
                    id: "yun2",
                    url: "img/game1/yun2-9fa3ad8b.png"
                }, {
                    id: "juan",
                    url: "img/game/juan-0b02398d.png"
                }, {
                    id: "kong",
                    url: "img/game/kong-530db358.png"
                }, {
                    id: "liu",
                    url: "img/game/liu-5d58c263.png"
                }, {
                    id: "che",
                    url: "img/game/che-70bf9990.png"
                }, {
                    id: "wen",
                    url: "img/game/wen-0f030d5e.png"
                }, {
                    id: "you",
                    url: "img/game/you-2dcb15f4.png"
                }, {
                    id: "juan_liwu",
                    url: "img/game/juan_liwu-477456a0.png"
                }, {
                    id: "kong_liwu",
                    url: "img/game/kong_liwu-bbfc16fe.png"
                }, {
                    id: "liu_liwu",
                    url: "img/game/liu_liwu-f21fc72e.png"
                }, {
                    id: "che_liwu",
                    url: "img/game/che_liwu-518c6682.png"
                }, {
                    id: "wen_liwu",
                    url: "img/game/wen_liwu-2a6f6916.png"
                }, {
                    id: "you_liwu",
                    url: "img/game/you_liwu-4fb4a819.png"
                }, {
                    id: "feishi1",
                    url: "img/game/feishi1-2febe798.png"
                }, {
                    id: "feishi2",
                    url: "img/game/feishi2-cb951b58.png"
                }, {
                    id: "feishi3",
                    url: "img/game/feishi3-c19a2b26.png"
                }, {
                    id: "feishi4",
                    url: "img/game/feishi4-c19a2b26.png"
                }, {
                    id: "feishi5",
                    url: "img/game/feishi5-150b9378.png"
                }, {
                    id: "hua",
                    url: "img/game1/hua-b0dfc980.png"
                }] : [{
                    id: "bg",
                    url: "img/game2/bg-4d6100eb.jpg"
                }, {
                    id: "mapbg",
                    url: "img/game2/mapbg-146e5507.png"
                }, {
                    id: "caopi",
                    url: "img/game2/caopi-0d7bdcc2.png"
                }, {
                    id: "stone",
                    url: "img/game2/stone-af563f71.png"
                }, {
                    id: "chest",
                    url: "img/game2/chest-a3274e0c.png"
                }, {
                    id: "chestopen",
                    url: "img/game2/chestopen-da7384e2.png"
                }, {
                    id: "ren",
                    url: "img/game2/ren-daf39324.png"
                }, {
                    id: "ren2",
                    url: "img/game2/ren2-050a6041.png"
                }, {
                    id: "ren3",
                    url: "img/game2/ren3-a84dd0a9.png"
                }, {
                    id: "way",
                    url: "img/game2/way-6b687b3d.png"
                }, {
                    id: "yun1",
                    url: "img/game2/yun1-9731fce2.png"
                }, {
                    id: "yun2",
                    url: "img/game2/yun2-38503f5c.png"
                }, {
                    id: "juan",
                    url: "img/game/juan-0b02398d.png"
                }, {
                    id: "kong",
                    url: "img/game/kong-530db358.png"
                }, {
                    id: "liu",
                    url: "img/game/liu-5d58c263.png"
                }, {
                    id: "che",
                    url: "img/game/che-70bf9990.png"
                }, {
                    id: "wen",
                    url: "img/game/wen-0f030d5e.png"
                }, {
                    id: "you",
                    url: "img/game/you-2dcb15f4.png"
                }, {
                    id: "juan_liwu",
                    url: "img/game/juan_liwu-477456a0.png"
                }, {
                    id: "kong_liwu",
                    url: "img/game/kong_liwu-bbfc16fe.png"
                }, {
                    id: "liu_liwu",
                    url: "img/game/liu_liwu-f21fc72e.png"
                }, {
                    id: "che_liwu",
                    url: "img/game/che_liwu-518c6682.png"
                }, {
                    id: "wen_liwu",
                    url: "img/game/wen_liwu-2a6f6916.png"
                }, {
                    id: "you_liwu",
                    url: "img/game/you_liwu-4fb4a819.png"
                }, {
                    id: "feishi1",
                    url: "img/game/feishi1-2febe798.png"
                }, {
                    id: "feishi2",
                    url: "img/game/feishi2-cb951b58.png"
                }, {
                    id: "feishi3",
                    url: "img/game/feishi3-c19a2b26.png"
                }, {
                    id: "feishi4",
                    url: "img/game/feishi4-c19a2b26.png"
                }, {
                    id: "feishi5",
                    url: "img/game/feishi5-150b9378.png"
                }];
                var t = ["img/game/guang-4ff2cb6e.png", "img/game/header-f5c6a2a1.png", "img/game/jiaocheng-bff5d5df.png", "img/game/loadchest-7ab6ed55.png", "img/game/loading-40cb405f.png", "img/game/proess-6e21c218.png", "img/game/startbtn_1-8014abe5.png", "img/game/yinyue-35035845.png", "img/game/yinyueno-3ac6e3de.png", "img/gamepage/bottom-tip-a586c1ef.png", "img/gamepage/btn-3a1b05be.png", "img/gamepage/btn_hui-9bd5ca71.png", "img/gamepage/go-d92e4377.png", "img/gamepage/btnwx1-ba0b1f06.png", "img/gamepage/btnwx2-22abea6d.png", "img/gamepage/car-tip-cae0ff35.jpg", "img/gamepage/chestopen-6881cb0d.png", "img/gamepage/chestopen2-da7384e2.png", "img/gamepage/defaulticon-b9295dee.png", "img/gamepage/game-index-96d395f3.jpg", "img/gamepage/game-index-repeat-a1a75282.jpg", "img/gamepage/game-rule1-c8ebce50.jpg", "img/gamepage/game-rule2-062371f6.jpg", "img/gamepage/game-rules-bg2-428526fb.jpg", "img/gamepage/mychest-dcdc91ac.png", "img/gamepage/chestlist-7966bbb7.png", "img/gamepage/resultbtn1-f68d6a8c.png", "img/gamepage/resultbtn2-c724c07c.png", "img/gamepage/resultbtn3-bd23478e.png", "img/gamepage/resultbtn4-b68e0e1a.png", "img/gamepage/wabao_tip-370e75cc.png", "img/gamepage/nochest-1074930b.png", "img/gamepage/ranktitle2-05347fb4.png", "img/gamepage/rule-alert-945b9485.png", "img/gamepage/rule-alert2-6f5c26c4.png", "img/gamepage/rule-chest-bb303835.png", "img/gamepage/rule-cursor-5a8902dc.png", "img/gamepage/startbtn-8014abe5.png", "img/gamepage/startbtn1-14a19325.png", "img/gamepage/tip_gift-325bc789.png", "img/gamepage/top-tip-abc23f92.png", "img/gamepage/toptipwx-7e47177a.png", "img/gamepage/bottomtipwx-ec6815eb.png", "img/gamepage/startwx-18f045ec.png", "img/gamepage/r_iconj-f7b00fb6.png", "img/gamepage/r_iconl-eae519b5.png", "img/gamepage/r_icons-3c15c229.png", "img/gamepage/r_iconyou-60e495ab.png", "img/gamepage/wabao_self-9a345895.png", "img/gamepage/result_mychest-8182e524.png"],
                    o = [{
                        id: "audioBack",
                        src: "sound/back.mp3"
                    }, {
                        id: "audioTimeup",
                        src: "sound/timeup.mp3"
                    }, {
                        id: "audio321",
                        src: "sound/321.mp3"
                    }, {
                        id: "audioCollapse",
                        src: "sound/collapse.mp3"
                    }, {
                        id: "audioGo",
                        src: "sound/countdown.mp3"
                    }, {
                        id: "audioOpenbox",
                        src: "sound/openbox.mp3"
                    }, {
                        id: "audioStone",
                        src: "sound/stone.mp3"
                    }, {
                        id: "audioJackpot",
                        src: "sound/jackpot.mp3"
                    }, {
                        id: "audioEmpty",
                        src: "sound/empty.mp3"
                    }];
                gameConfig.gd_android && (o = [{
                    id: "audioBack",
                    src: "sound/back.mp3"
                }]);
                var n = [];
                for (var s in i) n.push(i[s].url);
                var r = t.concat(n);
                new e.widget.Load({
                    imgList: r,
                    audioHtmlList: !gameConfig.android5down && createjs.WebAudioPlugin.isSupported() ? [] : o,
                    afterFun: function() {
                        for (var a in i) {
                            var t = i[a];
                            e.imglist[t.id] = new Image, e.imglist[t.id].src = t.url
                        }
                        e.inGod ? gamenative.gameCheck() : gamenative.gameCheckShare()
                    }
                })
            },
            checkAuth: function() {
                var i = this;
                return e.common.checkWxAuth("info") ? void i.loadProess() : void e.common.goWxAuth(location.href, void 0, "info")
            },
            getPieceText: function(i, a) {
                var t;
                20 === i ? t = ["恭喜您赢得Smart"] : 0 === i ? t = ["世界那么大，你却一块Smart碎片都没有。"] : 4 > i ? t = ["千里之行始于碎片，努力的人运气不会差", "你的人生巅峰就从这块碎片开始了！", "这半亩汽车矿是你的了，开始努力挖吧~"] : 7 > i ? t = ["继续攒碎片，Smart百分百是你的（吧）", "挖挖挖…哇！土里是可以长汽车的！", "桃花潭水深千尺，怒挖碎片是正事！"] : 10 > i ? t = ["你已攒齐三个轮子和218颗螺丝钉~干巴爹~", "轻点按~你一定不想看到一块“屏幕碎片”", "洛阳亲友如相问，就说我在挖碎片~"] : 13 > i ? t = ["大喜！半辆车入手，陛下请宣旨大赦天下~", "攒够半辆了！基友前来祝贺，准备请客吧！", "喜大普奔，半辆车入手，偷着乐去吧！"] : 16 > i ? t = ["嘘……好多碎片了，80%的人都在眼红你~", "总裁V587，汽车碎片都被你承包了吧！", "低调，看过《一块碎片引发的血案么》？"] : 19 > i ? t = ["再来一发，就能get新技能“碎片变汽车”", "我们一致认为你该准备一本驾照了~", "这么多块了……你的手机屏幕还好嘛？"] : 19 === i && (t = ["想要最后一块碎片吗？去抢吧！我把Smart都放在那里了", "抢到最后一块碎片可以100%召唤一辆Smart！", "你已经有19块碎片了！但抢不到最后一块就然并卵了!"]);
                var o = t[e.random(0, t.length - 1)];
                return a && (o = o.replace(/[你您]/g, "TA")), o
            }
        }, document.body.clientHeight < 300) location.reload();
    else {
        $(".game-rules-box,.game-steg,.rule-alert,.load-chest").on("touchmove", function(e) {
            e.preventDefault()
        }); {
            e.util.makeTs()
        }
        gameConfig.init(), e.global.gameinit.init(), e.pageLog.sendLog("game", "pv")
    }
}(God);
