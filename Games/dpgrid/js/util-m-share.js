!function(){var e="util-m-share@1.0.15/entries/browser.js",n="util-m-share@1.0.15/entries/entry.js",t="util-m-share@1.0.15/entries/mqq.js",i="util-m-share@1.0.15/entries/wx.js",s="util-m-share@1.0.15/page/share.js",a="zepto@^1.2.2",r="dpapp@^1.1.12",h="util-m-ua@~0.1.3",o="util-m-share@1.0.15/index.js",c=[e,n,t,i,s],u=[a,r],l={zepto:a,dpapp:r},p=l;define(o,[h],function(e,n,t,i,s){var a=e("util-m-ua")(),r=function(e,n){e=e||{},n=n||{};var t;t=n.envir?n.envir:a.type,this.envir=t,this.hide=n.hide||!1,this.btn=n.btn||void 0,this.autoInit=n.autoInit||!0,this.shareConfig=e,this.shareConfig.content||(this.shareConfig.content="【"+this.shareConfig.title+"】"+this.shareConfig.desc),this.setting=n,this.autoInit&&this.init()};r.prototype.init=function(){"dpapp"===this.envir?this.shareInDPApp():"weixin"===this.envir?this.shareInWX():"qq"===this.envir?this.shareInQQ():this.shareInBrowser()},r.prototype.shareInDPApp=function(n){var t=this;n=n||t.shareConfig,n.channelDPApp&&(n.feed=n.channelDPApp),t.hide||(e.async("dpapp",function(e){e.initShare(n)}),t.btn&&e.async("zepto",function(e){e(t.btn).on("click",function(e){e.preventDefault(),DPApp.share(n)})}))},r.prototype.shareInWX=function(n){var t=this;n=n||t.shareConfig,setting=t.setting;var i={0:"onMenuShareAppMessage",1:"onMenuShareTimeline",2:"onMenuShareQQ"};n.channelWX&&n.channelWX.length>0?(n.channel=[],n.channelWX.forEach(function(e){i[e]&&n.channel.push(i[e])})):n.channel=["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ"],e.async("./entries/wx",function(i){i(n,setting),t.btn&&e.async("zepto",function(e){e(t.btn).on("click",function(n){n.preventDefault();var t=e('<div class="share-wrap"><div class="icon-share"></div></div>');t.on("click",function(e){e.preventDefault(),t.remove()}),e("body").append(t)})})})},r.prototype.shareInQQ=function(n){var t=this;n=n||t.shareConfig,n.channelQQ=n.channelQQ||[0,1,2,3],e.async("./entries/mqq",function(i){i=i||window.mqq,t.hide?i.ui.setTitleButtions({title:"",hidden:!0,iconID:4}):(1===n.channelQQ.length?i.ui.setTitleButtons({right:{callback:function(){i.ui.shareMessage({title:n.title,desc:n.desc,share_url:n.url,image_url:n.image,share_type:n.channelQQ[0],back:!0},function(e){e&&0==e.retCode?n.success():n.fail()})}}}):i.ui.setOnShareHandler(function(e){i.ui.shareMessage({title:n.title,desc:n.desc,share_url:n.url,image_url:n.image,share_type:e,back:!0},function(e){e&&0==e.retCode?n.success():n.fail()})}),t.btn&&e.async("zepto",function(e){e(t.btn).on("click",function(e){e.preventDefault(),window.mqq.ui.showShareMenu()})}))})},r.prototype.shareInBrowser=function(n){var t=this;e.async("./entries/browser",function(e){var i={0:"wechat",1:"timeline",4:"weibo",5:"qqzone",8:"tecentweibo"};n=n||t.shareConfig,n.channelBrowser&&n.channelBrowser.length>0?(n.channel=[],n.channelBrowser.forEach(function(e){i[e]&&n.channel.push(i[e])})):n.channel=["weibo","qqzone","tecentweibo","wechat","timeline"],new e(n,t.setting)})},r.prototype.show=function(){var n=this;n.btn&&e.async("zepto",function(e){e(n.btn).trigger("click")})},"undefined"!=typeof t&&(t.exports=r)},{asyncDeps:u,entries:c,main:!0,map:p})}();
//# sourceMappingURL=util-m-share.js.map