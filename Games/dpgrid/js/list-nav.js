!function(){var e="zepto@^1.2.1",n="wepp-module-overlay@~0.3.0",s="iscroll@~5.0.10",o="list-nav@1.0.0/index.js",i={},t=i;define(o,[e,n,s],function(e,n,s){var o=e("zepto"),i=e("wepp-module-overlay"),t="Hide",a=e("iscroll"),d=function(e){if(!e)throw"Menu got no param";this.container=e,this.lock=!1,this._init()};d.prototype._init=function(){var e=this.triggers=this.container.find(".J_trigger"),n=this.selectors=this.container.find(".J_selector"),s=this;this._initOverlay(),e.each(function(e,i){o(i).on("click",function(i){i.preventDefault();var a=n.eq(e);if(a&&a.length)if(a.hasClass(t)){if(s._openSelector(e),o(a).find(".second-nav").length>0)for(var d=o(a).find(".second-nav .item").length,l=0;d>l;l++)o(a).find(".second-nav .item").eq(l).hasClass("on")||o(a).find(".second-selector").eq(l).addClass("Hide")}else setTimeout(function(){s.ol.hide()},300)})}),n.each(function(e,n){var i=(o(n).find(".sub"),o(n).find(".second-selector").length>1);if(o(n).find(".main").each(function(e,i){o(i).find("p").each(function(e,a){var d=o(a),l=d.parent().find(".sub");l.appendTo(o(i).parent()).css({left:"45%",width:"55%"}),o(n).find(".second-selector").removeClass("Hide"),d.on("click",function(){o(i).parent().find(".sub").addClass(t),o(i).find(".item").removeClass("on"),o(this).addClass("on"),s._showMenu(l)}),a._subItem_=l})}),i){var a=document.createElement("div");o(a).addClass("second-nav"),o(n).prepend(a),o(n).find(".second-selector").each(function(e){var s=document.createElement("div"),i=o(".second-selector").eq(e).attr("data-name");o(s).addClass("item"),o(s).html(i),o(a).append(s),o(n).find(".main").eq(e).find(".on").length>0&&(o(s).addClass("on"),o(n).find(".second-selector").eq(e).removeClass("Hide"))}),o(n).find(".second-nav .item").each(function(e,s){o(s).on("click",function(){o(n).find(".second-nav .item").removeClass("on"),o(s).addClass("on"),o(n).find(".second-selector").addClass("Hide"),o(n).find(".second-selector").eq(e).removeClass("Hide");for(var i=o(n).find(".second-nav .item").length,t=0,a=0;i>a;a++)if(o(n).find(".second-selector").eq(a).find(".sub .on").length>0){t=a;break}e!=t&&0==o(n).find(".second-selector").eq(e).find(".main .on").length&&(o(n).find(".second-selector").eq(e).find(".main .item").eq(0).addClass("on"),o(n).find(".second-selector").eq(e).find(".sub").eq(0).removeClass("Hide"))})})}})},d.prototype._showSelector=function(e){var n=this;this.ol.show(),e.removeClass(t),e.find(".menu").each(function(){o(this).hasClass(t)||n._showMenu(o(this))})},d.prototype._showMenu=function(e){e.removeClass(t),e.length&&this._iScroll(e.get(0))},d.prototype._iScroll=function(e){if(e._iscroll_)e._iscroll_.refresh();else{e._iscroll_=new a(e,{mouseWheel:!0,click:!0,scrollbars:!0});var n=o(e).find(".on");n.length&&e._iscroll_.scrollToElement(n.get(0),0)}},d.prototype._initOverlay=function(){var e=this.ol=new i,n=this;e.on("hide",function(){n.selectors.addClass(t),n.triggers.removeClass("on")})},d.prototype._openSelector=function(e){this.selectors.addClass(t),this._showSelector(this.selectors.eq(e)),this.triggers.removeClass("on"),this.triggers.eq(e).addClass("on")},d.prototype.open=function(e){var n=this;this.selectors.each(function(s,i){o(i).find(".main .item").each(function(a,d){d.innerHTML==e&&(n._openSelector(s),o(i).find(".main .item").removeClass("on"),o(i).find(".sub").addClass(t),o(d).addClass("on"),n._showMenu(o(d._subItem_)))})})},s.exports=d},{main:!0,map:t})}();