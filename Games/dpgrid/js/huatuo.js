!function(){var t="huatuo@0.3.4/dest/cortex.js",i={},e=i;define(t,[],function(t,i,e,s,o){var n=20002,p="http://221.181.67.144/web-broker-service/api/speed",a=(window,window.performance||{});a.timing||(a.timing=a.timing||{},a.timing.navigationStart=a.timing.navigationStart||0,a.timing.loadEventEnd=a.timing.loadEventEnd||0,a.timing.domContentLoadedEventEnd=a.timing.domContentLoadedEventEnd||window._huatuo_dom_ready_point||0);var r=function(t,i,e,s,o){var r=this;window._huatuo||(window._huatuo={}),this.speedFlag=[],"object"==typeof t&&null!==t?t.length===o?(this.speedFlag.push(t.siteId||window._huatuo.siteId),this.speedFlag.push(t.subSiteId||window._huatuo.subSiteId),this.speedFlag.push(t.pageId||window._huatuo.pageId)):(this.speedFlag.push(typeof t[0]!=o?t[0]:window._huatuo.siteId),this.speedFlag.push(typeof t[1]!=o?t[1]:window._huatuo.subSiteId),this.speedFlag.push(typeof t[2]!=o?t[2]:window._huatuo.pageId)):(this.speedFlag.push(window._huatuo.siteId),this.speedFlag.push(window._huatuo.subSiteId),this.speedFlag.push(window._huatuo.pageId)),this.autoReport=i&&!0,this.appId=e||window._huatuo.appId||n,this.reportBase=s||window._huatuo.reportBase||p,this.speedparams=[];for(var u=1;u<=this.speedFlag.length;u++)this.speedparams.push("flag"+u+"="+encodeURIComponent(this.speedFlag[u-1]));this.timepoints=[],this.timepoints[0]=0,this.submitParams=[],this.autoReport&&r.doReport(r.reportTiming,function(){return a.timing.domContentLoadedEventEnd*a.timing.loadEventEnd===0})};r.prototype.reportTiming=function(t,i){var e=this,s=a.timing;e.timepoints[1]=s.unloadEventStart,e.timepoints[2]=s.unloadEventEnd,e.timepoints[3]=s.redirectStart,e.timepoints[4]=s.redirectEnd,e.timepoints[5]=s.fetchStart,e.timepoints[6]=s.domainLookupStart,e.timepoints[7]=s.domainLookupEnd,e.timepoints[8]=s.connectStart,e.timepoints[9]=s.connectEnd,e.timepoints[10]=s.requestStart,e.timepoints[11]=s.responseStart,e.timepoints[12]=s.responseEnd,e.timepoints[13]=s.domLoading,e.timepoints[14]=s.domInteractive,e.timepoints[15]=s.domContentLoadedEventStart,e.timepoints[16]=s.domContentLoadedEventEnd,e.timepoints[17]=s.domComplete,e.timepoints[18]=s.loadEventStart,e.timepoints[19]=s.loadEventEnd;for(var o=1;o<e.timepoints.length;++o){var n=e.timepoints[o]||0;n=Math.max(0,n-i),t.push(o+"="+n)}},r.prototype.doReport=function(){var t=this;t.push.apply(t,arguments),t.publish()},r.prototype.pusherList=[],r.prototype.push=function(){var t=new h(this);t.push.apply(t,arguments),this.pusherList.push(t)},r.prototype._lastPushReady=!1,r.prototype._publishLock=!1,r.prototype.publish=function(){var t=this,i=new u(this,t.pusherList);i.publish()};var u=function(t,i){this.pointer=t,this.pusherList=i};u.prototype.pusherList=[],u.prototype._published=!1,u.prototype.stopPublish=!1,u.prototype._tryCount=0,u.prototype._tryLimit=300,u.prototype.publish=function(){var t=this;if(!t._published){t._published=!0;var i=setInterval(function(){for(var e=!0,s={},o=[],n=0;n<t.pusherList.length;n++)if(!t.pusherList[n].isPublished&&(t.pusherList[n].lastPushReady||(e=!1),t.pusherList[n].submitParams.length>0&&!t.pusherList[n].isPublished))for(var a=0;a<t.pusherList[n].submitParams.length;a++)s[t.pusherList[n].submitParams[a]]=t.pusherList[n].submitParams[a];if(e){clearInterval(i);for(var n=0;n<t.pusherList.length;n++)t.pusherList[n].lastPushReady&&(t.pusherList[n].isPublished=!0);for(var r in s)o.push(r);if(!o.length)return;var u="v=1&speedparams="+encodeURIComponent(t.pointer.speedparams.join("&")+"&"+o.join("&")),h=p+"?"+u,d=new Image;d.src=h}else if(t._tryCount++,t._tryCount>t._tryLimit){for(var n=0;n<t.pusherList.length;n++)t.pusherList[n].stopPush=!0;clearInterval(i)}},100)}};var h=function(t){this.pointer=t};h.prototype.lastPushReady=!1,h.prototype.isPublished=!1,h.prototype.submitParams=[],h.prototype.stopPush=!1,h.prototype.push=function(t,i,e){var s=this,o="function"==typeof i?i:e;o=o||function(){return!1},s.lastPushReady=!1,s.submitParams=[];var n=setInterval(function(){if(s.stopPush)return void clearInterval(n);if(0===a.timing.navigationStart||o())return void(s.lastPushReady=!1);s.lastPushReady=!0;var e=a.timing.navigationStart;if(t){if("function"==typeof t)t.call(s.pointer,s.submitParams,e);else if("number"==typeof t&&"number"==typeof i){s.pointer.timepoints[t]=i;var p=s.pointer.timepoints[t]||0;p=Math.max(0,p-e),s.submitParams.push(t+"="+p)}}else for(var r=1;r<s.pointer.timepoints.length;++r){var p=s.pointer.timepoints[r]||0;p=Math.max(0,p-e),s.submitParams.push(r+"="+p)}return void clearInterval(n)},10)},e.exports=r},{main:!0,map:e})}();
//# sourceMappingURL=huatuo.js.map