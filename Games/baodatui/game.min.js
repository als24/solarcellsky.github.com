var cc=cc||{};cc._tmp=cc._tmp||{};cc._LogInfos={};_p=window;_p=Object.prototype;delete window._p;cc.newElement=function(a){return document.createElement(a)};cc._addEventListener=function(a,b,c,d){a.addEventListener(b,c,d)};cc._isNodeJs=typeof require!=="undefined"&&require("fs");cc.each=function(a,b,c){if(a)if(a instanceof Array)for(var d=0,e=a.length;d<e;d++){if(b.call(c,a[d],d)===false)return}else for(d in a)if(b.call(c,a[d],d)===false)return};
cc.extend=function(a){var b=arguments.length>=2?Array.prototype.slice.call(arguments,1):[];cc.each(b,function(c){for(var d in c)if(c.hasOwnProperty(d))a[d]=c[d]});return a};cc.isFunction=function(a){return typeof a=="function"};cc.isNumber=function(a){return typeof a=="number"||Object.prototype.toString.call(a)=="[object Number]"};cc.isString=function(a){return typeof a=="string"||Object.prototype.toString.call(a)=="[object String]"};
cc.isArray=function(a){return Object.prototype.toString.call(a)=="[object Array]"};cc.isUndefined=function(a){return typeof a=="undefined"};cc.isObject=function(a){var b=typeof a;return b=="function"||a&&b=="object"};cc.isCrossOrigin=function(a){if(!a){cc.log("invalid URL");return false}var b=a.indexOf("://");if(b==-1)return false;b=a.indexOf("/",b+3);return(b==-1?a:a.substring(0,b))!=location.origin};
cc.AsyncPool=function(a,b,c,d,e){var f=this;f._srcObj=a;f._limit=b;f._pool=[];f._iterator=c;f._iteratorTarget=e;f._onEnd=d;f._onEndTarget=e;f._results=a instanceof Array?[]:{};f._isErr=false;cc.each(a,function(g,h){f._pool.push({index:h,value:g})});f.size=f._pool.length;f.finishedSize=0;f._workingSize=0;f._limit=f._limit||f.size;f.onIterator=function(g,h){f._iterator=g;f._iteratorTarget=h};f.onEnd=function(g,h){f._onEnd=g;f._onEndTarget=h};f._handleItem=function(){var g=this;if(g._pool.length!=0)if(!(g._workingSize>=
g._limit)){var h=g._pool.shift(),j=h.value,k=h.index;g._workingSize++;g._iterator.call(g._iteratorTarget,j,k,function(m){if(!g._isErr){g.finishedSize++;g._workingSize--;if(m){g._isErr=true;g._onEnd&&g._onEnd.call(g._onEndTarget,m)}else{var n=Array.prototype.slice.call(arguments,1);g._results[this.index]=n[0];if(g.finishedSize==g.size)g._onEnd&&g._onEnd.call(g._onEndTarget,null,g._results);else g._handleItem()}}}.bind(h),g)}};f.flow=function(){if(this._pool.length==0)this._onEnd&&this._onEnd.call(this._onEndTarget,
null,[]);else for(var g=0;g<this._limit;g++)this._handleItem()}};
cc.async={series:function(a,b,c){a=new cc.AsyncPool(a,1,function(d,e,f){d.call(c,f)},b,c);a.flow();return a},parallel:function(a,b,c){a=new cc.AsyncPool(a,0,function(d,e,f){d.call(c,f)},b,c);a.flow();return a},waterfall:function(a,b,c){var d=[],e=[null],f=new cc.AsyncPool(a,1,function(g,h,j){d.push(function(){d=Array.prototype.slice.call(arguments,1);if(a.length-1==h)e=e.concat(d);j.apply(null,arguments)});g.apply(c,d)},function(g){if(b){if(g)return b.call(c,g);b.apply(c,e)}});f.flow();return f},
map:function(a,b,c,d){var e=b;if(typeof b=="object"){c=b.cb;d=b.iteratorTarget;e=b.iterator}a=new cc.AsyncPool(a,0,e,c,d);a.flow();return a},mapLimit:function(a,b,c,d,e){a=new cc.AsyncPool(a,b,c,d,e);a.flow();return a}};
cc.path={join:function(){for(var a=arguments.length,b="",c=0;c<a;c++)b=(b+(b==""?"":"/")+arguments[c]).replace(/(\/|\\\\)$/,"");return b},extname:function(a){return(a=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a))?a[1]:null},mainFileName:function(a){if(a){var b=a.lastIndexOf(".");if(b!==-1)return a.substring(0,b)}return a},basename:function(a,b){var c=a.indexOf("?");if(c>0)a=a.substring(0,c);c=/(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(a.replace(/(\/|\\\\)$/,""));if(!c)return null;c=c[2];if(b&&a.substring(a.length-b.length).toLowerCase()==
b.toLowerCase())return c.substring(0,c.length-b.length);return c},dirname:function(a){return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(a,b){b=b||"";var c=a.indexOf("?"),d="";if(c>0){d=a.substring(c);a=a.substring(0,c)}c=a.lastIndexOf(".");if(c<0)return a+b+d;return a.substring(0,c)+b+d},changeBasename:function(a,b,c){if(b.indexOf(".")==0)return this.changeExtname(a,b);var d=a.indexOf("?"),e="";c=c?this.extname(a):"";if(d>0){e=a.substring(d);a=a.substring(0,d)}d=a.lastIndexOf("/");
d=d<=0?0:d+1;return a.substring(0,d)+b+c+e}};
cc.loader={_jsCache:{},_register:{},_langPathCache:{},_aliases:{},resPath:"",audioPath:"",cache:{},getXMLHttpRequest:function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},_getArgs4Js:function(a){var b=a[0],c=a[1],d=a[2],e=["",null,null];if(a.length===1)e[1]=b instanceof Array?b:[b];else if(a.length===2)if(typeof c=="function"){e[1]=b instanceof Array?b:[b];e[2]=c}else{e[0]=b||"";e[1]=c instanceof Array?c:[c]}else if(a.length===3){e[0]=b||"";e[1]=c instanceof
Array?c:[c];e[2]=d}else throw"arguments error to load js!";return e},loadJs:function(){var a=this,b=a._jsCache,c=a._getArgs4Js(arguments),d=c[0],e=c[1];c=c[2];navigator.userAgent.indexOf("Trident/5")>-1?a._loadJs4Dependency(d,e,0,c):cc.async.map(e,function(f,g,h){f=cc.path.join(d,f);if(b[f])return h(null);a._createScript(f,false,h)},c)},loadJsWithImg:function(){var a=this._loadJsImg(),b=this._getArgs4Js(arguments);this.loadJs(b[0],b[1],function(c){if(c)throw c;a.parentNode.removeChild(a);b[2]&&b[2]()})},
_createScript:function(a,b,c){var d=document,e=cc.newElement("script");e.async=b;e.src=a;this._jsCache[a]=true;cc._addEventListener(e,"load",function(){e.parentNode.removeChild(e);this.removeEventListener("load",arguments.callee,false);c()},false);cc._addEventListener(e,"error",function(){e.parentNode.removeChild(e);c("Load "+a+" failed!")},false);d.body.appendChild(e)},_loadJs4Dependency:function(a,b,c,d){if(c>=b.length)d&&d();else{var e=this;e._createScript(cc.path.join(a,b[c]),false,function(f){if(f)return d(f);
e._loadJs4Dependency(a,b,c+1,d)})}},_loadJsImg:function(){var a=document,b=a.getElementById("cocos2d_loadJsImg");if(!b){b=cc.newElement("img");if(cc._loadingImage)b.src=cc._loadingImage;a=a.getElementById(cc.game.config.id);a.style.backgroundColor="black";a.parentNode.appendChild(b);var c=getComputedStyle?getComputedStyle(a):a.currentStyle;c||(c={width:a.width,height:a.height});b.style.left=a.offsetLeft+(parseFloat(c.width)-b.width)/2+"px";b.style.top=a.offsetTop+(parseFloat(c.height)-b.height)/2+
"px";b.style.position="absolute"}return b},loadTxt:function(a,b){if(cc._isNodeJs)require("fs").readFile(a,function(e,f){e?b(e):b(null,f.toString())});else{var c=this.getXMLHttpRequest(),d="load "+a+" failed!";c.open("GET",a,true);if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){c.setRequestHeader("Accept-Charset","utf-8");c.onreadystatechange=function(){if(c.readyState==4)c.status==200?b(null,c.responseText):b(d)}}else{c.overrideMimeType&&c.overrideMimeType("text/plain; charset=utf-8");
c.onload=function(){if(c.readyState==4)c.status==200?b(null,c.responseText):b(d)}}c.send(null)}},_loadTxtSync:function(a){if(cc._isNodeJs)return require("fs").readFileSync(a).toString();else{var b=this.getXMLHttpRequest();b.open("GET",a,false);if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent))b.setRequestHeader("Accept-Charset","utf-8");else b.overrideMimeType&&b.overrideMimeType("text/plain; charset=utf-8");b.send(null);if(!b.readyState==4||b.status!=200)return null;return b.responseText}},
loadCsb:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,true);c.responseType="arraybuffer";c.onload=function(){var d=c.response;if(d)window.msg=d;if(c.readyState==4)c.status==200?b(null,c.response):b("load "+a+" failed!")};c.send(null)},loadJson:function(a,b){this.loadTxt(a,function(c,d){try{c?b(c):b(null,JSON.parse(d))}catch(e){throw"load json ["+a+"] failed : "+e;}})},_checkIsImageURL:function(a){return/(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(a)!=null},loadImg:function(a,b,c){var d=
{isCrossOrigin:true};if(c!==undefined)d.isCrossOrigin=b.isCrossOrigin==null?d.isCrossOrigin:b.isCrossOrigin;else if(b!==undefined)c=b;var e=new Image;if(d.isCrossOrigin&&location.origin!="file://")e.crossOrigin="Anonymous";var f=function(){this.removeEventListener("load",f,false);this.removeEventListener("error",g,false);c&&c(null,e)},g=function(){this.removeEventListener("error",g,false);if(e.crossOrigin&&e.crossOrigin.toLowerCase()=="anonymous"){d.isCrossOrigin=false;cc.loader.loadImg(a,d,c)}else typeof c==
"function"&&c("load image failed")};cc._addEventListener(e,"load",f);cc._addEventListener(e,"error",g);e.src=a;return e},_loadResIterator:function(a,b,c){var d=this,e=null,f=a.type;if(f){f="."+f.toLowerCase();e=a.src?a.src:a.name+f}else{e=a;f=cc.path.extname(e)}if(b=d.cache[e])return c(null,b);b=null;if(f)b=d._register[f.toLowerCase()];if(!b){cc.error("loader for ["+f+"] not exists!");return c()}f=b.getBasePath?b.getBasePath():d.resPath;f=d.getUrl(f,e);b.load(f,e,a,function(g,h){if(g){cc.log(g);d.cache[e]=
null;delete d.cache[e];c()}else{d.cache[e]=h;c(null,h)}})},getUrl:function(a,b){var c=this._langPathCache,d=cc.path;if(a!==undefined&&b===undefined){b=a;a=(a=d.extname(b))?a.toLowerCase():"";a=(a=this._register[a])?a.getBasePath?a.getBasePath():this.resPath:this.resPath}b=cc.path.join(a||"",b);if(b.match(/[\/(\\\\)]lang[\/(\\\\)]/i)){if(c[b])return c[b];d=d.extname(b)||"";b=c[b]=b.substring(0,b.length-d.length)+"_"+cc.sys.language+d}return b},load:function(a,b,c){var d=this,e=arguments.length;if(e==
0)throw"arguments error!";if(e==3){if(typeof b=="function")b=typeof c=="function"?{trigger:b,cb:c}:{cb:b,cbTarget:c}}else if(e==2){if(typeof b=="function")b={cb:b}}else if(e==1)b={};a instanceof Array||(a=[a]);e=new cc.AsyncPool(a,0,function(f,g,h,j){d._loadResIterator(f,g,function(k){if(k)return h(k);var m=Array.prototype.slice.call(arguments,1);b.trigger&&b.trigger.call(b.triggerTarget,m[0],j.size,j.finishedSize);h(null,m[0])})},b.cb,b.cbTarget);e.flow();return e},_handleAliases:function(a,b){var c=
this._aliases,d=[];for(var e in a){var f=a[e];c[e]=f;d.push(f)}this.load(d,b)},loadAliases:function(a,b){var c=this,d=c.getRes(a);d?c._handleAliases(d.filenames,b):c.load(a,function(e,f){c._handleAliases(f[0].filenames,b)})},register:function(a,b){if(a&&b){if(typeof a=="string")return this._register[a.trim().toLowerCase()]=b;for(var c=0,d=a.length;c<d;c++)this._register["."+a[c].trim().toLowerCase()]=b}},getRes:function(a){return this.cache[a]||this.cache[this._aliases[a]]},release:function(a){var b=
this.cache,c=this._aliases;delete b[a];delete b[c[a]];delete c[a]},releaseAll:function(){var a=this.cache,b=this._aliases;for(var c in a)delete a[c];for(c in b)delete b[c]}};
cc.formatStr=function(){var a=arguments,b=a.length;if(b<1)return"";var c=a[0],d=true;if(typeof c=="object")d=false;for(var e=1;e<b;++e){var f=a[e];if(d)for(;;){var g=null;if(typeof f=="number")if(g=c.match(/(%d)|(%s)/)){c=c.replace(/(%d)|(%s)/,f);break}if(g=c.match(/%s/))c=c.replace(/%s/,f);else c+="    "+f;break}else c+="    "+f}return c};
(function(){var a=window,b,c;if(cc.isUndefined(document.hidden))if(cc.isUndefined(document.mozHidden))if(cc.isUndefined(document.msHidden)){if(!cc.isUndefined(document.webkitHidden)){b="webkitHidden";c="webkitvisibilitychange"}}else{b="msHidden";c="msvisibilitychange"}else{b="mozHidden";c="mozvisibilitychange"}else{b="hidden";c="visibilitychange"}var d=function(){cc.eventManager&&cc.game._eventHide&&cc.eventManager.dispatchEvent(cc.game._eventHide)},e=function(){cc.eventManager&&cc.game._eventShow&&
cc.eventManager.dispatchEvent(cc.game._eventShow);if(cc.game._intervalId){window.cancelAnimationFrame(cc.game._intervalId);cc.game._runMainLoop()}};if(b)cc._addEventListener(document,c,function(){document[b]?d():e()},false);else{cc._addEventListener(a,"blur",d,false);cc._addEventListener(a,"focus",e,false)}if(navigator.userAgent.indexOf("MicroMessenger")>-1)a.onfocus=function(){e()};if("onpageshow"in window&&"onpagehide"in window){cc._addEventListener(a,"pagehide",d,false);cc._addEventListener(a,
"pageshow",e,false)}c=a=null})();cc.log=cc.warn=cc.error=cc.assert=function(){};cc.create3DContext=function(a,b){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,e=0;e<c.length;++e){try{d=a.getContext(c[e],b)}catch(f){}if(d)break}return d};
cc._initSys=function(a,b){cc._RENDER_TYPE_CANVAS=0;cc._RENDER_TYPE_WEBGL=1;cc.sys={};var c=cc.sys;c.LANGUAGE_ENGLISH="en";c.LANGUAGE_CHINESE="zh";c.LANGUAGE_FRENCH="fr";c.LANGUAGE_ITALIAN="it";c.LANGUAGE_GERMAN="de";c.LANGUAGE_SPANISH="es";c.LANGUAGE_DUTCH="du";c.LANGUAGE_RUSSIAN="ru";c.LANGUAGE_KOREAN="ko";c.LANGUAGE_JAPANESE="ja";c.LANGUAGE_HUNGARIAN="hu";c.LANGUAGE_PORTUGUESE="pt";c.LANGUAGE_ARABIC="ar";c.LANGUAGE_NORWEGIAN="no";c.LANGUAGE_POLISH="pl";c.OS_WINDOWS="Windows";c.OS_IOS="iOS";c.OS_OSX=
"OS X";c.OS_UNIX="UNIX";c.OS_LINUX="Linux";c.OS_ANDROID="Android";c.OS_UNKNOWN="Unknown";c.WINDOWS=0;c.LINUX=1;c.MACOS=2;c.ANDROID=3;c.IPHONE=4;c.IPAD=5;c.BLACKBERRY=6;c.NACL=7;c.EMSCRIPTEN=8;c.TIZEN=9;c.WINRT=10;c.WP8=11;c.MOBILE_BROWSER=100;c.DESKTOP_BROWSER=101;c.BROWSER_TYPE_WECHAT="wechat";c.BROWSER_TYPE_ANDROID="androidbrowser";c.BROWSER_TYPE_IE="ie";c.BROWSER_TYPE_QQ="qqbrowser";c.BROWSER_TYPE_MOBILE_QQ="mqqbrowser";c.BROWSER_TYPE_UC="ucbrowser";c.BROWSER_TYPE_360="360browser";c.BROWSER_TYPE_BAIDU_APP=
"baiduboxapp";c.BROWSER_TYPE_BAIDU="baidubrowser";c.BROWSER_TYPE_MAXTHON="maxthon";c.BROWSER_TYPE_OPERA="opera";c.BROWSER_TYPE_OUPENG="oupeng";c.BROWSER_TYPE_MIUI="miuibrowser";c.BROWSER_TYPE_FIREFOX="firefox";c.BROWSER_TYPE_SAFARI="safari";c.BROWSER_TYPE_CHROME="chrome";c.BROWSER_TYPE_UNKNOWN="unknown";c.isNative=false;var d=[c.BROWSER_TYPE_BAIDU,c.BROWSER_TYPE_OPERA,c.BROWSER_TYPE_FIREFOX,c.BROWSER_TYPE_CHROME,c.BROWSER_TYPE_SAFARI],e=[c.OS_IOS,c.OS_WINDOWS,c.OS_OSX,c.OS_LINUX],f=[c.BROWSER_TYPE_BAIDU,
c.BROWSER_TYPE_OPERA,c.BROWSER_TYPE_FIREFOX,c.BROWSER_TYPE_CHROME,c.BROWSER_TYPE_BAIDU_APP,c.BROWSER_TYPE_SAFARI,c.BROWSER_TYPE_UC,c.BROWSER_TYPE_QQ,c.BROWSER_TYPE_MOBILE_QQ,c.BROWSER_TYPE_IE],g=window,h=g.navigator,j=document.documentElement,k=h.userAgent.toLowerCase();c.isMobile=k.indexOf("mobile")!=-1||k.indexOf("android")!=-1;c.platform=c.isMobile?c.MOBILE_BROWSER:c.DESKTOP_BROWSER;var m=h.language;m=(m=m?m:h.browserLanguage)?m.split("-")[0]:c.LANGUAGE_ENGLISH;c.language=m;m=c.BROWSER_TYPE_UNKNOWN;
var n=k.match(/micromessenger|qqbrowser|mqqbrowser|ucbrowser|360browser|baiduboxapp|baidubrowser|maxthon|trident|oupeng|opera|miuibrowser|firefox/i)||k.match(/chrome|safari/i);if(n&&n.length>0){m=n[0].toLowerCase();if(m=="micromessenger")m=c.BROWSER_TYPE_WECHAT;else if(m==="safari"&&k.match(/android.*applewebkit/))m=c.BROWSER_TYPE_ANDROID;else if(m=="trident")m=c.BROWSER_TYPE_IE}c.browserType=m;m=k.match(/(iPad|iPhone|iPod)/i)?true:false;k=k.match(/android/i)||h.platform.match(/android/i)?true:false;
n=c.OS_UNKNOWN;if(h.appVersion.indexOf("Win")!=-1)n=c.OS_WINDOWS;else if(m)n=c.OS_IOS;else if(h.appVersion.indexOf("Mac")!=-1)n=c.OS_OSX;else if(h.appVersion.indexOf("X11")!=-1)n=c.OS_UNIX;else if(k)n=c.OS_ANDROID;else if(h.appVersion.indexOf("Linux")!=-1)n=c.OS_LINUX;c.os=n;c._supportMultipleAudio=f.indexOf(c.browserType)>-1;a=parseInt(a[b.renderMode]);b=cc._RENDER_TYPE_WEBGL;f=cc.newElement("Canvas");cc._supportRender=true;d=!window.WebGLRenderingContext||d.indexOf(c.browserType)==-1||e.indexOf(c.os)==
-1;if(a===1||a===0&&d||location.origin=="file://")b=cc._RENDER_TYPE_CANVAS;c._canUseCanvasNewBlendModes=function(){var s=document.createElement("canvas");s.width=1;s.height=1;s=s.getContext("2d");s.fillStyle="#000";s.fillRect(0,0,1,1);s.globalCompositeOperation="multiply";var t=document.createElement("canvas");t.width=1;t.height=1;var v=t.getContext("2d");v.fillStyle="#fff";v.fillRect(0,0,1,1);s.drawImage(t,0,0,1,1);return s.getImageData(0,0,1,1).data[0]===0};c._supportCanvasNewBlendModes=c._canUseCanvasNewBlendModes();
if(b==cc._RENDER_TYPE_WEBGL)if(!g.WebGLRenderingContext||!cc.create3DContext(f,{stencil:true,preserveDrawingBuffer:true}))if(a==0)b=cc._RENDER_TYPE_CANVAS;else cc._supportRender=false;if(b==cc._RENDER_TYPE_CANVAS)try{f.getContext("2d")}catch(o){cc._supportRender=false}cc._renderType=b;try{c._supportWebAudio=!!new (g.AudioContext||g.webkitAudioContext||g.mozAudioContext)}catch(r){c._supportWebAudio=false}try{var q=c.localStorage=g.localStorage;q.setItem("storage","");q.removeItem("storage");q=null}catch(u){if(u.name===
"SECURITY_ERR"||u.name==="QuotaExceededError")cc.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option");c.localStorage=function(){}}q=c.capabilities={canvas:true};if(cc._renderType==cc._RENDER_TYPE_WEBGL)q.opengl=true;if(j.ontouchstart!==undefined||h.msPointerEnabled)q.touches=true;if(j.onmouseup!==undefined)q.mouse=true;if(j.onkeyup!==undefined)q.keyboard=true;if(g.DeviceMotionEvent||g.DeviceOrientationEvent)q.accelerometer=true;c.garbageCollect=function(){};
c.dumpRoot=function(){};c.restartVM=function(){};c.dump=function(){var s="";s+="isMobile : "+this.isMobile+"\r\n";s+="language : "+this.language+"\r\n";s+="browserType : "+this.browserType+"\r\n";s+="capabilities : "+JSON.stringify(this.capabilities)+"\r\n";s+="os : "+this.os+"\r\n";s+="platform : "+this.platform+"\r\n";cc.log(s)}};cc.ORIENTATION_PORTRAIT=0;cc.ORIENTATION_PORTRAIT_UPSIDE_DOWN=1;cc.ORIENTATION_LANDSCAPE_LEFT=2;cc.ORIENTATION_LANDSCAPE_RIGHT=3;cc._drawingUtil=null;
cc._renderContext=null;cc._canvas=null;cc._gameDiv=null;cc._rendererInitialized=false;cc._setupCalled=false;
cc._setup=function(a,b,c){if(!cc._setupCalled){cc._setupCalled=true;var d=window,e=new Date,f=1E3/cc.game.config[cc.game.CONFIG_KEY.frameRate],g=function(j){var k=(new Date).getTime(),m=Math.max(0,f-(k-e)),n=window.setTimeout(function(){j()},m);e=k+m;return n},h=function(j){clearTimeout(j)};if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT){d.requestAnimFrame=g;d.cancelAnimationFrame=h}else if(cc.game.config[cc.game.CONFIG_KEY.frameRate]!=60){d.requestAnimFrame=g;d.cancelAnimationFrame=
h}else{d.requestAnimFrame=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||g;d.cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||
window.oCancelAnimationFrame||h}h=cc.$(a)||cc.$("#"+a);if(h.tagName=="CANVAS"){b=b||h.width;c=c||h.height;g=cc.container=cc.newElement("DIV");a=cc._canvas=h;a.parentNode.insertBefore(g,a);a.appendTo(g);g.setAttribute("id","Cocos2dGameContainer")}else{h.tagName!="DIV"&&cc.log("Warning: target element is not a DIV or CANVAS");b=b||h.clientWidth;c=c||h.clientHeight;g=cc.container=h;a=cc._canvas=cc.$(cc.newElement("CANVAS"));h.appendChild(a)}a.addClass("gameCanvas");a.setAttribute("width",b||480);a.setAttribute("height",
c||320);a.setAttribute("tabindex",99);a.style.outline="none";h=g.style;h.width=(b||480)+"px";h.height=(c||320)+"px";h.margin="0 auto";h.position="relative";h.overflow="hidden";g.top="100%";if(cc._renderType==cc._RENDER_TYPE_WEBGL)cc._renderContext=cc.webglContext=cc.create3DContext(a,{stencil:true,preserveDrawingBuffer:true,antialias:!cc.sys.isMobile,alpha:false});if(cc._renderContext){d.gl=cc._renderContext;cc._drawingUtil=new cc.DrawingPrimitiveWebGL(cc._renderContext);cc._rendererInitialized=true;
cc.textureCache._initializingRenderer();cc.shaderCache._init()}else{cc._renderContext=a.getContext("2d");cc._mainRenderContextBackup=cc._renderContext;cc._renderContext.translate(0,a.height);cc._drawingUtil=cc.DrawingPrimitiveCanvas?new cc.DrawingPrimitiveCanvas(cc._renderContext):null}cc._gameDiv=g;cc.log(cc.ENGINE_VERSION);cc._setContextMenuEnable(false);if(cc.sys.isMobile){b=cc.newElement("style");b.type="text/css";document.body.appendChild(b);b.textContent="body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}"}cc.view=
cc.EGLView._getInstance();cc.inputManager.registerSystemEvent(cc._canvas);cc.director=cc.Director._getInstance();cc.director.setOpenGLView&&cc.director.setOpenGLView(cc.view);cc.winSize=cc.director.getWinSize();cc.saxParser=new cc.SAXParser;cc.plistParser=new cc.PlistParser}};cc._checkWebGLRenderMode=function(){if(cc._renderType!==cc._RENDER_TYPE_WEBGL)throw"This feature supports WebGL render mode only.";};cc._isContextMenuEnable=false;
cc._setContextMenuEnable=function(a){cc._isContextMenuEnable=a;cc._canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return false}};
cc.game={DEBUG_MODE_NONE:0,DEBUG_MODE_INFO:1,DEBUG_MODE_WARN:2,DEBUG_MODE_ERROR:3,DEBUG_MODE_INFO_FOR_WEB_PAGE:4,DEBUG_MODE_WARN_FOR_WEB_PAGE:5,DEBUG_MODE_ERROR_FOR_WEB_PAGE:6,EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",_eventHide:null,_eventShow:null,_onBeforeStartArr:[],CONFIG_KEY:{engineDir:"engineDir",dependencies:"dependencies",debugMode:"debugMode",showFPS:"showFPS",frameRate:"frameRate",id:"id",renderMode:"renderMode",jsList:"jsList",classReleaseMode:"classReleaseMode"},_prepareCalled:false,
_prepared:false,_paused:true,_intervalId:null,config:null,onStart:null,onStop:null,setFrameRate:function(a){this.config[this.CONFIG_KEY.frameRate]=a;this._intervalId&&window.cancelAnimationFrame(this._intervalId);this._paused=true;this._runMainLoop()},_runMainLoop:function(){var a=this,b,c=cc.director;c.setDisplayStats(a.config[a.CONFIG_KEY.showFPS]);b=function(){if(!a._paused){c.mainLoop();a._intervalId&&window.cancelAnimationFrame(a._intervalId);a._intervalId=window.requestAnimFrame(b)}};window.requestAnimFrame(b);
a._paused=false},run:function(a){var b=this,c=function(){if(a)b.config[b.CONFIG_KEY.id]=a;b._prepareCalled||b.prepare(function(){b._prepared=true});if(cc._supportRender)b._checkPrepare=setInterval(function(){if(b._prepared){cc._setup(b.config[b.CONFIG_KEY.id]);b._runMainLoop();b._eventHide=b._eventHide||new cc.EventCustom(b.EVENT_HIDE);b._eventHide.setUserData(b);b._eventShow=b._eventShow||new cc.EventCustom(b.EVENT_SHOW);b._eventShow.setUserData(b);b.onStart();clearInterval(b._checkPrepare)}},10)};
document.body?c():cc._addEventListener(window,"load",function(){this.removeEventListener("load",arguments.callee,false);c()},false)},_initConfig:function(){var a=this.CONFIG_KEY,b=function(m){m[a.engineDir]=m[a.engineDir]||"frameworks/cocos2d-html5";if(m[a.debugMode]==null)m[a.debugMode]=0;m[a.frameRate]=m[a.frameRate]||60;if(m[a.renderMode]==null)m[a.renderMode]=1;return m};if(document.ccConfig)this.config=b(document.ccConfig);else try{for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var e=
c[d].getAttribute("cocos");if(e==""||e)break}var f,g,h;if(d<c.length){if(f=c[d].src){h=/(.*)\//.exec(f)[0];cc.loader.resPath=h;f=cc.path.join(h,"project.json")}g=cc.loader._loadTxtSync(f)}g||(g=cc.loader._loadTxtSync("project.json"));var j=JSON.parse(g);this.config=b(j||{})}catch(k){cc.log("Failed to read or parse project.json");this.config=b({})}cc._initSys(this.config,a)},_jsAddedCache:{},_getJsListOfModule:function(a,b,c){var d=this._jsAddedCache;if(d[b])return null;c=c||"";var e=[],f=a[b];if(!f)throw"can not find module ["+
b+"]";b=cc.path;for(var g=0,h=f.length;g<h;g++){var j=f[g];if(!d[j]){var k=b.extname(j);if(k)k.toLowerCase()==".js"&&e.push(b.join(c,j));else if(k=this._getJsListOfModule(a,j,c))e=e.concat(k);d[j]=1}}return e},prepare:function(a){var b=this,c=b.config,d=b.CONFIG_KEY,e=c[d.engineDir],f=cc.loader;if(!cc._supportRender)throw"The renderer doesn't support the renderMode "+c[d.renderMode];b._prepareCalled=true;var g=c[d.jsList]||[];if(cc.Class)f.loadJsWithImg("",g,function(h){if(h)throw h;b._prepared=true;
a&&a()});else{d=cc.path.join(e,"moduleConfig.json");f.loadJson(d,function(h,j){if(h)throw h;h=c.modules||[];j=j.module;var k=[];if(cc._renderType==cc._RENDER_TYPE_WEBGL)h.splice(0,0,"shaders");else h.indexOf("core")<0&&h.splice(0,0,"core");for(var m=0,n=h.length;m<n;m++){var o=b._getJsListOfModule(j,h[m],e);if(o)k=k.concat(o)}k=k.concat(g);cc.loader.loadJsWithImg(k,function(r){if(r)throw r;b._prepared=true;a&&a()})})}}};cc.game._initConfig();
Function.prototype.bind=Function.prototype.bind||function(a){if(!cc.isFunction(this))throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e};cc=cc||{};cc._loadingImage="data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAANACwAAAAAEAAQAAAEO5DJSau9OOvNex0IMnDIsiCkiW6g6BmKYlBFkhSUEgQKlQCARG6nEBwOgl+QApMdCIRD7YZ5RjlGpCUCACH5BAUAAA0ALAAAAgAOAA4AAAQ6kLGB0JA4M7QW0hrngRllkYyhKAYqKUGguAws0ypLS8JxCLQDgXAIDg+FRKIA6v0SAECCBpXSkstMBAAh+QQFAAANACwAAAAACgAQAAAEOJDJORAac6K1kDSKYmydpASBUl0mqmRfaGTCcQgwcxDEke+9XO2WkxQSiUIuAQAkls0n7JgsWq8RACH5BAUAAA0ALAAAAAAOAA4AAAQ6kMlplDIzTxWC0oxwHALnDQgySAdBHNWFLAvCukc215JIZihVIZEogDIJACBxnCSXTcmwGK1ar1hrBAAh+QQFAAANACwAAAAAEAAKAAAEN5DJKc4RM+tDyNFTkSQF5xmKYmQJACTVpQSBwrpJNteZSGYoFWjIGCAQA2IGsVgglBOmEyoxIiMAIfkEBQAADQAsAgAAAA4ADgAABDmQSVZSKjPPBEDSGucJxyGA1XUQxAFma/tOpDlnhqIYN6MEAUXvF+zldrMBAjHoIRYLhBMqvSmZkggAIfkEBQAADQAsBgAAAAoAEAAABDeQyUmrnSWlYhMASfeFVbZdjHAcgnUQxOHCcqWylKEohqUEAYVkgEAMfkEJYrFA6HhKJsJCNFoiACH5BAUAAA0ALAIAAgAOAA4AAAQ3kMlJq704611SKloCAEk4lln3DQgyUMJxCBKyLAh1EMRR3wiDQmHY9SQslyIQUMRmlmVTIyRaIgA7";
cc._fpsImage="data:image/png;base64,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";
cc._loaderImage="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAlAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM4MDBEMDY2QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM4MDBEMDY1QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RTk0OEM4OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2RTk0OEM5OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQADQkJCQoJDQoKDRMMCwwTFhENDREWGhUVFhUVGhkUFhUVFhQZGR0fIB8dGScnKionJzk4ODg5QEBAQEBAQEBAQAEODAwOEA4RDw8RFA4RDhQVERISERUfFRUXFRUfKB0ZGRkZHSgjJiAgICYjLCwoKCwsNzc1NzdAQEBAQEBAQEBA/8AAEQgAyACgAwEiAAIRAQMRAf/EALAAAAEFAQEAAAAAAAAAAAAAAAQAAgMFBgcBAQEAAwEBAAAAAAAAAAAAAAAAAQMEAgUQAAIBAgIEBwoLBgQGAwAAAAECAwAEEQUhMRIGQVFxsTITFGGBwdEiQlKSMzWRoeFicqKyI1NzFYJjJDQWB9KjVCbxwkNkJWXik3QRAAIBAgMFBQcDBQEAAAAAAAABAhEDIRIEMUFRcTJhwVIUBZGhsSJyEzOB0ULhYpIjUxX/2gAMAwEAAhEDEQA/AMJSpUqAVKlXuFAeUq9wpUB5XuFe4V6ooDzZHDox0CnGMinzwl7Z8NajaHeoO3vmTBZBtp9YUIqTEV5ROxHKnWRnaU8VRMhFBUjpV7hSoSeUq9pUB5Sr2lhQHlKvcK8oBV7hSFSRrtaKAZs07YNPM1pG2xJIAw1jSeandry/8X4m8VCKkWwaWwam7Xl/4v1W8VLtmX/i/VbxUoKkWwakSM407tmX/i/VbxUmzGwjQsjdY41IARie/U0IbZO0kNtCXnOCkEBeFu4KI3Bs7DNb27ya+jDx3kJeEnpJJEcQVbWDsk17u5urd591ucZkWhym2Vnd9RkCDEpFxDRpbw0bunu5mlp2De2FMLYXOD2wB2xbOeraUcYGJ72mlSUiqzzdzMd3Z3mixltA2yzcK/NlHM1DQyRXce1HocdNOEfJXZ88y9ZojOqhiBszIRiHQ8Y4cK5TvHuzLljHNMqxNoDjLFraHHnjPxcNCGVbxEUzYNTx5jZSxhpW6qTzlwJ+DCvO2Zf+L9VvFSgqyHYNLYNTdssPxfibxUu15f8Ai/VPiqCakOwa82DU/a8v/F+JvFTDdWPBL8R8VKCvYRYV5UzoMAy6QdIIqI0B4KJtxiRQwou16QoGUkntH5Tz0RbZbmF2hktraSVBo2lUkY8tDye0flPPXTslVUyiyVRsjqUOA4yMT8dW2ram2m6UVTNq9S7EIyUVJydMTn/6DnP+im9Wl+g5z/opvVrpteEhQWY4AaSTwAVf5WPiZh/9S5/zj7zltzlmYWkfWXNvJDGTgGcYDHirR7i7mSbwXParsFMrgb7w6jKw/wCmnc9I14kF3vpvCljbMyWMOJL4aEiB8qU/ObUK7HYWVrl1pFZWiCOCBQqKOLjPGTrNZZqKbUXVHq2nNwTuJRk1VpbgXN8s7Rk5ym0UQQzhIG2NAjhxHWbI+gCBVjBBFbwxwQqEiiUJGg1BVGAFe7dV28WYLYZFmF2Th1UD7JGjymGyn1iK5OyzIBGB1HgrLZhamzumQAGJwSqnSCh1q3GOCodxt4cxurdcpzuN4cyhiWaF5Bg09udUmnWw1H/jV9nFuJ7Quo+8h8peThFA+047vduyMtk7fYqTl07YFdfUufMPzT5p71UdtlmYXaGS2t3mQHAsgxANdadYJopLe4QS2867EsZ4QfCNYrCFbjdDPmgkYyWFxgVf04ifJf6ScNdRUW1XBb6FU5TjF5EpSSrGu/s5lN+g5z/opvVpfoOc/wCim9WtdHnatvObJXDW7xLGhB8nrPaY9/HCr+tEdPCVaSeDoYLnqF63lzW4/PFSW3ecxbI84VSzWUwUaSdg0DXXK5nvAipnd6qgKvWnQO7pri9ZUEmm3Vl2j1kr8pRlFRyquBNZjGxQ/S56Y1S2fu9OVueon11Szahoou06QoQUXadIVCD2FJJ7R+U89dMydv8Axdn+TH9muZye0flPPXQstlK5Tbka1gUjlC1q0vVLkeb6r+O3Tx9xcY1nt8c0NrZCyiOE1108NYjGv1joo7Js1jzKyScYLIvkzL6LDwHXVJksH9Sb49dKNq0tj1jA6uriOCL+02FWX7iVtZX1/AzaHTyeoauKn2MX9W79zebiZCuR5MjSrhfXuEtwTrUeZH+yNfdrRNcxI6IzhXlJEak6WIGJ2Rw4ChWnChndtlVBLMdQA0k1gbXNMzzDfDLs6mjaPKppJbWwJ1bOwwxw43OnHh71YT3DpfWUJmFlb5jHHDdeXBHIsrRea5TSqvxqG04cNN62vetoCS4tre5mgnkGE9q+3DKOkuI2WX6LDQRRHWDh1UCtwj7QRg2wdl8Djgw1qe7XvW0BQ3kfZ7mSLgU+T9E6RVbnuVrnWVSWqj+Lt8ZbRuHEdKPkYVcZ2MJY5fSGyeVar45+rkWQHAqccalPE5km1htWK5nK4Wnt5FuUBUwOMG4nGkA/BXUrW4S6torlOjMgcd/xVn7rLo7zKs0uEjCNeSvdwoBhgsZxX1l2j36k3Lu+uyprdj5Vs5A+i/lD48a0aaVJOPi7jB6lbzWozpjB48pf1NDXNN4vfl7+Z4BXS65pvF78vfzPAK71XTHmZ/S/yT+jvJ7L3fHytz1E+upbL+Qj5W56jfXWRnsIYKLtekKEFGWvSFQgyjk9o/Keet3YthlMP/5x9msJJ7R+U89biyb/AMXEv7gD6tadL1T+kwepRrC39ZkLDMbiwMvUHRPG0bjlGg8ore/23sxBldxfMPLupNhT8yL/AORNZbdzJ484scytxgLqJY5LZj6Q2sV5G1Vud1mjjyG0ij0NEGSZToKyhjtqw4waztuiXA3qKTbSxltfGhbZlE95ZtZqxVbgiOZhrER9ph3Svk9+pJILZ4Y4DGBFCUMKjRsGPobPFhUfW0NJmljE2xJcIrcI2vFUEln1lRXd6lrazXT9GCNpD+yNqoI7mOVduNw6nzlOIoPOUa6yye1XXcbMR5GdQ3xY0BSbj31/FcTQZirJ+q431q7anbHCTZ72Bw7lbPrKBMcBWNNgbMBBh+bsjBdni0VJ1lARZs6yWiupxCuMDy6KpS2IwOo6DTr3Mre3e5tZZVUM4ZBjqOOJoWO4jkXajcOOMHGgDISvWIrdAkKR80+TzVl908bPPL3LzxOuHdifxVfiTAg92qI/w+/8gGgSyN/mR7XPVlp0lF/3L3mbVKtu5Hjbk/8AHE2Fc03i9+Xv5ngFdKNc13i9+Xv5ngFaNV0x5nn+l/kn9HeEWXu+PlbnqJ9dS2Xu9OVueon11kZ7CGCjLXpCgxRlr0hUIPYUcntH5Tz1s8vb+Bt1/dqPirGSe0flPPWusG/g4Py15q06XqlyMWvVYQ+ruI9xJOqzO9hOto/sP8tbGOFIrmWeM7IuMDMnAXXQJOUjQeOsJk0nY96ip0CYunrjaHx1t+srPJUbXBm2LrFPikwTOb+T+VhbZxGMrDXp83x1QSy2tucJpUjPETp+Cn5/ftaRvKvtp3Kx48HG3erHMzOxZiWZtLMdJNQSbbL71Vk6yynViOkqnEEfOWtPbXi3EQkGg6mXiNckjeSJxJGxR10qw0GtxuxmvbImD4CZMFlA4fRfv0BqesqqzTMZNMEDbIHtHH2QeCiZJSqMQdOGiue53mz3czQwsRbIcNHnkec3c4qAMuriz68gTIToxwOOnlp0MjxMJYW741Gs3RVldtbygE/dMcHX/moDaxTiWNZB53B3arb8/wC+4SOF4sf/AKxU9kcBsfOGHfoUHtG/RbzY5Die5HHhXdvavqiZ9Q8Jdlq4/gbKua7xe/L38zwCuhpf2Uk/Zo50kmwJKIdogDjw1VzzeL35e/meAVp1LTgqY4nn+mRauzqmqwrjzCLL3fHytz1E+upLL+Qj5W56jfXWRnroYKLtekKEFF2vSFQg9hSSe0flPPWosm/hIfoLzVl5PaPynnrRWb/w0X0F5q06XqlyM2sVYx5gmbFre/t71NY2T+0h8VbSO5SWNJUOKSAMp7jDGspmMPaLRlXS6eWve1/FRO7WYdbZm1Y/eW/R7qHxHRXGojlm3ulid6aVbaW+OALvgCLq2Hm9WxHKWqjhj6xsK1e8dm15l4niG1LZkswGsxtrPeOmsvayBJA1VItlWjptLuTdPMo7LtjRDq9naK4+WF9IrUW7BaHOljGqVHB7w2hzVoZt87d8vaNYSLl02CcRsDEbJbj71Uu7UBkvJ7/D7q2QoDxySaAO8MTXdxRVMpRp5XZOWdF/ms7R5XdyKfKWJsO/5PhrG5XlNxmEywW6bTnTxAAcJNbGSMXkM1pjgbiNo1PziPJ+Os7u7m/6ReM00ZOgxSpqYYHT3wRXMKN4ll9zUG4bQfNshu8sZVuEA2hirA4qe/VOwwrVbzbww5mI44UKRRYkbWG0S3JWctbd7u5WFfOOLHiUdJqmaipfLsIsObhWe001lMkMVvJNjhghIALMcBxCs7fxXQmkupx1bXDswGPlaTidVaEyKNXkoo4eBV+Sq7L7Vs9zcBgeyQ4GQ/MB1crmoim2orezqcowTuSeEY48jQ7oZX2PLzdyLhNd6RjrEY6I7+uspvH78vfzPAK6UAAAFGAGgAcArmu8Xvy9/M8ArTfio24RW5nnaG67uou3H/KPuqT2X8hHytz1G+upLL3enK3PUb66ys9RDBRdr0hQgou06QqEGUkntH5Tz1e238vF9BeaqKT2j8p56vbb+Xi+gvNWjTdUuRn1XTHmTh8KrJTJlt8t1CPIY44cGnpJVjTJYkmjaN9Ib4u7V923njTethRauZJV3PaW1rfLIiXEDYg6R4VYc9CXW7thfOZbKdbGZtLW8uPVY/u3GrkNUkM9zlcxUjbhfWOA90cRq4gv4LhdqN+VToNYWmnRm9NNVWNTyHc6VWBv8wt4YeHqm6xyPmroq1Z7WGFLSxTq7WLSuPSdjrkfumq5yHXDUeA92oO2SKpVumNAaoJLMXH3myp0rpJ4uKhc3tbDM5BMri1zAj79j7KTiY8TcdBpcsith0286o+sPCagEX9Pzg4zXUCp6QYse8oouCG3tk6m1BYv05W6T+IdyolxbHDAAa2OgDlNCz3ryN2WxBd5PJMg1t81eId2ukqnLlTBbfcuY+9uJLiRcvtPvHdsHK+cfRHcHDWsyawjyy0WBcDI3lTP6TeIcFV+S5OmXx9bJg1048o8Cj0V8Jq2DVu09nL80up7OxHi+oal3P8AXB/IsZS8T/YOV65zvCcc7vfzPAK3ivWCz445zeH954BXOr6I8yfSfyz+jvCLP3fHytz1G+upLP3fHytz1E+usbPaQ0UXadIUIKLtekKhB7Ckk9o/Keer22/l4/oLzVRSe0flPPV7b/y8X0F5q0abqlyM+q6Y8yQsBTDMor1o8aiaE1pbluMqS3sbLLHIhSRQyngqukhaJ9uBjo+H5aOa3ao2t34qouRlLajTalGP8v0IY8ylXQ+PKPFU/bYXOLPge6CKia0LaxTOxHu1Q7cuBd9yPEJ7TbjXKO8CajbMIF6CNIeNvJHjqIWJ7tSpYkalqVblwIdyG+RGXur0hXYJFxal+Dhq5y3slkv3Y2pD0pTr+QUClpJRUdo9XW4OLrTHtM16cZLLWkeC7y4jvlNEpcRtw1Ux27Ci448NZrTFy3nn3IQWxlgGrDZ3pza7/M8ArZo+ArF5171uvp+CqdV0R5l/psUrs2vB3hdl7vTlbnqJ9dS2Xu+PlbnqJ9dY2eshooq16QoQUXa9IVCD2FLJ7RuU89WNtmUSQqkgYMgw0accKrpPaPynnrZWG4Vi+VWmY5tnMWXG+XrIYnA0rhj0mdcTgdNdwnKDqjmduM1SRR/qlr8/4KX6pa8T/BVzDuLZXudRZblmbxXcPUNPc3KqCIwrbOzgrHEnHjoyD+3eSXkht7DeKG4umDGOJVUklfouThXfmbnZ7Cvy1vt9pmv1W1+d8FL9VteJvgq5yrcOGfLmzHN80iyyETPbptAEFo2ZG8pmUa1OFNn3Ky6W/sbDKM5hv5bx2WTZA+7RF2y52WOPJTzE+z2Dy1vt9pT/AKpacTerS/U7Tib1a04/t7kDXPY03jhN0W6sQ7K7W3q2dnrMccaDy/8At80kuZfqWYxWNtlcvUPPhiGYhWDeUy7IwYU8xPs9g8tb7faUn6pacTerTxm9oOBvVq3v9z927aynuId44LiWKNnjhAXF2UYhRg516qpsryjLr21665zFLSTaK9U2GOA87SwqY37knRU+BzOzags0s1Oyr+BKM6sxwP6tSDPLMen6vy0rvdm3Sxlu7K/S7WDDrFUDUTxgnTU826eXW7KlxmqQuwDBXUKcD+1Xee/wXuKX5XDGWLapSVcOyhEM/seJ/V+WnjeGx4pPV+Wkm6kKZlFay3Jlt7iFpYZY8ASVK6DjtDDA0f8A0Tl340/1f8Ndx8xJVWXB0KbktFFpNzdVXAC/qOwA0CQni2flrO3Vwbm5lnI2TKxbDirX/wBE5d+NcfV/wVR7xZPa5U9utvI8nWhmbbw0YEAYYAVxfhfy5rlKR4Fulu6X7mW1mzT8S4Yis/5CPlbnqJ9dSWfu9OVueon11mZvQ2i7XpChKKtekKhBlNJ7R+U89bDfGTb3a3ZX0Lcj6kdY+T2j8p560288m1kWQr6MJ+ylSAr+2cnV5renjs3H1loX+3j9XvbbtxLN9lqW4UnV5jdnjtXHxihtyZNjeSBu5J9k1BJe7xy7W5CJ/wCzuD/mTVTf2+fq97LJuLrPsNRueS7W6aJ/38x+vLVXuY+xvHaNxbf2GoCezf8A36j/APsSf8w1sLnqczTefJluYoLm5uo5F61sBshItP1cNFYe1f8A3ir/APfE/wCZUe9bB94r5jwuPsrQFhmG4l/Z2M17HdW90tuu3IkTHaCjWdIw0VVZdks9/C06yJFEp2dp+E1bbqybGTZ8vpQD7L1XRv8A7blT96Oda7tpNuuNE37Cq9KSisjyuUoxrStKllHbLlWTXsMs8chuSuwEPDqwoLe5y+YRE/gLzmqRekvKKtd4327yM/ulHxmrHJStySWVRyrjxKI2XC/CTlnlPPKTpTdFbP0L1bgrf5Lp0G3dPhQHwV0S1lzBsns3sESR8Crh9WAJGjSOKuU3E+zdZQ3oJh8IArdZXFDmOTpHa3i2+YrI2KtKy4ricBsBuHHgFXSo440+Wa2qqxjvM9uMoy+WvzWpLCWWWE28HxL6e43ojgkeSCBY1Ri5BGIUDT51cl3vm276BBqSEH4WbxV0tlkyXJcxTMb+OW6uY9mGHrCzDQwwAbTp2uKuTZ9N1uYsfRRR8WPhrm419mSSjRyiqxVK7y23B/ftuTm2oSdJyzNVw3BFn7vTlbnqF9dS2fu9OVueon11lZuQ2iLdsGFD05H2dNQGV0ntG5Tz1dWm9N1b2kVq8EVwsI2UaQaQOKhmitZGLOmk68DhSFvY+gfWNSAg7z3Qvo7yKCKIohiaNR5LKxx8qpxvjcqS0VpbxvwOAcRQPZ7D0G9Y0uz2HoH1jUCpLY7zXlpbm3eKO5QuzjrBqZji3x17PvNcyT288VvDBJbMWUovS2hslW7mFQ9nsPQPrGl2ew9A+saCod/WNxtbYsrfb17WBxx5ddD2281xC88klvDcSXEnWuzrqOGGC9zRUPZ7D0G9Y0uzWHoH1jQVCLreq6ntZbaO3it1mGy7RjTs1X2mYy20ZiCq8ZOODcdEdmsPQb1jS7PYegfWNdJuLqnQiSUlRqpFLmryxtH1Ma7Qw2gNNPOdSt0oI27p007s9h6B9Y0uz2HoH1jXX3Z+I4+1b8IJdX89xLHKQFMXQUahpxoiPN5P+onfU+A0/s9h6DesaXZ7D0D6xpG7OLbUtu0StW5JJx2bBsmbtiSiEk+cxoCWWSaVpZOk2vDVo0VYdnsPQb1jSNvZcCH1jSd2c+p1XAmFqEOmOPEfaH+BQd1ueo211IzrgFUYKNAAqI1WztCpUqVCRUqVKgFSpUqAVKlSoBUqVKgFSpUqAVKlSoBUqVKgFSpUqAVKlSoD/9k=";
cc.loader.loadBinary=function(a,b){var c=this,d=this.getXMLHttpRequest(),e="load "+a+" failed!";d.open("GET",a,true);if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){d.setRequestHeader("Accept-Charset","x-user-defined");d.onreadystatechange=function(){if(d.readyState==4&&d.status==200){var f=cc._convertResponseBodyToText(d.responseBody);b(null,c._str2Uint8Array(f))}else b(e)}}else{d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined");d.onload=function(){d.readyState==
4&&d.status==200?b(null,c._str2Uint8Array(d.responseText)):b(e)}}d.send(null)};cc.loader._str2Uint8Array=function(a){if(!a)return null;for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c)&255;return b};
cc.loader.loadBinarySync=function(a){var b=this.getXMLHttpRequest(),c="load "+a+" failed!";b.open("GET",a,false);a=null;if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){b.setRequestHeader("Accept-Charset","x-user-defined");b.send(null);if(b.status!=200){cc.log(c);return null}if(b=cc._convertResponseBodyToText(b.responseBody))a=this._str2Uint8Array(b)}else{b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");b.send(null);if(b.status!=200){cc.log(c);
return null}a=this._str2Uint8Array(b.responseText)}return a};var Uint8Array=Uint8Array||Array;
if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var IEBinaryToArray_ByteStr_Script='<!-- IEBinaryToArray_ByteStr --\>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = ""\r\n   End If\r\nEnd Function\r\n',myVBScript=
cc.newElement("script");myVBScript.type="text/vbscript";myVBScript.textContent=IEBinaryToArray_ByteStr_Script;document.body.appendChild(myVBScript);cc._convertResponseBodyToText=function(a){for(var b={},c=0;c<256;c++)for(var d=0;d<256;d++)b[String.fromCharCode(c+d*256)]=String.fromCharCode(c)+String.fromCharCode(d);c=IEBinaryToArray_ByteStr(a);a=IEBinaryToArray_ByteStr_Last(a);return c.replace(/[\s\S]/g,function(e){return b[e]})+a}}cc=cc||{};
var ClassManager={id:0|Math.random()*998,instanceId:0|Math.random()*998,compileSuper:function(a,b,c){a=a.toString();var d=a.indexOf("("),e=a.indexOf(")");d=a.substring(d+1,e);d=d.trim();e=a.indexOf("{");var f=a.lastIndexOf("}");for(a=a.substring(e+1,f);a.indexOf("this._super")!=-1;){e=a.indexOf("this._super");f=a.indexOf("(",e);var g=a.indexOf(")",f);g=a.substring(f+1,g);g=(g=g.trim())?",":"";a=a.substring(0,e)+"ClassManager["+c+"]."+b+".call(this"+g+a.substring(f+1)}return Function(d,a)},getNewID:function(){return this.id++},
getNewInstanceId:function(){return this.instanceId++}};ClassManager.compileSuper.ClassManager=ClassManager;
(function(){var a=/\b_super\b/,b=cc.game.config[cc.game.CONFIG_KEY.classReleaseMode];b&&console.log("release Mode");cc.Class=function(){};cc.Class.extend=function(){function c(){this.__instanceId=ClassManager.getNewInstanceId();this.ctor&&this.ctor.apply(this,arguments)}var d=this.prototype,e=Object.create(d),f=ClassManager.getNewID();ClassManager[f]=d;var g={writable:true,enumerable:false,configurable:true};e.__instanceId=null;c.id=f;g.value=f;Object.defineProperty(e,"__pid",g);c.prototype=e;g.value=
c;Object.defineProperty(c.prototype,"constructor",g);this.__getters__&&(c.__getters__=cc.clone(this.__getters__));this.__setters__&&(c.__setters__=cc.clone(this.__setters__));for(var h=0,j=arguments.length;h<j;++h){var k=arguments[h];for(var m in k){var n=typeof k[m]==="function",o=typeof d[m]==="function",r=a.test(k[m]);if(b&&n&&o&&r){g.value=ClassManager.compileSuper(k[m],m,f);Object.defineProperty(e,m,g)}else if(n&&o&&r){g.value=function(t,v){return function(){var w=this._super;this._super=d[t];
var x=v.apply(this,arguments);this._super=w;return x}}(m,k[m]);Object.defineProperty(e,m,g)}else if(n){g.value=k[m];Object.defineProperty(e,m,g)}else e[m]=k[m];if(n){var q,u;if(this.__getters__&&this.__getters__[m]){n=this.__getters__[m];for(var s in this.__setters__)if(this.__setters__[s]==n){u=s;break}cc.defineGetterSetter(e,n,k[m],k[u]?k[u]:e[u],m,u)}if(this.__setters__&&this.__setters__[m]){n=this.__setters__[m];for(s in this.__getters__)if(this.__getters__[s]==n){q=s;break}cc.defineGetterSetter(e,
n,k[q]?k[q]:e[q],k[m],q,m)}}}}c.extend=cc.Class.extend;c.implement=function(t){for(var v in t)e[v]=t[v]};return c}})();
cc.defineGetterSetter=function(a,b,c,d,e,f){if(a.__defineGetter__){c&&a.__defineGetter__(b,c);d&&a.__defineSetter__(b,d)}else if(Object.defineProperty){var g={enumerable:false,configurable:true};c&&(g.get=c);d&&(g.set=d);Object.defineProperty(a,b,g)}else throw new Error("browser does not support getters");if(!e&&!f){g=c!=null;for(var h=d!=undefined,j=Object.getOwnPropertyNames(a),k=0;k<j.length;k++){var m=j[k];if(!((a.__lookupGetter__?a.__lookupGetter__(m):Object.getOwnPropertyDescriptor(a,m))||typeof a[m]!==
"function")){var n=a[m];if(g&&n===c){e=m;if(!h||f)break}if(h&&n===d){f=m;if(!g||e)break}}}}a=a.constructor;if(e){if(!a.__getters__)a.__getters__={};a.__getters__[e]=b}if(f){if(!a.__setters__)a.__setters__={};a.__setters__[f]=b}};cc.clone=function(a){var b=a.constructor?new a.constructor:{};for(var c in a){var d=a[c];b[c]=typeof d=="object"&&d&&!(d instanceof cc.Node)&&!(d instanceof HTMLElement)?cc.clone(d):d}return b};cc.Point=function(a,b){this.x=a||0;this.y=b||0};
cc.p=function(a,b){if(a==undefined)return{x:0,y:0};if(b==undefined)return{x:a.x,y:a.y};return{x:a,y:b}};cc.pointEqualToPoint=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y};cc.Size=function(a,b){this.width=a||0;this.height=b||0};cc.size=function(a,b){if(a===undefined)return{width:0,height:0};if(b===undefined)return{width:a.width,height:a.height};return{width:a,height:b}};cc.sizeEqualToSize=function(a,b){return a&&b&&a.width==b.width&&a.height==b.height};
cc.Rect=function(a,b,c,d){this.x=a||0;this.y=b||0;this.width=c||0;this.height=d||0};cc.rect=function(a,b,c,d){if(a===undefined)return{x:0,y:0,width:0,height:0};if(b===undefined)return{x:a.x,y:a.y,width:a.width,height:a.height};return{x:a,y:b,width:c,height:d}};cc.rectEqualToRect=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height};cc._rectEqualToZero=function(a){return a&&a.x===0&&a.y===0&&a.width===0&&a.height===0};
cc.rectContainsRect=function(a,b){if(!a||!b)return false;return!(a.x>=b.x||a.y>=b.y||a.x+a.width<=b.x+b.width||a.y+a.height<=b.y+b.height)};cc.rectGetMaxX=function(a){return a.x+a.width};cc.rectGetMidX=function(a){return a.x+a.width/2};cc.rectGetMinX=function(a){return a.x};cc.rectGetMaxY=function(a){return a.y+a.height};cc.rectGetMidY=function(a){return a.y+a.height/2};cc.rectGetMinY=function(a){return a.y};
cc.rectContainsPoint=function(a,b){return b.x>=cc.rectGetMinX(a)&&b.x<=cc.rectGetMaxX(a)&&b.y>=cc.rectGetMinY(a)&&b.y<=cc.rectGetMaxY(a)};cc.rectIntersectsRect=function(a,b){var c=a.y+a.height,d=b.x+b.width,e=b.y+b.height;return!(a.x+a.width<b.x||d<a.x||c<b.y||e<a.y)};cc.rectOverlapsRect=function(a,b){return!(a.x+a.width<b.x||b.x+b.width<a.x||a.y+a.height<b.y||b.y+b.height<a.y)};
cc.rectUnion=function(a,b){var c=cc.rect(0,0,0,0);c.x=Math.min(a.x,b.x);c.y=Math.min(a.y,b.y);c.width=Math.max(a.x+a.width,b.x+b.width)-c.x;c.height=Math.max(a.y+a.height,b.y+b.height)-c.y;return c};cc.rectIntersection=function(a,b){var c=cc.rect(Math.max(cc.rectGetMinX(a),cc.rectGetMinX(b)),Math.max(cc.rectGetMinY(a),cc.rectGetMinY(b)),0,0);c.width=Math.min(cc.rectGetMaxX(a),cc.rectGetMaxX(b))-cc.rectGetMinX(c);c.height=Math.min(cc.rectGetMaxY(a),cc.rectGetMaxY(b))-cc.rectGetMinY(c);return c};
cc.SAXParser=cc.Class.extend({_parser:null,_isSupportDOMParser:null,ctor:function(){if(window.DOMParser){this._isSupportDOMParser=true;this._parser=new DOMParser}else this._isSupportDOMParser=false},parse:function(a){return this._parseXML(a)},_parseXML:function(a){var b;if(this._isSupportDOMParser)b=this._parser.parseFromString(a,"text/xml");else{b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}return b}});
cc.PlistParser=cc.SAXParser.extend({parse:function(a){a=this._parseXML(a).documentElement;if(a.tagName!="plist")throw"Not a plist file!";for(var b=null,c=0,d=a.childNodes.length;c<d;c++){b=a.childNodes[c];if(b.nodeType==1)break}return this._parseNode(b)},_parseNode:function(a){var b=null,c=a.tagName;if(c=="dict")b=this._parseDict(a);else if(c=="array")b=this._parseArray(a);else if(c=="string")if(a.childNodes.length==1)b=a.firstChild.nodeValue;else{b="";for(c=0;c<a.childNodes.length;c++)b+=a.childNodes[c].nodeValue}else if(c==
"false")b=false;else if(c=="true")b=true;else if(c=="real")b=parseFloat(a.firstChild.nodeValue);else if(c=="integer")b=parseInt(a.firstChild.nodeValue,10);return b},_parseArray:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c];e.nodeType==1&&b.push(this._parseNode(e))}return b},_parseDict:function(a){for(var b={},c=null,d=0,e=a.childNodes.length;d<e;d++){var f=a.childNodes[d];if(f.nodeType==1)if(f.tagName=="key")c=f.firstChild.nodeValue;else b[c]=this._parseNode(f)}return b}});
cc._txtLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,d)}};cc.loader.register(["txt","xml","vsh","fsh","atlas"],cc._txtLoader);cc._jsonLoader={load:function(a,b,c,d){cc.loader.loadJson(a,d)}};cc.loader.register(["json","ExportJson"],cc._jsonLoader);cc._imgLoader={load:function(a,b,c,d){cc.loader.cache[b]=cc.loader.loadImg(a,function(e,f){if(e)return d(e);cc.textureCache.handleLoadedTexture(b);d(null,f)})}};cc.loader.register(["png","jpg","bmp","jpeg","gif","ico"],cc._imgLoader);
cc._serverImgLoader={load:function(a,b,c,d){cc.loader.cache[b]=cc.loader.loadImg(c.src,function(e,f){if(e)return d(e);cc.textureCache.handleLoadedTexture(b);d(null,f)})}};cc.loader.register(["serverImg"],cc._serverImgLoader);cc._plistLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,function(e,f){if(e)return d(e);d(null,cc.plistParser.parse(f))})}};cc.loader.register(["plist"],cc._plistLoader);
cc._fontLoader={TYPE:{".eot":"embedded-opentype",".ttf":"truetype",".woff":"woff",".svg":"svg"},_loadFont:function(a,b,c){var d=document,e=cc.path,f=this.TYPE,g=cc.newElement("style");g.type="text/css";d.body.appendChild(g);var h="@font-face { font-family:"+a+"; src:";if(b instanceof Array)for(var j=0,k=b.length;j<k;j++){c=e.extname(b[j]).toLowerCase();h+="url('"+b[j]+"') format('"+f[c]+"')";h+=j==k-1?";":","}else h+="url('"+b+"') format('"+f[c]+"');";g.textContent+=h+"};";b=cc.newElement("div");
var m=b.style;m.fontFamily=a;b.innerHTML=".";m.position="absolute";m.left="-100px";m.top="-100px";d.body.appendChild(b)},load:function(a,b,c,d){b=c.type;a=c.name;b=c.srcs;if(cc.isString(c)){b=cc.path.extname(c);a=cc.path.basename(c,b);this._loadFont(a,c,b)}else this._loadFont(a,b);d(null,true)}};cc.loader.register(["font","eot","ttf","woff","svg"],cc._fontLoader);cc._binaryLoader={load:function(a,b,c,d){cc.loader.loadBinary(a,d)}};cc._csbLoader={load:function(a,b,c,d){cc.loader.loadCsb(a,d)}};
cc.loader.register(["csb"],cc._csbLoader);window.CocosEngine=cc.ENGINE_VERSION="Cocos2d-JS v3.1";cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL=0;cc.DIRECTOR_STATS_POSITION=cc.p(0,0);cc.DIRECTOR_FPS_INTERVAL=0.5;cc.COCOSNODE_RENDER_SUBPIXEL=1;cc.SPRITEBATCHNODE_RENDER_SUBPIXEL=1;cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA=0;cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP=0;cc.TEXTURE_ATLAS_USE_VAO=0;cc.TEXTURE_NPOT_SUPPORT=0;cc.RETINA_DISPLAY_SUPPORT=1;cc.RETINA_DISPLAY_FILENAME_SUFFIX="-hd";cc.USE_LA88_LABELS=1;
cc.SPRITE_DEBUG_DRAW=0;cc.SPRITEBATCHNODE_DEBUG_DRAW=0;cc.LABELBMFONT_DEBUG_DRAW=0;cc.LABELATLAS_DEBUG_DRAW=0;cc.IS_RETINA_DISPLAY_SUPPORTED=1;cc.DEFAULT_ENGINE=cc.ENGINE_VERSION+"-canvas";cc.ENABLE_STACKABLE_ACTIONS=1;cc.ENABLE_GL_STATE_CACHE=1;
cc.$=function(a){var b=this==cc?document:this;if(a=a instanceof HTMLElement?a:b.querySelector(a)){a.find=a.find||cc.$;a.hasClass=a.hasClass||function(c){return this.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)"))};a.addClass=a.addClass||function(c){if(!this.hasClass(c)){if(this.className)this.className+=" ";this.className+=c}return this};a.removeClass=a.removeClass||function(c){if(this.hasClass(c))this.className=this.className.replace(c,"");return this};a.remove=a.remove||function(){this.parentNode&&
this.parentNode.removeChild(this);return this};a.appendTo=a.appendTo||function(c){c.appendChild(this);return this};a.prependTo=a.prependTo||function(c){c.childNodes[0]?c.insertBefore(this,c.childNodes[0]):c.appendChild(this);return this};a.transforms=a.transforms||function(){this.style[cc.$.trans]=cc.$.translate(this.position)+cc.$.rotate(this.rotation)+cc.$.scale(this.scale)+cc.$.skew(this.skew);return this};a.position=a.position||{x:0,y:0};a.rotation=a.rotation||0;a.scale=a.scale||{x:1,y:1};a.skew=
a.skew||{x:0,y:0};a.translates=function(c,d){this.position.x=c;this.position.y=d;this.transforms();return this};a.rotate=function(c){this.rotation=c;this.transforms();return this};a.resize=function(c,d){this.scale.x=c;this.scale.y=d;this.transforms();return this};a.setSkew=function(c,d){this.skew.x=c;this.skew.y=d;this.transforms();return this}}return a};
switch(cc.sys.browserType){case cc.sys.BROWSER_TYPE_FIREFOX:cc.$.pfx="Moz";cc.$.hd=true;break;case cc.sys.BROWSER_TYPE_CHROME:case cc.sys.BROWSER_TYPE_SAFARI:cc.$.pfx="webkit";cc.$.hd=true;break;case cc.sys.BROWSER_TYPE_OPERA:cc.$.pfx="O";cc.$.hd=false;break;case cc.sys.BROWSER_TYPE_IE:cc.$.pfx="ms";cc.$.hd=false;break;default:cc.$.pfx="webkit";cc.$.hd=true}cc.$.trans=cc.$.pfx+"Transform";
cc.$.translate=cc.$.hd?function(a){return"translate3d("+a.x+"px, "+a.y+"px, 0) "}:function(a){return"translate("+a.x+"px, "+a.y+"px) "};cc.$.rotate=cc.$.hd?function(a){return"rotateZ("+a+"deg) "}:function(a){return"rotate("+a+"deg) "};cc.$.scale=function(a){return"scale("+a.x+", "+a.y+") "};cc.$.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"};cc.$new=function(a){return cc.$(document.createElement(a))};
cc.$.findpos=function(a){var b=0,c=0;do{b+=a.offsetLeft;c+=a.offsetTop}while(a=a.offsetParent);return{x:b,y:c}};cc.INVALID_INDEX=-1;cc.PI=Math.PI;cc.FLT_MAX=parseFloat("3.402823466e+38F");cc.FLT_MIN=parseFloat("1.175494351e-38F");cc.RAD=cc.PI/180;cc.DEG=180/cc.PI;cc.UINT_MAX=4294967295;cc.swap=function(a,b,c){if(cc.isObject(c)&&!cc.isUndefined(c.x)&&!cc.isUndefined(c.y)){var d=c[a];c[a]=c[b];c[b]=d}else cc.log(cc._LogInfos.swap)};cc.lerp=function(a,b,c){return a+(b-a)*c};
cc.rand=function(){return Math.random()*16777215};cc.randomMinus1To1=function(){return(Math.random()-0.5)*2};cc.random0To1=Math.random;cc.degreesToRadians=function(a){return a*cc.RAD};cc.radiansToDegrees=function(a){return a*cc.DEG};cc.radiansToDegress=function(a){cc.log(cc._LogInfos.radiansToDegress);return a*cc.DEG};cc.REPEAT_FOREVER=Number.MAX_VALUE-1;cc.BLEND_SRC=cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA?1:770;cc.BLEND_DST=771;
cc.nodeDrawSetup=function(a){if(a._shaderProgram){a._shaderProgram.use();a._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4()}};cc.enableDefaultGLStates=function(){};cc.disableDefaultGLStates=function(){};cc.incrementGLDraws=function(a){cc.g_NumberOfDraws+=a};cc.FLT_EPSILON=1.192092896E-7;cc.contentScaleFactor=cc.IS_RETINA_DISPLAY_SUPPORTED?function(){return cc.director.getContentScaleFactor()}:function(){return 1};
cc.pointPointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.p(a.x*b,a.y*b)};cc.pointPixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.p(a.x/b,a.y/b)};cc._pointPixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.x=a.x/c;b.y=a.y/c};cc.sizePointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.size(a.width*b,a.height*b)};cc.sizePixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.size(a.width/b,a.height/b)};
cc._sizePixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.width=a.width/c;b.height=a.height/c};cc.rectPixelsToPoints=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x/b,a.y/b,a.width/b,a.height/b)}:function(a){return a};cc.rectPointsToPixels=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x*b,a.y*b,a.width*b,a.height*b)}:function(a){return a};cc.ONE=1;cc.ZERO=0;cc.SRC_ALPHA=770;
cc.SRC_ALPHA_SATURATE=776;cc.SRC_COLOR=768;cc.DST_ALPHA=772;cc.DST_COLOR=774;cc.ONE_MINUS_SRC_ALPHA=771;cc.ONE_MINUS_SRC_COLOR=769;cc.ONE_MINUS_DST_ALPHA=773;cc.ONE_MINUS_DST_COLOR=775;cc.ONE_MINUS_CONSTANT_ALPHA=32772;cc.ONE_MINUS_CONSTANT_COLOR=32770;cc.checkGLErrorDebug=function(){if(cc.renderMode==cc._RENDER_TYPE_WEBGL){var a=cc._renderContext.getError();a&&cc.log(cc._LogInfos.checkGLErrorDebug,a)}};cc.DEVICE_ORIENTATION_PORTRAIT=0;cc.DEVICE_ORIENTATION_LANDSCAPE_LEFT=1;
cc.DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;cc.DEVICE_ORIENTATION_LANDSCAPE_RIGHT=3;cc.DEVICE_MAX_ORIENTATIONS=2;cc.VERTEX_ATTRIB_FLAG_NONE=0;cc.VERTEX_ATTRIB_FLAG_POSITION=1;cc.VERTEX_ATTRIB_FLAG_COLOR=2;cc.VERTEX_ATTRIB_FLAG_TEX_COORDS=4;cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX=cc.VERTEX_ATTRIB_FLAG_POSITION|cc.VERTEX_ATTRIB_FLAG_COLOR|cc.VERTEX_ATTRIB_FLAG_TEX_COORDS;cc.GL_ALL=0;cc.VERTEX_ATTRIB_POSITION=0;cc.VERTEX_ATTRIB_COLOR=1;cc.VERTEX_ATTRIB_TEX_COORDS=2;cc.VERTEX_ATTRIB_MAX=3;
cc.UNIFORM_PMATRIX=0;cc.UNIFORM_MVMATRIX=1;cc.UNIFORM_MVPMATRIX=2;cc.UNIFORM_TIME=3;cc.UNIFORM_SINTIME=4;cc.UNIFORM_COSTIME=5;cc.UNIFORM_RANDOM01=6;cc.UNIFORM_SAMPLER=7;cc.UNIFORM_MAX=8;cc.SHADER_POSITION_TEXTURECOLOR="ShaderPositionTextureColor";cc.SHADER_POSITION_TEXTURECOLORALPHATEST="ShaderPositionTextureColorAlphaTest";cc.SHADER_POSITION_COLOR="ShaderPositionColor";cc.SHADER_POSITION_TEXTURE="ShaderPositionTexture";cc.SHADER_POSITION_TEXTURE_UCOLOR="ShaderPositionTexture_uColor";
cc.SHADER_POSITION_TEXTUREA8COLOR="ShaderPositionTextureA8Color";cc.SHADER_POSITION_UCOLOR="ShaderPosition_uColor";cc.SHADER_POSITION_LENGTHTEXTURECOLOR="ShaderPositionLengthTextureColor";cc.UNIFORM_PMATRIX_S="CC_PMatrix";cc.UNIFORM_MVMATRIX_S="CC_MVMatrix";cc.UNIFORM_MVPMATRIX_S="CC_MVPMatrix";cc.UNIFORM_TIME_S="CC_Time";cc.UNIFORM_SINTIME_S="CC_SinTime";cc.UNIFORM_COSTIME_S="CC_CosTime";cc.UNIFORM_RANDOM01_S="CC_Random01";cc.UNIFORM_SAMPLER_S="CC_Texture0";cc.UNIFORM_ALPHA_TEST_VALUE_S="CC_alpha_value";
cc.ATTRIBUTE_NAME_COLOR="a_color";cc.ATTRIBUTE_NAME_POSITION="a_position";cc.ATTRIBUTE_NAME_TEX_COORD="a_texCoord";cc.ITEM_SIZE=32;cc.CURRENT_ITEM=3233828865;cc.ZOOM_ACTION_TAG=3233828866;cc.NORMAL_TAG=8801;cc.SELECTED_TAG=8802;cc.DISABLE_TAG=8803;cc.arrayVerifyType=function(a,b){if(a&&a.length>0)for(var c=0;c<a.length;c++)if(!(a[c]instanceof b)){cc.log("element type is wrong!");return false}return true};cc.arrayRemoveObject=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]==b){a.splice(c,1);break}};
cc.arrayRemoveArray=function(a,b){for(var c=0,d=b.length;c<d;c++)cc.arrayRemoveObject(a,b[c])};cc.arrayAppendObjectsToIndex=function(a,b,c){a.splice.apply(a,[c,0].concat(b));return a};cc.copyArray=function(a){var b,c=a.length,d=new Array(c);for(b=0;b<c;b+=1)d[b]=a[b];return d};
cc._tmp.PrototypeColor=function(){var a=cc.color;a._getWhite=function(){return a(255,255,255)};a._getYellow=function(){return a(255,255,0)};a._getBlue=function(){return a(0,0,255)};a._getGreen=function(){return a(0,255,0)};a._getRed=function(){return a(255,0,0)};a._getMagenta=function(){return a(255,0,255)};a._getBlack=function(){return a(0,0,0)};a._getOrange=function(){return a(255,127,0)};a._getGray=function(){return a(166,166,166)};cc.defineGetterSetter(a,"WHITE",a._getWhite);cc.defineGetterSetter(a,
"YELLOW",a._getYellow);cc.defineGetterSetter(a,"BLUE",a._getBlue);cc.defineGetterSetter(a,"GREEN",a._getGreen);cc.defineGetterSetter(a,"RED",a._getRed);cc.defineGetterSetter(a,"MAGENTA",a._getMagenta);cc.defineGetterSetter(a,"BLACK",a._getBlack);cc.defineGetterSetter(a,"ORANGE",a._getOrange);cc.defineGetterSetter(a,"GRAY",a._getGray);cc.BlendFunc._disable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)};cc.BlendFunc._alphaPremultiplied=function(){return new cc.BlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA)};
cc.BlendFunc._alphaNonPremultiplied=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA)};cc.BlendFunc._additive=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE)};cc.defineGetterSetter(cc.BlendFunc,"DISABLE",cc.BlendFunc._disable);cc.defineGetterSetter(cc.BlendFunc,"ALPHA_PREMULTIPLIED",cc.BlendFunc._alphaPremultiplied);cc.defineGetterSetter(cc.BlendFunc,"ALPHA_NON_PREMULTIPLIED",cc.BlendFunc._alphaNonPremultiplied);cc.defineGetterSetter(cc.BlendFunc,"ADDITIVE",cc.BlendFunc._additive)};
cc.Color=function(a,b,c,d){this.r=a||0;this.g=b||0;this.b=c||0;this.a=d==null?255:d};cc.color=function(a,b,c,d){if(a===undefined)return{r:0,g:0,b:0,a:255};if(cc.isString(a))return cc.hexToColor(a);if(cc.isObject(a))return{r:a.r,g:a.g,b:a.b,a:a.a==null?255:a.a};return{r:a,g:b,b:c,a:d==null?255:d}};cc.colorEqual=function(a,b){return a.r===b.r&&a.g===b.g&&a.b===b.b};cc.Acceleration=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.timestamp=d||0};
cc.Vertex2F=function(a,b){this.x=a||0;this.y=b||0};cc.vertex2=function(a,b){return new cc.Vertex2F(a,b)};cc.Vertex3F=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};cc.vertex3=function(a,b,c){return new cc.Vertex3F(a,b,c)};cc.Tex2F=function(a,b){this.u=a||0;this.v=b||0};cc.tex2=function(a,b){return new cc.Tex2F(a,b)};cc.BlendFunc=function(a,b){this.src=a;this.dst=b};cc.blendFuncDisable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)};
cc.hexToColor=function(a){a=a.replace(/^#?/,"0x");a=parseInt(a);return cc.color(a>>16,(a>>8)%256,a%256)};cc.colorToHex=function(a){var b=a.r.toString(16),c=a.g.toString(16),d=a.b.toString(16);return"#"+(a.r<16?"0"+b:b)+(a.g<16?"0"+c:c)+(a.b<16?"0"+d:d)};cc.TEXT_ALIGNMENT_LEFT=0;cc.TEXT_ALIGNMENT_CENTER=1;cc.TEXT_ALIGNMENT_RIGHT=2;cc.VERTICAL_TEXT_ALIGNMENT_TOP=0;cc.VERTICAL_TEXT_ALIGNMENT_CENTER=1;cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM=2;
cc._Dictionary=cc.Class.extend({_keyMapTb:null,_valueMapTb:null,__currId:0,ctor:function(){this._keyMapTb={};this._valueMapTb={};this.__currId=2<<(0|Math.random()*10)},__getKey:function(){this.__currId++;return"key_"+this.__currId},setObject:function(a,b){if(b!=null){var c=this.__getKey();this._keyMapTb[c]=b;this._valueMapTb[c]=a}},objectForKey:function(a){if(a==null)return null;var b=this._keyMapTb;for(var c in b)if(b[c]===a)return this._valueMapTb[c];return null},valueForKey:function(a){return this.objectForKey(a)},
removeObjectForKey:function(a){if(a!=null){var b=this._keyMapTb;for(var c in b)if(b[c]===a){delete this._valueMapTb[c];delete b[c];return}}},removeObjectsForKeys:function(a){if(a!=null)for(var b=0;b<a.length;b++)this.removeObjectForKey(a[b])},allKeys:function(){var a=[],b=this._keyMapTb;for(var c in b)a.push(b[c]);return a},removeAllObjects:function(){this._keyMapTb={};this._valueMapTb={}},count:function(){return this.allKeys().length}});
cc.FontDefinition=function(){var a=this;a.fontName="Arial";a.fontSize=12;a.textAlign=cc.TEXT_ALIGNMENT_CENTER;a.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_TOP;a.fillStyle=cc.color(255,255,255,255);a.boundingWidth=0;a.boundingHeight=0;a.strokeEnabled=false;a.strokeStyle=cc.color(255,255,255,255);a.lineWidth=1;a.shadowEnabled=false;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0;a.shadowOpacity=1};
if(cc._renderType===cc._RENDER_TYPE_WEBGL){cc.assert(cc.isFunction(cc._tmp.WebGLColor),cc._LogInfos.MissingFile,"CCTypesWebGL.js");cc._tmp.WebGLColor();delete cc._tmp.WebGLColor}cc.assert(cc.isFunction(cc._tmp.PrototypeColor),cc._LogInfos.MissingFile,"CCTypesPropertyDefine.js");cc._tmp.PrototypeColor();delete cc._tmp.PrototypeColor;cc.Touches=[];cc.TouchesIntergerDict={};cc.DENSITYDPI_DEVICE="device-dpi";cc.DENSITYDPI_HIGH="high-dpi";cc.DENSITYDPI_MEDIUM="medium-dpi";cc.DENSITYDPI_LOW="low-dpi";
cc.EGLView=cc.Class.extend({_delegate:null,_frameSize:null,_designResolutionSize:null,_originalDesignResolutionSize:null,_viewPortRect:null,_visibleRect:null,_retinaEnabled:false,_autoFullScreen:true,_devicePixelRatio:1,_viewName:"",_resizeCallback:null,_scaleX:1,_originalScaleX:1,_scaleY:1,_originalScaleY:1,_indexBitsUsed:0,_maxTouches:5,_resolutionPolicy:null,_rpExactFit:null,_rpShowAll:null,_rpNoBorder:null,_rpFixedHeight:null,_rpFixedWidth:null,_initialized:false,_captured:false,_wnd:null,_hDC:null,
_hRC:null,_supportTouch:false,_contentTranslateLeftTop:null,_frame:null,_frameZoomFactor:1,__resizeWithBrowserSize:false,_isAdjustViewPort:true,_targetDensityDPI:null,ctor:function(){var a=this,b=document,c=cc.ContainerStrategy,d=cc.ContentStrategy;a._frame=cc.container.parentNode===b.body?b.documentElement:cc.container.parentNode;a._frameSize=cc.size(0,0);a._initFrameSize();b=cc._canvas.width;var e=cc._canvas.height;a._designResolutionSize=cc.size(b,e);a._originalDesignResolutionSize=cc.size(b,e);
a._viewPortRect=cc.rect(0,0,b,e);a._visibleRect=cc.rect(0,0,b,e);a._contentTranslateLeftTop={left:0,top:0};a._viewName="Cocos2dHTML5";b=cc.sys;a.enableRetina(b.os==b.OS_IOS||b.os==b.OS_OSX);cc.visibleRect&&cc.visibleRect.init(a._visibleRect);a._rpExactFit=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.EXACT_FIT);a._rpShowAll=new cc.ResolutionPolicy(c.PROPORTION_TO_FRAME,d.SHOW_ALL);a._rpNoBorder=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.NO_BORDER);a._rpFixedHeight=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,
d.FIXED_HEIGHT);a._rpFixedWidth=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.FIXED_WIDTH);a._hDC=cc._canvas;a._hRC=cc._renderContext;a._targetDensityDPI=cc.DENSITYDPI_HIGH},_resizeEvent:function(){var a=this._originalDesignResolutionSize.width,b=this._originalDesignResolutionSize.height;if(this._resizeCallback){this._initFrameSize();this._resizeCallback.call()}a>0&&this.setDesignResolutionSize(a,b,this._resolutionPolicy)},setTargetDensityDPI:function(a){this._targetDensityDPI=a;this._setViewPortMeta()},
getTargetDensityDPI:function(){return this._targetDensityDPI},resizeWithBrowserSize:function(a){var b=this;if(a){if(!b.__resizeWithBrowserSize){b.__resizeWithBrowserSize=true;a=b._resizeEvent.bind(b);cc._addEventListener(window,"resize",a,false)}}else if(b.__resizeWithBrowserSize){b.__resizeWithBrowserSize=true;a=b._resizeEvent.bind(b);window.removeEventListener("resize",a,false)}},setResizeCallback:function(a){if(cc.isFunction(a)||a==null)this._resizeCallback=a},_initFrameSize:function(){var a=this._frameSize;
a.width=this._frame.clientWidth;a.height=this._frame.clientHeight},_adjustSizeKeepCanvasSize:function(){var a=this._originalDesignResolutionSize.width,b=this._originalDesignResolutionSize.height;a>0&&this.setDesignResolutionSize(a,b,this._resolutionPolicy)},_setViewPortMeta:function(){if(this._isAdjustViewPort){var a=document.getElementById("cocosMetaElement");a&&document.head.removeChild(a);var b;var c=(a=document.getElementsByName("viewport"))?a[0]:null,d;a=cc.newElement("meta");a.id="cocosMetaElement";
a.name="viewport";a.content="";b=cc.sys.isMobile&&cc.sys.browserType==cc.sys.BROWSER_TYPE_FIREFOX?{width:"device-width","initial-scale":"1.0"}:{width:"device-width","user-scalable":"no","maximum-scale":"1.0","initial-scale":"1.0"};if(cc.sys.isMobile)b["target-densitydpi"]=this._targetDensityDPI;d=c?c.content:"";for(var e in b)(new RegExp(e)).test(d)||(d+=","+e+"="+b[e]);if(d!="")d=d.substr(1);a.content=d;if(c)c.content=d;document.head.appendChild(a)}},_setScaleXYForRenderTexture:function(){var a=
cc.contentScaleFactor();this._scaleY=this._scaleX=a},_resetScale:function(){this._scaleX=this._originalScaleX;this._scaleY=this._originalScaleY},_adjustSizeToBrowser:function(){},initialize:function(){this._initialized=true},adjustViewPort:function(a){this._isAdjustViewPort=a},enableRetina:function(a){this._retinaEnabled=a?true:false},isRetinaEnabled:function(){return this._retinaEnabled},enableAutoFullScreen:function(a){this._autoFullScreen=a?true:false},isAutoFullScreenEnabled:function(){return this._autoFullScreen},
end:function(){},isOpenGLReady:function(){return this._hDC!=null&&this._hRC!=null},setFrameZoomFactor:function(a){this._frameZoomFactor=a;this.centerWindow();cc.director.setProjection(cc.director.getProjection())},swapBuffers:function(){},setIMEKeyboardState:function(){},setContentTranslateLeftTop:function(a,b){this._contentTranslateLeftTop={left:a,top:b}},getContentTranslateLeftTop:function(){return this._contentTranslateLeftTop},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},
setFrameSize:function(a,b){this._frameSize.width=a;this._frameSize.height=b;this._frame.style.width=a+"px";this._frame.style.height=b+"px";this._resizeEvent();cc.director.setProjection(cc.director.getProjection())},centerWindow:function(){},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleOrigin:function(){return cc.p(this._visibleRect.x,this._visibleRect.y)},canSetContentScaleFactor:function(){return true},getResolutionPolicy:function(){return this._resolutionPolicy},
setResolutionPolicy:function(a){var b=this;if(a instanceof cc.ResolutionPolicy)b._resolutionPolicy=a;else{var c=cc.ResolutionPolicy;if(a===c.EXACT_FIT)b._resolutionPolicy=b._rpExactFit;if(a===c.SHOW_ALL)b._resolutionPolicy=b._rpShowAll;if(a===c.NO_BORDER)b._resolutionPolicy=b._rpNoBorder;if(a===c.FIXED_HEIGHT)b._resolutionPolicy=b._rpFixedHeight;if(a===c.FIXED_WIDTH)b._resolutionPolicy=b._rpFixedWidth}},setDesignResolutionSize:function(a,b,c){if(isNaN(a)||a==0||isNaN(b)||b==0)cc.log(cc._LogInfos.EGLView_setDesignResolutionSize);
else{var d=this;d.setResolutionPolicy(c);if(c=d._resolutionPolicy){c.preApply(d);cc.sys.isMobile&&d._setViewPortMeta();d._initFrameSize();d._designResolutionSize=cc.size(a,b);d._originalDesignResolutionSize=cc.size(a,b);a=c.apply(d,d._designResolutionSize);if(a.scale&&a.scale.length==2){d._scaleX=a.scale[0];d._scaleY=a.scale[1]}if(a.viewport){a=d._viewPortRect=a.viewport;b=d._visibleRect;b.width=cc._canvas.width/d._scaleX;b.height=cc._canvas.height/d._scaleY;b.x=-a.x/d._scaleX;b.y=-a.y/d._scaleY}a=
cc.director;a._winSizeInPoints.width=d._designResolutionSize.width;a._winSizeInPoints.height=d._designResolutionSize.height;c.postApply(d);cc.winSize.width=a._winSizeInPoints.width;cc.winSize.height=a._winSizeInPoints.height;if(cc._renderType==cc._RENDER_TYPE_WEBGL){a._createStatsLabel();a.setGLDefaultValues()}d._originalScaleX=d._scaleX;d._originalScaleY=d._scaleY;cc.DOM&&cc.DOM._resetEGLViewDiv();cc.visibleRect&&cc.visibleRect.init(d._visibleRect)}else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2)}},
getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setViewPortInPoints:function(a,b,c,d){var e=this._frameZoomFactor,f=this._scaleX,g=this._scaleY;cc._renderContext.viewport(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*g*e)},setScissorInPoints:function(a,b,c,d){var e=this._frameZoomFactor,f=this._scaleX,g=this._scaleY;cc._renderContext.scissor(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*
g*e)},isScissorEnabled:function(){var a=cc._renderContext;return a.isEnabled(a.SCISSOR_TEST)},getScissorRect:function(){var a=cc._renderContext,b=this._scaleX,c=this._scaleY;a=a.getParameter(a.SCISSOR_BOX);return cc.rect((a[0]-this._viewPortRect.x)/b,(a[1]-this._viewPortRect.y)/c,a[2]/b,a[3]/c)},setViewName:function(a){if(a!=null&&a.length>0)this._viewName=a},getViewName:function(){return this._viewName},getViewPortRect:function(){return this._viewPortRect},getScaleX:function(){return this._scaleX},
getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(a,b,c){return{x:this._devicePixelRatio*(a-c.left),y:this._devicePixelRatio*(c.top+c.height-b)}},_convertMouseToLocationInView:function(a,b){var c=this._viewPortRect,d=this;a.x=(d._devicePixelRatio*(a.x-b.left)-c.x)/d._scaleX;a.y=(d._devicePixelRatio*(b.top+b.height-a.y)-c.y)/d._scaleY},_convertTouchesWithScale:function(a){for(var b=this._viewPortRect,c=this._scaleX,
d=this._scaleY,e,f,g,h=0;h<a.length;h++){e=a[h];f=e._point;g=e._prevPoint;e._setPoint((f.x-b.x)/c,(f.y-b.y)/d);e._setPrevPoint((g.x-b.x)/c,(g.y-b.y)/d)}}});cc.EGLView._getInstance=function(){if(!this._instance){this._instance=this._instance||new cc.EGLView;this._instance.initialize()}return this._instance};
cc.ContainerStrategy=cc.Class.extend({preApply:function(){},apply:function(){},postApply:function(){},_setupContainer:function(a,b,c){var d=a._frame;cc.view._autoFullScreen&&cc.sys.isMobile&&d==document.documentElement&&cc.screen.autoFullScreen(d);d=cc._canvas;var e=cc.container;e.style.width=d.style.width=b+"px";e.style.height=d.style.height=c+"px";e=a._devicePixelRatio=1;if(a.isRetinaEnabled())e=a._devicePixelRatio=window.devicePixelRatio||1;d.width=b*e;d.height=c*e;a=document.body;var f;if(a&&
(f=a.style)){f.paddingTop=f.paddingTop||"0px";f.paddingRight=f.paddingRight||"0px";f.paddingBottom=f.paddingBottom||"0px";f.paddingLeft=f.paddingLeft||"0px";f.borderTop=f.borderTop||"0px";f.borderRight=f.borderRight||"0px";f.borderBottom=f.borderBottom||"0px";f.borderLeft=f.borderLeft||"0px";f.marginTop=f.marginTop||"0px";f.marginRight=f.marginRight||"0px";f.marginBottom=f.marginBottom||"0px";f.marginLeft=f.marginLeft||"0px"}},_fixContainer:function(){document.body.insertBefore(cc.container,document.body.firstChild);
var a=document.body.style;a.width=window.innerWidth+"px";a.height=window.innerHeight+"px";a.overflow="hidden";a=cc.container.style;a.position="fixed";a.left=a.top="0px";document.body.scrollTop=0}});
cc.ContentStrategy=cc.Class.extend({_result:{scale:[1,1],viewport:null},_buildResult:function(a,b,c,d,e,f){Math.abs(a-c)<2&&(c=a);Math.abs(b-d)<2&&(d=b);a=cc.rect(Math.round((a-c)/2),Math.round((b-d)/2),c,d);cc._renderType==cc._RENDER_TYPE_CANVAS&&cc._renderContext.translate(a.x,a.y+d);this._result.scale=[e,f];this._result.viewport=a;return this._result},preApply:function(){},apply:function(){return{scale:[1,1]}},postApply:function(){}});
(function(){var a=cc.ContainerStrategy.extend({apply:function(f){this._setupContainer(f,f._frameSize.width,f._frameSize.height)}}),b=cc.ContainerStrategy.extend({apply:function(f,g){var h=f._frameSize.width,j=f._frameSize.height,k=cc.container.style,m=g.width;g=g.height;var n=h/m,o=j/g,r,q;n<o?(r=h,q=g*n):(r=m*o,q=j);m=Math.round((h-r)/2);g=Math.round((j-q)/2);r=h-2*m;q=j-2*g;this._setupContainer(f,r,q);k.marginLeft=m+"px";k.marginRight=m+"px";k.marginTop=g+"px";k.marginBottom=g+"px"}});a.extend({preApply:function(f){this._super(f);
f._frame=document.documentElement},apply:function(f){this._super(f);this._fixContainer()}});b.extend({preApply:function(f){this._super(f);f._frame=document.documentElement},apply:function(f,g){this._super(f,g);this._fixContainer()}});var c=cc.ContainerStrategy.extend({apply:function(f){this._setupContainer(f,cc._canvas.width,cc._canvas.height)}});cc.ContainerStrategy.EQUAL_TO_FRAME=new a;cc.ContainerStrategy.PROPORTION_TO_FRAME=new b;cc.ContainerStrategy.ORIGINAL_CONTAINER=new c;a=cc.ContentStrategy.extend({apply:function(f,
g){f=cc._canvas.width;var h=cc._canvas.height;return this._buildResult(f,h,f,h,f/g.width,h/g.height)}});b=cc.ContentStrategy.extend({apply:function(f,g){f=cc._canvas.width;var h=cc._canvas.height,j=g.width;g=g.height;var k=f/j,m=h/g,n=0,o,r;k<m?(n=k,o=f,r=g*n):(n=m,o=j*n,r=h);return this._buildResult(f,h,o,r,n,n)}});c=cc.ContentStrategy.extend({apply:function(f,g){f=cc._canvas.width;var h=cc._canvas.height,j=g.width;g=g.height;var k=f/j,m=h/g,n,o,r;k<m?(n=m,o=j*n,r=h):(n=k,o=f,r=g*n);return this._buildResult(f,
h,o,r,n,n)}});var d=cc.ContentStrategy.extend({apply:function(f,g){f=cc._canvas.width;var h=cc._canvas.height;g=h/g.height;return this._buildResult(f,h,f,h,g,g)},postApply:function(f){cc.director._winSizeInPoints=f.getVisibleSize()}}),e=cc.ContentStrategy.extend({apply:function(f,g){f=cc._canvas.width;var h=cc._canvas.height;g=f/g.width;return this._buildResult(f,h,f,h,g,g)},postApply:function(f){cc.director._winSizeInPoints=f.getVisibleSize()}});cc.ContentStrategy.EXACT_FIT=new a;cc.ContentStrategy.SHOW_ALL=
new b;cc.ContentStrategy.NO_BORDER=new c;cc.ContentStrategy.FIXED_HEIGHT=new d;cc.ContentStrategy.FIXED_WIDTH=new e})();
cc.ResolutionPolicy=cc.Class.extend({_containerStrategy:null,_contentStrategy:null,ctor:function(a,b){this.setContainerStrategy(a);this.setContentStrategy(b)},preApply:function(a){this._containerStrategy.preApply(a);this._contentStrategy.preApply(a)},apply:function(a,b){this._containerStrategy.apply(a,b);return this._contentStrategy.apply(a,b)},postApply:function(a){this._containerStrategy.postApply(a);this._contentStrategy.postApply(a)},setContainerStrategy:function(a){if(a instanceof cc.ContainerStrategy)this._containerStrategy=
a},setContentStrategy:function(a){if(a instanceof cc.ContentStrategy)this._contentStrategy=a}});cc.ResolutionPolicy.EXACT_FIT=0;cc.ResolutionPolicy.NO_BORDER=1;cc.ResolutionPolicy.SHOW_ALL=2;cc.ResolutionPolicy.FIXED_HEIGHT=3;cc.ResolutionPolicy.FIXED_WIDTH=4;cc.ResolutionPolicy.UNKNOWN=5;
cc.screen={_supportsFullScreen:false,_preOnFullScreenChange:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen",
"mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){this._fn={};var a,b,c=this._fnMap,d;a=0;for(l=c.length;a<l;a++)if((b=c[a])&&b[1]in document){a=0;for(d=b.length;a<d;a++)this._fn[c[0][a]]=b[a];break}this._supportsFullScreen=this._fn.requestFullscreen!=undefined;this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},fullScreen:function(){return this._supportsFullScreen&&document[this._fn.fullscreenEnabled]},
requestFullScreen:function(a,b){if(this._supportsFullScreen){a=a||document.documentElement;a[this._fn.requestFullscreen]();if(b){var c=this._fn.fullscreenchange;this._preOnFullScreenChange&&document.removeEventListener(c,this._preOnFullScreenChange);this._preOnFullScreenChange=b;cc._addEventListener(document,c,b,false)}return a[this._fn.requestFullscreen]()}},exitFullScreen:function(){return this._supportsFullScreen?document[this._fn.exitFullscreen]():true},autoFullScreen:function(a,b){function c(){e.requestFullScreen(a,
b);d.removeEventListener(e._touchEvent,c)}a=a||document.body;var d=cc._canvas||a,e=this;this.requestFullScreen(a,b);cc._addEventListener(d,this._touchEvent,c)}};cc.screen.init();
cc.visibleRect={topLeft:cc.p(0,0),topRight:cc.p(0,0),top:cc.p(0,0),bottomLeft:cc.p(0,0),bottomRight:cc.p(0,0),bottom:cc.p(0,0),center:cc.p(0,0),left:cc.p(0,0),right:cc.p(0,0),width:0,height:0,init:function(a){var b=this.width=a.width,c=this.height=a.height,d=a.x;a=a.y;var e=a+c,f=d+b;this.topLeft.x=d;this.topLeft.y=e;this.topRight.x=f;this.topRight.y=e;this.top.x=d+b/2;this.top.y=e;this.bottomLeft.x=d;this.bottomLeft.y=a;this.bottomRight.x=f;this.bottomRight.y=a;this.bottom.x=d+b/2;this.bottom.y=
a;this.center.x=d+b/2;this.center.y=a+c/2;this.left.x=d;this.left.y=a+c/2;this.right.x=f;this.right.y=a+c/2}};cc.UIInterfaceOrientationLandscapeLeft=-90;cc.UIInterfaceOrientationLandscapeRight=90;cc.UIInterfaceOrientationPortraitUpsideDown=180;cc.UIInterfaceOrientationPortrait=0;
cc.inputManager={_mousePressed:false,_isRegisterEvent:false,_preTouchPoint:cc.p(0,0),_prevMousePoint:cc.p(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:5,_accelEnabled:false,_accelInterval:1/30,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_getUnUsedIndex:function(){for(var a=this._indexBitsUsed,b=0;b<this._maxTouches;b++){if(!(a&1)){this._indexBitsUsed|=1<<b;return b}a>>=1}return-1},_removeUsedIndexBit:function(a){if(!(a<
0||a>=this._maxTouches)){a=1<<a;a=~a;this._indexBitsUsed&=a}},_glView:null,handleTouchesBegin:function(a){for(var b,c,d,e=[],f=this._touchesIntegerDict,g=0,h=a.length;g<h;g++){b=a[g];d=b.getID();c=f[d];if(c==null){var j=this._getUnUsedIndex();if(j==-1)cc.log(cc._LogInfos.inputManager_handleTouchesBegin,j);else{c=this._touches[j]=new cc.Touch(b._point.x,b._point.y,b.getID());c._setPrevPoint(b._prevPoint);f[d]=j;e.push(c)}}}if(e.length>0){this._glView._convertTouchesWithScale(e);a=new cc.EventTouch(e);
a._eventCode=cc.EventTouch.EventCode.BEGAN;cc.eventManager.dispatchEvent(a)}},handleTouchesMove:function(a){for(var b,c,d=[],e=this._touches,f=0,g=a.length;f<g;f++){b=a[f];c=b.getID();c=this._touchesIntegerDict[c];if(c!=null)if(e[c]){e[c]._setPoint(b._point);e[c]._setPrevPoint(b._prevPoint);d.push(e[c])}}if(d.length>0){this._glView._convertTouchesWithScale(d);a=new cc.EventTouch(d);a._eventCode=cc.EventTouch.EventCode.MOVED;cc.eventManager.dispatchEvent(a)}},handleTouchesEnd:function(a){a=this.getSetOfTouchesEndOrCancel(a);
if(a.length>0){this._glView._convertTouchesWithScale(a);a=new cc.EventTouch(a);a._eventCode=cc.EventTouch.EventCode.ENDED;cc.eventManager.dispatchEvent(a)}},handleTouchesCancel:function(a){a=this.getSetOfTouchesEndOrCancel(a);if(a.length>0){this._glView._convertTouchesWithScale(a);a=new cc.EventTouch(a);a._eventCode=cc.EventTouch.EventCode.CANCELLED;cc.eventManager.dispatchEvent(a)}},getSetOfTouchesEndOrCancel:function(a){for(var b,c,d,e=[],f=this._touches,g=this._touchesIntegerDict,h=0,j=a.length;h<
j;h++){b=a[h];d=b.getID();c=g[d];if(c!=null)if(f[c]){f[c]._setPoint(b._point);f[c]._setPrevPoint(b._prevPoint);e.push(f[c]);this._removeUsedIndexBit(c);delete g[d]}}return e},getHTMLElementPosition:function(a){var b=document.documentElement,c=window,d=null;d=cc.isFunction(a.getBoundingClientRect)?a.getBoundingClientRect():a instanceof HTMLCanvasElement?{left:0,top:0,width:a.width,height:a.height}:{left:0,top:0,width:parseInt(a.style.width),height:parseInt(a.style.height)};return{left:d.left+c.pageXOffset-
b.clientLeft,top:d.top+c.pageYOffset-b.clientTop,width:d.width,height:d.height}},getPreTouch:function(a){for(var b=null,c=this._preTouchPool,d=a.getID(),e=c.length-1;e>=0;e--)if(c[e].getID()==d){b=c[e];break}b||(b=a);return b},setPreTouch:function(a){for(var b=false,c=this._preTouchPool,d=a.getID(),e=c.length-1;e>=0;e--)if(c[e].getID()==d){c[e]=a;b=true;break}if(!b)if(c.length<=50)c.push(a);else{c[this._preTouchPoolPointer]=a;this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50}},getTouchByXY:function(a,
b,c){var d=this._preTouchPoint;a=this._glView.convertToLocationInView(a,b,c);b=new cc.Touch(a.x,a.y);b._setPrevPoint(d.x,d.y);d.x=a.x;d.y=a.y;return b},getMouseEvent:function(a,b,c){var d=this._prevMousePoint;this._glView._convertMouseToLocationInView(a,b);b=new cc.EventMouse(c);b.setLocation(a.x,a.y);b._setPrevCursor(d.x,d.y);d.x=a.x;d.y=a.y;return b},getPointByEvent:function(a,b){if(a.pageX!=null)return{x:a.pageX,y:a.pageY};b.left-=document.body.scrollLeft;b.top-=document.body.scrollTop;return{x:a.clientX,
y:a.clientY}},getTouchesByEvent:function(a,b){for(var c=[],d=this._glView,e,f,g=this._preTouchPoint,h=a.changedTouches.length,j=0;j<h;j++)if(e=a.changedTouches[j]){var k;k=cc.sys.BROWSER_TYPE_FIREFOX===cc.sys.browserType?d.convertToLocationInView(e.pageX,e.pageY,b):d.convertToLocationInView(e.clientX,e.clientY,b);if(e.identifier!=null){e=new cc.Touch(k.x,k.y,e.identifier);f=this.getPreTouch(e).getLocation();e._setPrevPoint(f.x,f.y);this.setPreTouch(e)}else{e=new cc.Touch(k.x,k.y);e._setPrevPoint(g.x,
g.y)}g.x=k.x;g.y=k.y;c.push(e)}return c},registerSystemEvent:function(a){if(!this._isRegisterEvent){this._glView=cc.view;var b=this,c="touches"in cc.sys.capabilities;if("mouse"in cc.sys.capabilities){cc._addEventListener(window,"mousedown",function(){b._mousePressed=true},false);cc._addEventListener(window,"mouseup",function(f){var g=b._mousePressed;b._mousePressed=false;if(g){g=b.getHTMLElementPosition(a);var h=b.getPointByEvent(f,g);if(!cc.rectContainsPoint(new cc.Rect(g.left,g.top,g.width,g.height),
h)){c||b.handleTouchesEnd([b.getTouchByXY(h.x,h.y,g)]);g=b.getMouseEvent(h,g,cc.EventMouse.UP);g.setButton(f.button);cc.eventManager.dispatchEvent(g)}}},false);cc._addEventListener(a,"mousedown",function(f){b._mousePressed=true;var g=b.getHTMLElementPosition(a),h=b.getPointByEvent(f,g);c||b.handleTouchesBegin([b.getTouchByXY(h.x,h.y,g)]);g=b.getMouseEvent(h,g,cc.EventMouse.DOWN);g.setButton(f.button);cc.eventManager.dispatchEvent(g);f.stopPropagation();f.preventDefault();a.focus()},false);cc._addEventListener(a,
"mouseup",function(f){b._mousePressed=false;var g=b.getHTMLElementPosition(a),h=b.getPointByEvent(f,g);c||b.handleTouchesEnd([b.getTouchByXY(h.x,h.y,g)]);g=b.getMouseEvent(h,g,cc.EventMouse.UP);g.setButton(f.button);cc.eventManager.dispatchEvent(g);f.stopPropagation();f.preventDefault()},false);cc._addEventListener(a,"mousemove",function(f){var g=b.getHTMLElementPosition(a),h=b.getPointByEvent(f,g);c||b.handleTouchesMove([b.getTouchByXY(h.x,h.y,g)]);g=b.getMouseEvent(h,g,cc.EventMouse.MOVE);b._mousePressed?
g.setButton(f.button):g.setButton(null);cc.eventManager.dispatchEvent(g);f.stopPropagation();f.preventDefault()},false);cc._addEventListener(a,"mousewheel",function(f){var g=b.getHTMLElementPosition(a),h=b.getPointByEvent(f,g);g=b.getMouseEvent(h,g,cc.EventMouse.SCROLL);g.setButton(f.button);g.setScrollData(0,f.wheelDelta);cc.eventManager.dispatchEvent(g);f.stopPropagation();f.preventDefault()},false);cc._addEventListener(a,"DOMMouseScroll",function(f){var g=b.getHTMLElementPosition(a),h=b.getPointByEvent(f,
g);g=b.getMouseEvent(h,g,cc.EventMouse.SCROLL);g.setButton(f.button);g.setScrollData(0,f.detail*-120);cc.eventManager.dispatchEvent(g);f.stopPropagation();f.preventDefault()},false)}if(window.navigator.msPointerEnabled){var d={MSPointerDown:b.handleTouchesBegin,MSPointerMove:b.handleTouchesMove,MSPointerUp:b.handleTouchesEnd,MSPointerCancel:b.handleTouchesCancel};for(var e in d)(function(f,g){cc._addEventListener(a,f,function(h){var j=b.getHTMLElementPosition(a);j.left-=document.documentElement.scrollLeft;
j.top-=document.documentElement.scrollTop;g.call(b,[b.getTouchByXY(h.clientX,h.clientY,j)]);h.stopPropagation()},false)})(e,d[e])}if(c){cc._addEventListener(a,"touchstart",function(f){if(f.changedTouches){var g=b.getHTMLElementPosition(a);g.left-=document.body.scrollLeft;g.top-=document.body.scrollTop;b.handleTouchesBegin(b.getTouchesByEvent(f,g));f.stopPropagation();f.preventDefault();a.focus()}},false);cc._addEventListener(a,"touchmove",function(f){if(f.changedTouches){var g=b.getHTMLElementPosition(a);
g.left-=document.body.scrollLeft;g.top-=document.body.scrollTop;b.handleTouchesMove(b.getTouchesByEvent(f,g));f.stopPropagation();f.preventDefault()}},false);cc._addEventListener(a,"touchend",function(f){if(f.changedTouches){var g=b.getHTMLElementPosition(a);g.left-=document.body.scrollLeft;g.top-=document.body.scrollTop;b.handleTouchesEnd(b.getTouchesByEvent(f,g));f.stopPropagation();f.preventDefault()}},false);cc._addEventListener(a,"touchcancel",function(f){if(f.changedTouches){var g=b.getHTMLElementPosition(a);
g.left-=document.body.scrollLeft;g.top-=document.body.scrollTop;b.handleTouchesCancel(b.getTouchesByEvent(f,g));f.stopPropagation();f.preventDefault()}},false)}this._registerKeyboardEvent();this._registerAccelerometerEvent();this._isRegisterEvent=true}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(a){if(this._accelCurTime>this._accelInterval){this._accelCurTime-=this._accelInterval;cc.eventManager.dispatchEvent(new cc.EventAcceleration(this._acceleration))}this._accelCurTime+=
a}};cc.AffineTransform=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};cc.affineTransformMake=function(a,b,c,d,e,f){return{a:a,b:b,c:c,d:d,tx:e,ty:f}};cc.pointApplyAffineTransform=function(a,b){return{x:b.a*a.x+b.c*a.y+b.tx,y:b.b*a.x+b.d*a.y+b.ty}};cc._pointApplyAffineTransform=function(a,b,c){return{x:c.a*a+c.c*b+c.tx,y:c.b*a+c.d*b+c.ty}};cc.sizeApplyAffineTransform=function(a,b){return{width:b.a*a.width+b.c*a.height,height:b.b*a.width+b.d*a.height}};
cc.affineTransformMakeIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}};cc.affineTransformIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}};
cc.rectApplyAffineTransform=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a);a=cc._pointApplyAffineTransform(d,c,b);c=cc._pointApplyAffineTransform(e,c,b);d=cc._pointApplyAffineTransform(d,f,b);var g=cc._pointApplyAffineTransform(e,f,b);b=Math.min(a.x,c.x,d.x,g.x);e=Math.max(a.x,c.x,d.x,g.x);f=Math.min(a.y,c.y,d.y,g.y);a=Math.max(a.y,c.y,d.y,g.y);return cc.rect(b,f,e-b,a-f)};
cc._rectApplyAffineTransformIn=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a),g=cc._pointApplyAffineTransform(d,c,b);c=cc._pointApplyAffineTransform(e,c,b);d=cc._pointApplyAffineTransform(d,f,b);var h=cc._pointApplyAffineTransform(e,f,b);b=Math.min(g.x,c.x,d.x,h.x);e=Math.max(g.x,c.x,d.x,h.x);f=Math.min(g.y,c.y,d.y,h.y);g=Math.max(g.y,c.y,d.y,h.y);a.x=b;a.y=f;a.width=e-b;a.height=g-f;return a};
cc.affineTransformTranslate=function(a,b,c){return{a:a.a,b:a.b,c:a.c,d:a.d,tx:a.tx+a.a*b+a.c*c,ty:a.ty+a.b*b+a.d*c}};cc.affineTransformScale=function(a,b,c){return{a:a.a*b,b:a.b*b,c:a.c*c,d:a.d*c,tx:a.tx,ty:a.ty}};cc.affineTransformRotate=function(a,b){var c=Math.sin(b);b=Math.cos(b);return{a:a.a*b+a.c*c,b:a.b*b+a.d*c,c:a.c*b-a.a*c,d:a.d*b-a.b*c,tx:a.tx,ty:a.ty}};
cc.affineTransformConcat=function(a,b){return{a:a.a*b.a+a.b*b.c,b:a.a*b.b+a.b*b.d,c:a.c*b.a+a.d*b.c,d:a.c*b.b+a.d*b.d,tx:a.tx*b.a+a.ty*b.c+b.tx,ty:a.tx*b.b+a.ty*b.d+b.ty}};cc.affineTransformEqualToTransform=function(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty};cc.affineTransformInvert=function(a){var b=1/(a.a*a.d-a.b*a.c);return{a:b*a.d,b:-b*a.b,c:-b*a.c,d:b*a.a,tx:b*(a.c*a.ty-a.d*a.tx),ty:b*(a.b*a.tx-a.a*a.ty)}};cc.POINT_EPSILON=parseFloat("1.192092896e-07F");
cc.pNeg=function(a){return cc.p(-a.x,-a.y)};cc.pAdd=function(a,b){return cc.p(a.x+b.x,a.y+b.y)};cc.pSub=function(a,b){return cc.p(a.x-b.x,a.y-b.y)};cc.pMult=function(a,b){return cc.p(a.x*b,a.y*b)};cc.pMidpoint=function(a,b){return cc.pMult(cc.pAdd(a,b),0.5)};cc.pDot=function(a,b){return a.x*b.x+a.y*b.y};cc.pCross=function(a,b){return a.x*b.y-a.y*b.x};cc.pPerp=function(a){return cc.p(-a.y,a.x)};cc.pRPerp=function(a){return cc.p(a.y,-a.x)};
cc.pProject=function(a,b){return cc.pMult(b,cc.pDot(a,b)/cc.pDot(b,b))};cc.pRotate=function(a,b){return cc.p(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x)};cc.pUnrotate=function(a,b){return cc.p(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)};cc.pLengthSQ=function(a){return cc.pDot(a,a)};cc.pDistanceSQ=function(a,b){return cc.pLengthSQ(cc.pSub(a,b))};cc.pLength=function(a){return Math.sqrt(cc.pLengthSQ(a))};cc.pDistance=function(a,b){return cc.pLength(cc.pSub(a,b))};cc.pNormalize=function(a){return cc.pMult(a,1/cc.pLength(a))};
cc.pForAngle=function(a){return cc.p(Math.cos(a),Math.sin(a))};cc.pToAngle=function(a){return Math.atan2(a.y,a.x)};cc.clampf=function(a,b,c){if(b>c){var d=b;b=c;c=d}return a<b?b:a<c?a:c};cc.pClamp=function(a,b,c){return cc.p(cc.clampf(a.x,b.x,c.x),cc.clampf(a.y,b.y,c.y))};cc.pFromSize=function(a){return cc.p(a.width,a.height)};cc.pCompOp=function(a,b){return cc.p(b(a.x),b(a.y))};cc.pLerp=function(a,b,c){return cc.pAdd(cc.pMult(a,1-c),cc.pMult(b,c))};
cc.pFuzzyEqual=function(a,b,c){if(a.x-c<=b.x&&b.x<=a.x+c)if(a.y-c<=b.y&&b.y<=a.y+c)return true;return false};cc.pCompMult=function(a,b){return cc.p(a.x*b.x,a.y*b.y)};cc.pAngleSigned=function(a,b){a=cc.pNormalize(a);b=cc.pNormalize(b);b=Math.atan2(a.x*b.y-a.y*b.x,cc.pDot(a,b));if(Math.abs(b)<cc.POINT_EPSILON)return 0;return b};cc.pAngle=function(a,b){a=Math.acos(cc.pDot(cc.pNormalize(a),cc.pNormalize(b)));if(Math.abs(a)<cc.POINT_EPSILON)return 0;return a};
cc.pRotateByAngle=function(a,b,c){a=cc.pSub(a,b);var d=Math.cos(c);c=Math.sin(c);var e=a.x;a.x=e*d-a.y*c+b.x;a.y=e*c+a.y*d+b.y;return a};cc.pLineIntersect=function(a,b,c,d,e){if(a.x==b.x&&a.y==b.y||c.x==d.x&&c.y==d.y)return false;var f=b.x-a.x;b=b.y-a.y;var g=d.x-c.x;d=d.y-c.y;var h=a.x-c.x;a=a.y-c.y;c=d*f-g*b;e.x=g*a-d*h;e.y=f*a-b*h;if(c==0){if(e.x==0||e.y==0)return true;return false}e.x/=c;e.y/=c;return true};
cc.pSegmentIntersect=function(a,b,c,d){var e=cc.p(0,0);if(cc.pLineIntersect(a,b,c,d,e))if(e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1)return true;return false};cc.pIntersectPoint=function(a,b,c,d){var e=cc.p(0,0);if(cc.pLineIntersect(a,b,c,d,e)){c=cc.p(0,0);c.x=a.x+e.x*(b.x-a.x);c.y=a.y+e.x*(b.y-a.y);return c}return cc.p(0,0)};cc.pSameAs=function(a,b){if(a!=null&&b!=null)return a.x==b.x&&a.y==b.y;return false};cc.pZeroIn=function(a){a.x=0;a.y=0};cc.pIn=function(a,b){a.x=b.x;a.y=b.y};
cc.pMultIn=function(a,b){a.x*=b;a.y*=b};cc.pSubIn=function(a,b){a.x-=b.x;a.y-=b.y};cc.pAddIn=function(a,b){a.x+=b.x;a.y+=b.y};cc.pNormalizeIn=function(a){cc.pMultIn(a,1/Math.sqrt(a.x*a.x+a.y*a.y))};
cc.Touch=cc.Class.extend({_point:null,_prevPoint:null,_id:0,_startPointCaptured:false,_startPoint:null,ctor:function(a,b,c){this._point=cc.p(a||0,b||0);this._id=c||0},getLocation:function(){return{x:this._point.x,y:this._point.y}},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocation:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getDelta:function(){return cc.pSub(this._point,
this._prevPoint)},getLocationInView:function(){return{x:this._point.x,y:this._point.y}},getPreviousLocationInView:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocationInView:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getID:function(){return this._id},getId:function(){cc.log("getId is deprecated. Please use getID instead.");return this._id},setTouchInfo:function(a,b,c){this._prevPoint=this._point;this._point=cc.p(b||0,c||0);this._id=a;if(!this._startPointCaptured){this._startPoint=
cc.p(this._point);this._startPointCaptured=true}},_setPoint:function(a,b){if(b===undefined){this._point.x=a.x;this._point.y=a.y}else{this._point.x=a;this._point.y=b}},_setPrevPoint:function(a,b){this._prevPoint=b===undefined?cc.p(a.x,a.y):cc.p(a||0,b||0)}});
cc.Event=cc.Class.extend({_type:0,_isStopped:false,_currentTarget:null,_setCurrentTarget:function(a){this._currentTarget=a},ctor:function(a){this._type=a},getType:function(){return this._type},stopPropagation:function(){this._isStopped=true},isStopped:function(){return this._isStopped},getCurrentTarget:function(){return this._currentTarget}});cc.Event.TOUCH=0;cc.Event.KEYBOARD=1;cc.Event.ACCELERATION=2;cc.Event.MOUSE=3;cc.Event.CUSTOM=4;
cc.EventCustom=cc.Event.extend({_eventName:null,_userData:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.CUSTOM);this._eventName=a},setUserData:function(a){this._userData=a},getUserData:function(){return this._userData},getEventName:function(){return this._eventName}});
cc.EventMouse=cc.Event.extend({_eventType:0,_button:0,_x:0,_y:0,_prevX:0,_prevY:0,_scrollX:0,_scrollY:0,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.MOUSE);this._eventType=a},setScrollData:function(a,b){this._scrollX=a;this._scrollY=b},getScrollX:function(){return this._scrollX},getScrollY:function(){return this._scrollY},setLocation:function(a,b){this._x=a;this._y=b},getLocation:function(){return{x:this._x,y:this._y}},getLocationInView:function(){return{x:this._x,y:cc.view._designResolutionSize.height-
this._y}},_setPrevCursor:function(a,b){this._prevX=a;this._prevY=b},getDelta:function(){return{x:this._x-this._prevX,y:this._y-this._prevY}},getDeltaX:function(){return this._x-this._prevX},getDeltaY:function(){return this._y-this._prevY},setButton:function(a){this._button=a},getButton:function(){return this._button},getLocationX:function(){return this._x},getLocationY:function(){return this._y}});cc.EventMouse.NONE=0;cc.EventMouse.DOWN=1;cc.EventMouse.UP=2;cc.EventMouse.MOVE=3;
cc.EventMouse.SCROLL=4;cc.EventMouse.BUTTON_LEFT=0;cc.EventMouse.BUTTON_RIGHT=2;cc.EventMouse.BUTTON_MIDDLE=1;cc.EventMouse.BUTTON_4=3;cc.EventMouse.BUTTON_5=4;cc.EventMouse.BUTTON_6=5;cc.EventMouse.BUTTON_7=6;cc.EventMouse.BUTTON_8=7;
cc.EventTouch=cc.Event.extend({_eventCode:0,_touches:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.TOUCH);this._touches=a||[]},getEventCode:function(){return this._eventCode},getTouches:function(){return this._touches},_setEventCode:function(a){this._eventCode=a},_setTouches:function(a){this._touches=a}});cc.EventTouch.MAX_TOUCHES=5;cc.EventTouch.EventCode={BEGAN:0,MOVED:1,ENDED:2,CANCELLED:3};
cc.EventListener=cc.Class.extend({_onEvent:null,_type:0,_listenerID:null,_registered:false,_fixedPriority:0,_node:null,_paused:true,_isEnabled:true,ctor:function(a,b,c){this._onEvent=c;this._type=a||0;this._listenerID=b||""},_setPaused:function(a){this._paused=a},_isPaused:function(){return this._paused},_setRegistered:function(a){this._registered=a},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(a){this._fixedPriority=
a},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(a){this._node=a},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return this._onEvent!=null},clone:function(){return null},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}});cc.EventListener.UNKNOWN=0;cc.EventListener.TOUCH_ONE_BY_ONE=1;cc.EventListener.TOUCH_ALL_AT_ONCE=2;
cc.EventListener.KEYBOARD=3;cc.EventListener.MOUSE=4;cc.EventListener.ACCELERATION=5;cc.EventListener.CUSTOM=6;
cc._EventListenerCustom=cc.EventListener.extend({_onCustomEvent:null,ctor:function(a,b){this._onCustomEvent=b;var c=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.CUSTOM,a,function(d){c._onCustomEvent!=null&&c._onCustomEvent(d)})},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&this._onCustomEvent!=null},clone:function(){return new cc._EventListenerCustom(this._listenerID,this._onCustomEvent)}});
cc._EventListenerCustom.create=function(a,b){return new cc._EventListenerCustom(a,b)};
cc._EventListenerMouse=cc.EventListener.extend({onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,ctor:function(){var a=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.MOUSE,cc._EventListenerMouse.LISTENER_ID,function(b){var c=cc.EventMouse;switch(b._eventType){case c.DOWN:a.onMouseDown&&a.onMouseDown(b);break;case c.UP:a.onMouseUp&&a.onMouseUp(b);break;case c.MOVE:a.onMouseMove&&a.onMouseMove(b);break;case c.SCROLL:a.onMouseScroll&&a.onMouseScroll(b);break;default:break}})},
clone:function(){var a=new cc._EventListenerMouse;a.onMouseDown=this.onMouseDown;a.onMouseUp=this.onMouseUp;a.onMouseMove=this.onMouseMove;a.onMouseScroll=this.onMouseScroll;return a},checkAvailable:function(){return true}});cc._EventListenerMouse.LISTENER_ID="__cc_mouse";cc._EventListenerMouse.create=function(){return new cc._EventListenerMouse};
cc._EventListenerTouchOneByOne=cc.EventListener.extend({_claimedTouches:null,swallowTouches:false,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,cc._EventListenerTouchOneByOne.LISTENER_ID,null);this._claimedTouches=[]},setSwallowTouches:function(a){this.swallowTouches=a},clone:function(){var a=new cc._EventListenerTouchOneByOne;a.onTouchBegan=this.onTouchBegan;a.onTouchMoved=this.onTouchMoved;
a.onTouchEnded=this.onTouchEnded;a.onTouchCancelled=this.onTouchCancelled;a.swallowTouches=this.swallowTouches;return a},checkAvailable:function(){if(!this.onTouchBegan){cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable);return false}return true}});cc._EventListenerTouchOneByOne.LISTENER_ID="__cc_touch_one_by_one";cc._EventListenerTouchOneByOne.create=function(){return new cc._EventListenerTouchOneByOne};
cc._EventListenerTouchAllAtOnce=cc.EventListener.extend({onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,cc._EventListenerTouchAllAtOnce.LISTENER_ID,null)},clone:function(){var a=new cc._EventListenerTouchAllAtOnce;a.onTouchesBegan=this.onTouchesBegan;a.onTouchesMoved=this.onTouchesMoved;a.onTouchesEnded=this.onTouchesEnded;a.onTouchesCancelled=this.onTouchesCancelled;return a},
checkAvailable:function(){if(this.onTouchesBegan==null&&this.onTouchesMoved==null&&this.onTouchesEnded==null&&this.onTouchesCancelled==null){cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable);return false}return true}});cc._EventListenerTouchAllAtOnce.LISTENER_ID="__cc_touch_all_at_once";cc._EventListenerTouchAllAtOnce.create=function(){return new cc._EventListenerTouchAllAtOnce};
cc.EventListener.create=function(a){cc.assert(a&&a.event,cc._LogInfos.EventListener_create);var b=a.event;delete a.event;var c=null;if(b===cc.EventListener.TOUCH_ONE_BY_ONE)c=new cc._EventListenerTouchOneByOne;else if(b===cc.EventListener.TOUCH_ALL_AT_ONCE)c=new cc._EventListenerTouchAllAtOnce;else if(b===cc.EventListener.MOUSE)c=new cc._EventListenerMouse;else if(b===cc.EventListener.CUSTOM){c=new cc._EventListenerCustom(a.eventName,a.callback);delete a.eventName;delete a.callback}else if(b===cc.EventListener.KEYBOARD)c=
new cc._EventListenerKeyboard;else if(b===cc.EventListener.ACCELERATION){c=new cc._EventListenerAcceleration(a.callback);delete a.callback}for(var d in a)c[d]=a[d];return c};
cc._EventListenerVector=cc.Class.extend({_fixedListeners:null,_sceneGraphListeners:null,gt0Index:0,ctor:function(){this._fixedListeners=[];this._sceneGraphListeners=[]},size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return this._fixedListeners.length===0&&this._sceneGraphListeners.length===0},push:function(a){a._getFixedPriority()==0?this._sceneGraphListeners.push(a):this._fixedListeners.push(a)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=
0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0;this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}});
cc.__getListenerID=function(a){var b=cc.Event,c=a.getType();if(c===b.ACCELERATION)return cc._EventListenerAcceleration.LISTENER_ID;if(c===b.CUSTOM)return a.getEventName();if(c===b.KEYBOARD)return cc._EventListenerKeyboard.LISTENER_ID;if(c===b.MOUSE)return cc._EventListenerMouse.LISTENER_ID;c===b.TOUCH&&cc.log(cc._LogInfos.__getListenerID);return""};
cc.eventManager={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_nodePriorityMap:{},_globalZOrderNodeMap:{},_toAddedListeners:[],_dirtyNodes:[],_inDispatch:0,_isEnabled:false,_nodePriorityIndex:0,_internalCustomListenerIDs:[cc.game.EVENT_HIDE,cc.game.EVENT_SHOW],_setDirtyForNode:function(a){this._nodeListenersMap[a.__instanceId]!=null&&this._dirtyNodes.push(a);var b=a.getChildren();a=0;for(var c=b.length;a<
c;a++)this._setDirtyForNode(b[a])},pauseTarget:function(a,b){var c=this._nodeListenersMap[a.__instanceId],d,e;if(c){d=0;for(e=c.length;d<e;d++)c[d]._setPaused(true)}if(b===true){a=a.getChildren();d=0;for(e=a.length;d<e;d++)this.pauseTarget(a[d],true)}},resumeTarget:function(a,b){var c=this._nodeListenersMap[a.__instanceId],d,e;if(c){d=0;for(e=c.length;d<e;d++)c[d]._setPaused(false)}this._setDirtyForNode(a);if(b===true){a=a.getChildren();d=0;for(e=a.length;d<e;d++)this.resumeTarget(a[d],true)}},_addListener:function(a){this._inDispatch===
0?this._forceAddEventListener(a):this._toAddedListeners.push(a)},_forceAddEventListener:function(a){var b=a._getListenerID(),c=this._listenersMap[b];if(!c){c=new cc._EventListenerVector;this._listenersMap[b]=c}c.push(a);if(a._getFixedPriority()==0){this._setDirty(b,this.DIRTY_SCENE_GRAPH_PRIORITY);b=a._getSceneGraphPriority();b==null&&cc.log(cc._LogInfos.eventManager__forceAddEventListener);this._associateNodeAndEventListener(b,a);b.isRunning()&&this.resumeTarget(b)}else this._setDirty(b,this.DIRTY_FIXED_PRIORITY)},
_getListeners:function(a){return this._listenersMap[a]},_updateDirtyFlagForSceneGraph:function(){if(this._dirtyNodes.length!=0){for(var a=this._dirtyNodes,b,c,d=this._nodeListenersMap,e=0,f=a.length;e<f;e++)if(b=d[a[e].__instanceId])for(var g=0,h=b.length;g<h;g++)(c=b[g])&&this._setDirty(c._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyNodes.length=0}},_removeAllListenersInVector:function(a){if(a)for(var b,c=0;c<a.length;){b=a[c];b._setRegistered(false);if(b._getSceneGraphPriority()!=
null){this._dissociateNodeAndEventListener(b._getSceneGraphPriority(),b);b._setSceneGraphPriority(null)}if(this._inDispatch===0)cc.arrayRemoveObject(a,b);else++c}},_removeListenersForListenerID:function(a){var b=this._listenersMap[a];if(b){var c=b.getFixedPriorityListeners();this._removeAllListenersInVector(b.getSceneGraphPriorityListeners());this._removeAllListenersInVector(c);delete this._priorityDirtyFlagMap[a];if(!this._inDispatch){b.clear();delete this._listenersMap[a]}}c=this._toAddedListeners;
var d;for(b=0;b<c.length;)if((d=c[b])&&d._getListenerID()==a)cc.arrayRemoveObject(c,d);else++b},_sortEventListeners:function(a){var b=this.DIRTY_NONE,c=this._priorityDirtyFlagMap;if(c[a])b=c[a];if(b!=this.DIRTY_NONE){c[a]=this.DIRTY_NONE;b&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(a);if(b&this.DIRTY_SCENE_GRAPH_PRIORITY)if(b=cc.director.getRunningScene())this._sortListenersOfSceneGraphPriority(a,b);else c[a]=this.DIRTY_SCENE_GRAPH_PRIORITY}},_sortListenersOfSceneGraphPriority:function(a,
b){if(a=this._getListeners(a)){var c=a.getSceneGraphPriorityListeners();if(!(!c||c.length===0)){this._nodePriorityIndex=0;this._nodePriorityMap={};this._visitTarget(b,true);a.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes)}}},_sortEventListenersOfSceneGraphPriorityDes:function(a,b){var c=cc.eventManager._nodePriorityMap;if(!a||!b||!a._getSceneGraphPriority()||!b._getSceneGraphPriority())return-1;return c[b._getSceneGraphPriority().__instanceId]-c[a._getSceneGraphPriority().__instanceId]},
_sortListenersOfFixedPriority:function(a){if(a=this._listenersMap[a]){var b=a.getFixedPriorityListeners();if(!(!b||b.length===0)){b.sort(this._sortListenersOfFixedPriorityAsc);for(var c=0,d=b.length;c<d;){if(b[c]._getFixedPriority()>=0)break;++c}a.gt0Index=c}}},_sortListenersOfFixedPriorityAsc:function(a,b){return a._getFixedPriority()-b._getFixedPriority()},_onUpdateListeners:function(a){if(a=this._listenersMap[a]){var b=a.getFixedPriorityListeners(),c=a.getSceneGraphPriorityListeners(),d,e;if(c)for(d=
0;d<c.length;){e=c[d];if(e._isRegistered())++d;else cc.arrayRemoveObject(c,e)}if(b)for(d=0;d<b.length;){e=b[d];if(e._isRegistered())++d;else cc.arrayRemoveObject(b,e)}c&&c.length===0&&a.clearSceneGraphListeners();b&&b.length===0&&a.clearFixedListeners()}},_updateListeners:function(a){var b=this._inDispatch;cc.assert(b>0,cc._LogInfos.EventManager__updateListeners);if(a.getType()==cc.Event.TOUCH){this._onUpdateListeners(cc._EventListenerTouchOneByOne.LISTENER_ID);this._onUpdateListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID)}else this._onUpdateListeners(cc.__getListenerID(a));
if(!(b>1)){cc.assert(b==1,cc._LogInfos.EventManager__updateListeners_2);a=this._listenersMap;b=this._priorityDirtyFlagMap;for(var c in a)if(a[c].empty()){delete b[c];delete a[c]}c=this._toAddedListeners;if(c.length!==0){a=0;for(b=c.length;a<b;a++)this._forceAddEventListener(c[a]);this._toAddedListeners.length=0}}},_onTouchEventCallback:function(a,b){if(!a._isRegistered)return false;var c=b.event,d=b.selTouch;c._setCurrentTarget(a._node);var e=false,f,g=c.getEventCode(),h=cc.EventTouch.EventCode;if(g==
h.BEGAN){if(a.onTouchBegan)(e=a.onTouchBegan(d,c))&&a._registered&&a._claimedTouches.push(d)}else if(a._claimedTouches.length>0&&(f=a._claimedTouches.indexOf(d))!=-1){e=true;if(g===h.MOVED&&a.onTouchMoved)a.onTouchMoved(d,c);else if(g===h.ENDED){a.onTouchEnded&&a.onTouchEnded(d,c);a._registered&&a._claimedTouches.splice(f,1)}else if(g===h.CANCELLED){a.onTouchCancelled&&a.onTouchCancelled(d,c);a._registered&&a._claimedTouches.splice(f,1)}}if(c.isStopped()){cc.eventManager._updateListeners(c);return true}if(e&&
a._registered&&a.swallowTouches){b.needsMutableSet&&b.touches.splice(d,1);return true}return false},_dispatchTouchEvent:function(a){this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID);this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);var b=this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),c=this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);if(!(null==b&&null==c)){var d=a.getTouches(),e=cc.copyArray(d),f={event:a,needsMutableSet:b&&c,
touches:e,selTouch:null};if(b)for(var g=0;g<d.length;g++){f.selTouch=d[g];this._dispatchEventToListeners(b,this._onTouchEventCallback,f);if(a.isStopped())return}if(c&&e.length>0){this._dispatchEventToListeners(c,this._onTouchesEventCallback,{event:a,touches:e});if(a.isStopped())return}this._updateListeners(a)}},_onTouchesEventCallback:function(a,b){if(!a._registered)return false;var c=cc.EventTouch.EventCode,d=b.event;b=b.touches;var e=d.getEventCode();d._setCurrentTarget(a._node);if(e==c.BEGAN&&
a.onTouchesBegan)a.onTouchesBegan(b,d);else if(e==c.MOVED&&a.onTouchesMoved)a.onTouchesMoved(b,d);else if(e==c.ENDED&&a.onTouchesEnded)a.onTouchesEnded(b,d);else e==c.CANCELLED&&a.onTouchesCancelled&&a.onTouchesCancelled(b,d);if(d.isStopped()){cc.eventManager._updateListeners(d);return true}return false},_associateNodeAndEventListener:function(a,b){var c=this._nodeListenersMap[a.__instanceId];if(!c){c=[];this._nodeListenersMap[a.__instanceId]=c}c.push(b)},_dissociateNodeAndEventListener:function(a,
b){var c=this._nodeListenersMap[a.__instanceId];if(c){cc.arrayRemoveObject(c,b);c.length===0&&delete this._nodeListenersMap[a.__instanceId]}},_dispatchEventToListeners:function(a,b,c){var d=false,e=a.getFixedPriorityListeners(),f=a.getSceneGraphPriorityListeners(),g=0,h;if(e)if(e.length!==0)for(;g<a.gt0Index;++g){h=e[g];if(h.isEnabled()&&!h._isPaused()&&h._isRegistered()&&b(h,c)){d=true;break}}if(f&&!d)for(a=0;a<f.length;a++){h=f[a];if(h.isEnabled()&&!h._isPaused()&&h._isRegistered()&&b(h,c)){d=true;
break}}if(e&&!d)for(;g<e.length;++g){h=e[g];if(h.isEnabled()&&!h._isPaused()&&h._isRegistered()&&b(h,c))break}},_setDirty:function(a,b){var c=this._priorityDirtyFlagMap;c[a]=c[a]==null?b:b|c[a]},_visitTarget:function(a,b){var c=a.getChildren(),d=0,e=c.length,f=this._globalZOrderNodeMap,g=this._nodeListenersMap;if(e>0){for(var h;d<e;d++)if((h=c[d])&&h.getLocalZOrder()<0)this._visitTarget(h,false);else break;if(g[a.__instanceId]!=null){f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]);f[a.getGlobalZOrder()].push(a.__instanceId)}for(;d<
e;d++)(h=c[d])&&this._visitTarget(h,false)}else if(g[a.__instanceId]!=null){f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]);f[a.getGlobalZOrder()].push(a.__instanceId)}if(b){a=[];for(var j in f)a.push(j);a.sort(this._sortNumberAsc);j=a.length;e=this._nodePriorityMap;for(d=0;d<j;d++){b=f[a[d]];for(c=0;c<b.length;c++)e[b[c]]=++this._nodePriorityIndex}this._globalZOrderNodeMap={}}},_sortNumberAsc:function(a,b){return a-b},addListener:function(a,b){cc.assert(a&&b,cc._LogInfos.eventManager_addListener_2);
if(a instanceof cc.EventListener){if(a._isRegistered()){cc.log(cc._LogInfos.eventManager_addListener_4);return}}else{cc.assert(!cc.isNumber(b),cc._LogInfos.eventManager_addListener_3);a=cc.EventListener.create(a)}if(a.checkAvailable()){if(cc.isNumber(b)){if(b==0){cc.log(cc._LogInfos.eventManager_addListener);return}a._setSceneGraphPriority(null);a._setFixedPriority(b);a._setRegistered(true);a._setPaused(false)}else{a._setSceneGraphPriority(b);a._setFixedPriority(0);a._setRegistered(true)}this._addListener(a);
return a}},addCustomListener:function(a,b){a=new cc._EventListenerCustom(a,b);this.addListener(a,1);return a},removeListener:function(a){if(a!=null){var b,c=this._listenersMap;for(var d in c){var e=c[d],f=e.getFixedPriorityListeners();if(b=this._removeListenerInVector(e.getSceneGraphPriorityListeners(),a))this._setDirty(a._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY);else(b=this._removeListenerInVector(f,a))&&this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY);if(e.empty()){delete this._priorityDirtyFlagMap[a._getListenerID()];
delete c[d]}if(b)break}if(!b){b=this._toAddedListeners;c=0;for(d=b.length;c<d;c++){e=b[c];if(e==a){cc.arrayRemoveObject(b,e);break}}}}},_removeListenerInVector:function(a,b){if(a==null)return false;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e==b){e._setRegistered(false);if(e._getSceneGraphPriority()!=null){this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e);e._setSceneGraphPriority(null)}this._inDispatch==0&&cc.arrayRemoveObject(a,e);return true}}return false},removeListeners:function(a,
b){var c=this;if(a instanceof cc.Node){delete c._nodePriorityMap[a.__instanceId];cc.arrayRemoveObject(c._dirtyNodes,a);var d=c._nodeListenersMap[a.__instanceId];if(d){var e=cc.copyArray(d);for(d=0;d<e.length;d++)c.removeListener(e[d]);e.length=0}e=c._toAddedListeners;for(d=0;d<e.length;){var f=e[d];if(f._getSceneGraphPriority()==a){f._setSceneGraphPriority(null);f._setRegistered(false);e.splice(d,1)}else++d}if(b===true){a=a.getChildren();d=0;for(b=a.length;d<b;d++)c.removeListeners(a[d],true)}}else if(a==
cc.EventListener.TOUCH_ONE_BY_ONE)c._removeListenersForListenerID(cc._EventListenerTouchOneByOne.LISTENER_ID);else if(a==cc.EventListener.TOUCH_ALL_AT_ONCE)c._removeListenersForListenerID(cc._EventListenerTouchAllAtOnce.LISTENER_ID);else if(a==cc.EventListener.MOUSE)c._removeListenersForListenerID(cc._EventListenerMouse.LISTENER_ID);else if(a==cc.EventListener.ACCELERATION)c._removeListenersForListenerID(cc._EventListenerAcceleration.LISTENER_ID);else a==cc.EventListener.KEYBOARD?c._removeListenersForListenerID(cc._EventListenerKeyboard.LISTENER_ID):
cc.log(cc._LogInfos.eventManager_removeListeners)},removeCustomListeners:function(a){this._removeListenersForListenerID(a)},removeAllListeners:function(){var a=this._listenersMap,b=this._internalCustomListenerIDs;for(var c in a)b.indexOf(c)===-1&&this._removeListenersForListenerID(c)},setPriority:function(a,b){if(a!=null){var c=this._listenersMap;for(var d in c){var e=c[d].getFixedPriorityListeners();if(e)if(e.indexOf(a)!=-1){a._getSceneGraphPriority()!=null&&cc.log(cc._LogInfos.eventManager_setPriority);
if(a._getFixedPriority()!==b){a._setFixedPriority(b);this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY)}return}}}},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},dispatchEvent:function(a){if(this._isEnabled){this._updateDirtyFlagForSceneGraph();this._inDispatch++;if(!a||!a.getType)throw"event is undefined";if(a.getType()==cc.Event.TOUCH)this._dispatchTouchEvent(a);else{var b=cc.__getListenerID(a);this._sortEventListeners(b);b=this._listenersMap[b];
b!=null&&this._dispatchEventToListeners(b,this._onListenerCallback,a);this._updateListeners(a)}this._inDispatch--}},_onListenerCallback:function(a,b){b._setCurrentTarget(a._getSceneGraphPriority());a._onEvent(b);return b.isStopped()},dispatchCustomEvent:function(a,b){a=new cc.EventCustom(a);a.setUserData(b);this.dispatchEvent(a)}};cc.EventHelper=function(){};
cc.EventHelper.prototype={constructor:cc.EventHelper,apply:function(a){a.addEventListener=cc.EventHelper.prototype.addEventListener;a.hasEventListener=cc.EventHelper.prototype.hasEventListener;a.removeEventListener=cc.EventHelper.prototype.removeEventListener;a.dispatchEvent=cc.EventHelper.prototype.dispatchEvent},addEventListener:function(a,b,c){if(this._listeners===undefined)this._listeners={};var d=this._listeners;if(d[a]===undefined)d[a]=[];this.hasEventListener(a,b,c)||d[a].push({callback:b,
eventTarget:c})},hasEventListener:function(a,b,c){if(this._listeners===undefined)return false;var d=this._listeners;if(d[a]!==undefined){a=0;for(var e=d.length;a<e;a++){var f=d[a];if(f.callback==b&&f.eventTarget==c)return true}}return false},removeEventListener:function(a,b){if(this._listeners!==undefined){a=this._listeners[a];if(a!==undefined)for(var c=0;c<a.length;)if(a[c].eventTarget==b)a.splice(c,1);else c++}},dispatchEvent:function(a,b){if(this._listeners!==undefined){if(b==null)b=true;a=this._listeners[a];
if(a!==undefined){for(var c=[],d=a.length,e=0;e<d;e++)c[e]=a[e];for(e=0;e<d;e++)c[e].callback.call(c[e].eventTarget,this);if(b)a.length=0}}}};
cc._tmp.PrototypeCCNode=function(){var a=cc.Node.prototype;cc.defineGetterSetter(a,"x",a.getPositionX,a.setPositionX);cc.defineGetterSetter(a,"y",a.getPositionY,a.setPositionY);cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth);cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight);cc.defineGetterSetter(a,"anchorX",a._getAnchorX,a._setAnchorX);cc.defineGetterSetter(a,"anchorY",a._getAnchorY,a._setAnchorY);cc.defineGetterSetter(a,"skewX",a.getSkewX,a.setSkewX);cc.defineGetterSetter(a,"skewY",
a.getSkewY,a.setSkewY);cc.defineGetterSetter(a,"zIndex",a.getLocalZOrder,a.setLocalZOrder);cc.defineGetterSetter(a,"vertexZ",a.getVertexZ,a.setVertexZ);cc.defineGetterSetter(a,"rotation",a.getRotation,a.setRotation);cc.defineGetterSetter(a,"rotationX",a.getRotationX,a.setRotationX);cc.defineGetterSetter(a,"rotationY",a.getRotationY,a.setRotationY);cc.defineGetterSetter(a,"scale",a.getScale,a.setScale);cc.defineGetterSetter(a,"scaleX",a.getScaleX,a.setScaleX);cc.defineGetterSetter(a,"scaleY",a.getScaleY,
a.setScaleY);cc.defineGetterSetter(a,"children",a.getChildren);cc.defineGetterSetter(a,"childrenCount",a.getChildrenCount);cc.defineGetterSetter(a,"parent",a.getParent,a.setParent);cc.defineGetterSetter(a,"visible",a.isVisible,a.setVisible);cc.defineGetterSetter(a,"running",a.isRunning);cc.defineGetterSetter(a,"ignoreAnchor",a.isIgnoreAnchorPointForPosition,a.ignoreAnchorPointForPosition);cc.defineGetterSetter(a,"actionManager",a.getActionManager,a.setActionManager);cc.defineGetterSetter(a,"scheduler",
a.getScheduler,a.setScheduler);cc.defineGetterSetter(a,"shaderProgram",a.getShaderProgram,a.setShaderProgram);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB);cc.defineGetterSetter(a,"cascadeOpacity",a.isCascadeOpacityEnabled,a.setCascadeOpacityEnabled);cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"cascadeColor",a.isCascadeColorEnabled,a.setCascadeColorEnabled)};cc.NODE_TAG_INVALID=-1;
cc.s_globalOrderOfArrival=1;
cc.Node=cc.Class.extend({_localZOrder:0,_globalZOrder:0,_vertexZ:0,_rotationX:0,_rotationY:0,_scaleX:1,_scaleY:1,_position:null,_normalizedPosition:null,_usingNormalizedPosition:false,_normalizedPositionDirty:false,_skewX:0,_skewY:0,_children:null,_visible:true,_anchorPoint:null,_anchorPointInPoints:null,_contentSize:null,_running:false,_parent:null,_ignoreAnchorPointForPosition:false,tag:cc.NODE_TAG_INVALID,userData:null,userObject:null,_transformDirty:true,_inverseDirty:true,_cacheDirty:false,_cachedParent:null,
_transformGLDirty:null,_transform:null,_transformWorld:null,_inverse:null,_reorderChildDirty:false,_shaderProgram:null,arrivalOrder:0,_actionManager:null,_scheduler:null,_eventDispatcher:null,_initializedNode:false,_additionalTransformDirty:false,_additionalTransform:null,_componentContainer:null,_isTransitionFinished:false,_rotationRadiansX:0,_rotationRadiansY:0,_className:"Node",_showNode:false,_name:"",_displayedOpacity:255,_realOpacity:255,_displayedColor:null,_realColor:null,_cascadeColorEnabled:false,
_cascadeOpacityEnabled:false,_hashOfName:0,_curLevel:-1,_rendererCmd:null,_renderCmdDirty:false,_initNode:function(){var a=this;a._anchorPoint=cc.p(0,0);a._anchorPointInPoints=cc.p(0,0);a._contentSize=cc.size(0,0);a._position=cc.p(0,0);a._normalizedPosition=cc.p(0,0);a._children=[];a._transform={a:1,b:0,c:0,d:1,tx:0,ty:0};a._transformWorld={a:1,b:0,c:0,d:1,tx:0,ty:0};var b=cc.director;a._actionManager=b.getActionManager();a._scheduler=b.getScheduler();a._initializedNode=true;a._additionalTransform=
cc.affineTransformMakeIdentity();if(cc.ComponentContainer)a._componentContainer=new cc.ComponentContainer(a);this._realOpacity=this._displayedOpacity=255;this._displayedColor=cc.color(255,255,255,255);this._realColor=cc.color(255,255,255,255);this._cascadeOpacityEnabled=this._cascadeColorEnabled=false},init:function(){this._initializedNode===false&&this._initNode();return true},_arrayMakeObjectsPerformSelector:function(a,b){if(!(!a||a.length===0)){var c=a.length,d;d=cc.Node._StateCallbackType;switch(b){case d.onEnter:for(b=
0;b<c;b++)(d=a[b])&&d.onEnter();break;case d.onExit:for(b=0;b<c;b++)(d=a[b])&&d.onExit();break;case d.onEnterTransitionDidFinish:for(b=0;b<c;b++)(d=a[b])&&d.onEnterTransitionDidFinish();break;case d.cleanup:for(b=0;b<c;b++)(d=a[b])&&d.cleanup();break;case d.updateTransform:for(b=0;b<c;b++)(d=a[b])&&d.updateTransform();break;case d.onExitTransitionDidStart:for(b=0;b<c;b++)(d=a[b])&&d.onExitTransitionDidStart();break;case d.sortAllChildren:for(b=0;b<c;b++)(d=a[b])&&d.sortAllChildren();break;default:cc.assert(0,
cc._LogInfos.Node__arrayMakeObjectsPerformSelector);break}}},setNodeDirty:null,attr:function(a){for(var b in a)this[b]=a[b]},getSkewX:function(){return this._skewX},setSkewX:function(a){this._skewX=a;this.setNodeDirty()},getSkewY:function(){return this._skewY},setSkewY:function(a){this._skewY=a;this.setNodeDirty()},setLocalZOrder:function(a){this._localZOrder=a;this._parent&&this._parent.reorderChild(this,a);cc.eventManager._setDirtyForNode(this)},_setLocalZOrder:function(a){this._localZOrder=a},
getLocalZOrder:function(){return this._localZOrder},getZOrder:function(){cc.log(cc._LogInfos.Node_getZOrder);return this.getLocalZOrder()},setZOrder:function(a){cc.log(cc._LogInfos.Node_setZOrder);this.setLocalZOrder(a)},setGlobalZOrder:function(a){if(this._globalZOrder!=a){this._globalZOrder=a;cc.eventManager._setDirtyForNode(this)}},getGlobalZOrder:function(){return this._globalZOrder},getVertexZ:function(){return this._vertexZ},setVertexZ:function(a){this._vertexZ=a},getRotation:function(){this._rotationX!==
this._rotationY&&cc.log(cc._LogInfos.Node_getRotation);return this._rotationX},setRotation:function(a){this._rotationX=this._rotationY=a;this._rotationRadiansX=this._rotationX*0.017453292519943295;this._rotationRadiansY=this._rotationY*0.017453292519943295;this.setNodeDirty()},getRotationX:function(){return this._rotationX},setRotationX:function(a){this._rotationX=a;this._rotationRadiansX=this._rotationX*0.017453292519943295;this.setNodeDirty()},getRotationY:function(){return this._rotationY},setRotationY:function(a){this._rotationY=
a;this._rotationRadiansY=this._rotationY*0.017453292519943295;this.setNodeDirty()},getScale:function(){this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale);return this._scaleX},setScale:function(a,b){this._scaleX=a;this._scaleY=b||b===0?b:a;this.setNodeDirty()},getScaleX:function(){return this._scaleX},setScaleX:function(a){this._scaleX=a;this.setNodeDirty()},getScaleY:function(){return this._scaleY},setScaleY:function(a){this._scaleY=a;this.setNodeDirty()},setPosition:function(a,b){var c=
this._position;if(b===undefined){c.x=a.x;c.y=a.y}else{c.x=a;c.y=b}this.setNodeDirty();this._usingNormalizedPosition=false},setNormalizedPosition:function(a,b){var c=this._normalizedPosition;if(b===undefined){c.x=a.x;c.y=a.y}else{c.x=a;c.y=b}this.setNodeDirty();this._normalizedPositionDirty=this._usingNormalizedPosition=true},getPosition:function(){return cc.p(this._position)},getNormalizedPosition:function(){return cc.p(this._normalizedPosition)},getPositionX:function(){return this._position.x},setPositionX:function(a){this._position.x=
a;this.setNodeDirty()},getPositionY:function(){return this._position.y},setPositionY:function(a){this._position.y=a;this.setNodeDirty()},getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},isVisible:function(){return this._visible},setVisible:function(a){if(this._visible!=a){(this._visible=a)&&this.setNodeDirty();cc.renderer.childrenOrderDirty=true}},getAnchorPoint:function(){return cc.p(this._anchorPoint)},setAnchorPoint:function(a,b){var c=this._anchorPoint;
if(b===undefined){if(a.x===c.x&&a.y===c.y)return;c.x=a.x;c.y=a.y}else{if(a===c.x&&b===c.y)return;c.x=a;c.y=b}a=this._anchorPointInPoints;b=this._contentSize;a.x=b.width*c.x;a.y=b.height*c.y;this.setNodeDirty()},_getAnchor:function(){return this._anchorPoint},_setAnchor:function(a){var b=a.x;a=a.y;if(this._anchorPoint.x!==b){this._anchorPoint.x=b;this._anchorPointInPoints.x=this._contentSize.width*b}if(this._anchorPoint.y!==a){this._anchorPoint.y=a;this._anchorPointInPoints.y=this._contentSize.height*
a}this.setNodeDirty()},_getAnchorX:function(){return this._anchorPoint.x},_setAnchorX:function(a){if(this._anchorPoint.x!==a){this._anchorPoint.x=a;this._anchorPointInPoints.x=this._contentSize.width*a;this.setNodeDirty()}},_getAnchorY:function(){return this._anchorPoint.y},_setAnchorY:function(a){if(this._anchorPoint.y!==a){this._anchorPoint.y=a;this._anchorPointInPoints.y=this._contentSize.height*a;this.setNodeDirty()}},getAnchorPointInPoints:function(){return cc.p(this._anchorPointInPoints)},_getWidth:function(){return this._contentSize.width},
_setWidth:function(a){this._contentSize.width=a;this._anchorPointInPoints.x=a*this._anchorPoint.x;this.setNodeDirty()},_getHeight:function(){return this._contentSize.height},_setHeight:function(a){this._contentSize.height=a;this._anchorPointInPoints.y=a*this._anchorPoint.y;this.setNodeDirty()},getContentSize:function(){return cc.size(this._contentSize)},setContentSize:function(a,b){var c=this._contentSize;if(b===undefined){if(a.width===c.width&&a.height===c.height)return;c.width=a.width;c.height=
a.height}else{if(a===c.width&&b===c.height)return;c.width=a;c.height=b}a=this._anchorPointInPoints;b=this._anchorPoint;a.x=c.width*b.x;a.y=c.height*b.y;this.setNodeDirty()},isRunning:function(){return this._running},getParent:function(){return this._parent},setParent:function(a){this._parent=a},isIgnoreAnchorPointForPosition:function(){return this._ignoreAnchorPointForPosition},ignoreAnchorPointForPosition:function(a){if(a!=this._ignoreAnchorPointForPosition){this._ignoreAnchorPointForPosition=a;
this.setNodeDirty()}},getTag:function(){return this.tag},setTag:function(a){this.tag=a},setName:function(a){this._name=a},getName:function(){return this._name},getUserData:function(){return this.userData},setUserData:function(a){this.userData=a},getUserObject:function(){return this.userObject},setUserObject:function(a){if(this.userObject!=a)this.userObject=a},getOrderOfArrival:function(){return this.arrivalOrder},setOrderOfArrival:function(a){this.arrivalOrder=a},getActionManager:function(){if(!this._actionManager)this._actionManager=
cc.director.getActionManager();return this._actionManager},setActionManager:function(a){if(this._actionManager!=a){this.stopAllActions();this._actionManager=a}},getScheduler:function(){if(!this._scheduler)this._scheduler=cc.director.getScheduler();return this._scheduler},setScheduler:function(a){if(this._scheduler!=a){this.unscheduleAllCallbacks();this._scheduler=a}},boundingBox:function(){cc.log(cc._LogInfos.Node_boundingBox);return this.getBoundingBox()},getBoundingBox:function(){var a=cc.rect(0,
0,this._contentSize.width,this._contentSize.height);return cc._rectApplyAffineTransformIn(a,this.getNodeToParentTransform())},cleanup:function(){this.stopAllActions();this.unscheduleAllCallbacks();cc.eventManager.removeListeners(this);this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.cleanup)},getChildByTag:function(a){var b=this._children;if(b!=null)for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.tag==a)return d}return null},getChildByName:function(a){if(!a){cc.log("Invalid name");
return null}for(var b=this._children,c=0,d=b.length;c<d;c++)if(b[c]._name==a)return b[c];return null},addChild:function(a,b,c){b=b===undefined?a._localZOrder:b;var d,e=false;if(cc.isUndefined(c)){c=undefined;d=a._name}else if(cc.isString(c)){d=c;c=undefined}else if(cc.isNumber(c)){e=true;d=""}cc.assert(a,cc._LogInfos.Node_addChild_3);cc.assert(a._parent===null,"child already added. It can't be added again");this._addChildHelper(a,b,c,d,e)},_addChildHelper:function(a,b,c,d,e){if(!this._children)this._children=
[];this._insertChild(a,b);e?a.setTag(c):a.setName(d);a.setParent(this);a.setOrderOfArrival(cc.s_globalOrderOfArrival++);if(this._running){a.onEnter();this._isTransitionFinished&&a.onEnterTransitionDidFinish()}this._cascadeColorEnabled&&this._enableCascadeColor();this._cascadeOpacityEnabled&&this._enableCascadeOpacity()},removeFromParent:function(a){if(this._parent){if(a==null)a=true;this._parent.removeChild(this,a)}},removeFromParentAndCleanup:function(a){cc.log(cc._LogInfos.Node_removeFromParentAndCleanup);
this.removeFromParent(a)},removeChild:function(a,b){if(this._children.length!==0){if(b==null)b=true;this._children.indexOf(a)>-1&&this._detachChild(a,b);this.setNodeDirty();cc.renderer.childrenOrderDirty=true}},removeChildByTag:function(a,b){a===cc.NODE_TAG_INVALID&&cc.log(cc._LogInfos.Node_removeChildByTag);var c=this.getChildByTag(a);c==null?cc.log(cc._LogInfos.Node_removeChildByTag_2,a):this.removeChild(c,b)},removeAllChildrenWithCleanup:function(a){this.removeAllChildren(a)},removeAllChildren:function(a){var b=
this._children;if(b!=null){if(a==null)a=true;for(var c=0;c<b.length;c++){var d=b[c];if(d){if(this._running){d.onExitTransitionDidStart();d.onExit()}a&&d.cleanup();d.parent=null}}this._children.length=0}},_detachChild:function(a,b){if(this._running){a.onExitTransitionDidStart();a.onExit()}b&&a.cleanup();a.parent=null;a._cachedParent=null;cc.arrayRemoveObject(this._children,a)},_insertChild:function(a,b){cc.renderer.childrenOrderDirty=this._reorderChildDirty=true;this._children.push(a);a._setLocalZOrder(b)},
reorderChild:function(a,b){cc.assert(a,cc._LogInfos.Node_reorderChild);cc.renderer.childrenOrderDirty=this._reorderChildDirty=true;a.arrivalOrder=cc.s_globalOrderOfArrival;cc.s_globalOrderOfArrival++;a._setLocalZOrder(b);this.setNodeDirty()},sortAllChildren:function(){if(this._reorderChildDirty){var a=this._children,b=a.length,c,d,e;for(c=1;c<b;c++){e=a[c];for(d=c-1;d>=0;){if(e._localZOrder<a[d]._localZOrder)a[d+1]=a[d];else if(e._localZOrder===a[d]._localZOrder&&e.arrivalOrder<a[d].arrivalOrder)a[d+
1]=a[d];else break;d--}a[d+1]=e}this._reorderChildDirty=false}},draw:function(){},transformAncestors:function(){if(this._parent!=null){this._parent.transformAncestors();this._parent.transform()}},onEnter:function(){this._isTransitionFinished=false;this._running=true;this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.onEnter);this.resume()},onEnterTransitionDidFinish:function(){this._isTransitionFinished=true;this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.onEnterTransitionDidFinish)},
onExitTransitionDidStart:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.onExitTransitionDidStart)},onExit:function(){this._running=false;this.pause();this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.onExit);this.removeAllComponents()},runAction:function(a){cc.assert(a,cc._LogInfos.Node_runAction);this.actionManager.addAction(a,this,!this._running);return a},stopAllActions:function(){this.actionManager&&this.actionManager.removeAllActionsFromTarget(this)},
stopAction:function(a){this.actionManager.removeAction(a)},stopActionByTag:function(a){a===cc.ACTION_TAG_INVALID?cc.log(cc._LogInfos.Node_stopActionByTag):this.actionManager.removeActionByTag(a,this)},getActionByTag:function(a){if(a===cc.ACTION_TAG_INVALID){cc.log(cc._LogInfos.Node_getActionByTag);return null}return this.actionManager.getActionByTag(a,this)},getNumberOfRunningActions:function(){return this.actionManager.numberOfRunningActionsInTarget(this)},scheduleUpdate:function(){this.scheduleUpdateWithPriority(0)},
scheduleUpdateWithPriority:function(a){this.scheduler.scheduleUpdateForTarget(this,a,!this._running)},unscheduleUpdate:function(){this.scheduler.unscheduleUpdateForTarget(this)},schedule:function(a,b,c,d){b=b||0;cc.assert(a,cc._LogInfos.Node_schedule);cc.assert(b>=0,cc._LogInfos.Node_schedule_2);c=c==null?cc.REPEAT_FOREVER:c;d=d||0;this.scheduler.scheduleCallbackForTarget(this,a,b,c,d,!this._running)},scheduleOnce:function(a,b){this.schedule(a,0,0,b)},unschedule:function(a){a&&this.scheduler.unscheduleCallbackForTarget(this,
a)},unscheduleAllCallbacks:function(){this.scheduler.unscheduleAllCallbacksForTarget(this)},resumeSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_resumeSchedulerAndActions);this.resume()},resume:function(){this.scheduler.resumeTarget(this);this.actionManager&&this.actionManager.resumeTarget(this);cc.eventManager.resumeTarget(this)},pauseSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_pauseSchedulerAndActions);this.pause()},pause:function(){this.scheduler.pauseTarget(this);this.actionManager&&
this.actionManager.pauseTarget(this);cc.eventManager.pauseTarget(this)},setAdditionalTransform:function(a){this._additionalTransform=a;this._additionalTransformDirty=this._transformDirty=true},getParentToNodeTransform:function(){if(this._inverseDirty){this._inverse=cc.affineTransformInvert(this.getNodeToParentTransform());this._inverseDirty=false}return this._inverse},parentToNodeTransform:function(){return this.getParentToNodeTransform()},getNodeToWorldTransform:function(){for(var a=this.getNodeToParentTransform(),
b=this._parent;b!=null;b=b.parent)a=cc.affineTransformConcat(a,b.getNodeToParentTransform());return a},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getWorldToNodeTransform:function(){return cc.affineTransformInvert(this.getNodeToWorldTransform())},worldToNodeTransform:function(){return this.getWorldToNodeTransform()},convertToNodeSpace:function(a){return cc.pointApplyAffineTransform(a,this.getWorldToNodeTransform())},convertToWorldSpace:function(a){a=a||cc.p(0,0);return cc.pointApplyAffineTransform(a,
this.getNodeToWorldTransform())},convertToNodeSpaceAR:function(a){return cc.pSub(this.convertToNodeSpace(a),this._anchorPointInPoints)},convertToWorldSpaceAR:function(a){a=a||cc.p(0,0);return this.convertToWorldSpace(cc.pAdd(a,this._anchorPointInPoints))},_convertToWindowSpace:function(a){a=this.convertToWorldSpace(a);return cc.director.convertToUI(a)},convertTouchToNodeSpace:function(a){return this.convertToNodeSpace(a.getLocation())},convertTouchToNodeSpaceAR:function(a){a=a.getLocation();a=cc.director.convertToGL(a);
return this.convertToNodeSpaceAR(a)},update:function(a){this._componentContainer&&!this._componentContainer.isEmpty()&&this._componentContainer.visit(a)},updateTransform:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node._StateCallbackType.updateTransform)},retain:function(){},release:function(){},getComponent:function(a){if(this._componentContainer)return this._componentContainer.getComponent(a);return null},addComponent:function(a){this._componentContainer&&this._componentContainer.add(a)},
removeComponent:function(a){if(this._componentContainer)return this._componentContainer.remove(a);return false},removeAllComponents:function(){this._componentContainer&&this._componentContainer.removeAll()},grid:null,ctor:null,visit:null,transform:null,nodeToParentTransform:function(){return this.getNodeToParentTransform()},getNodeToParentTransform:null,_setNodeDirtyForCache:function(){if(this._cacheDirty===false){this._cacheDirty=true;var a=this._cachedParent;a&&a!=this&&a._setNodeDirtyForCache()}},
_setCachedParent:function(a){if(this._cachedParent!=a){this._cachedParent=a;for(var b=this._children,c=0,d=b.length;c<d;c++)b[c]._setCachedParent(a)}},getCamera:function(){if(!this._camera)this._camera=new cc.Camera;return this._camera},getGrid:function(){return this.grid},setGrid:function(a){this.grid=a},getShaderProgram:function(){return this._shaderProgram},setShaderProgram:function(a){this._shaderProgram=a},getGLServerState:function(){return this._glServerState},setGLServerState:function(a){this._glServerState=
a},getBoundingBoxToWorld:function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height),b=this.getNodeToWorldTransform();a=cc.rectApplyAffineTransform(a,this.getNodeToWorldTransform());if(!this._children)return a;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];if(e&&e._visible)if(e=e._getBoundingBoxToCurrentNode(b))a=cc.rectUnion(a,e)}return a},_getBoundingBoxToCurrentNode:function(a){var b=cc.rect(0,0,this._contentSize.width,this._contentSize.height);a=a==null?this.getNodeToParentTransform():
cc.affineTransformConcat(this.getNodeToParentTransform(),a);b=cc.rectApplyAffineTransform(b,a);if(!this._children)return b;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];if(e&&e._visible)if(e=e._getBoundingBoxToCurrentNode(a))b=cc.rectUnion(b,e)}return b},_getNodeToParentTransformForWebGL:function(){var a=this;if(a._usingNormalizedPosition&&a._parent){var b=a._parent._contentSize;a._position.x=a._normalizedPosition.x*b.width;a._position.y=a._normalizedPosition.y*b.height;a._normalizedPositionDirty=
false}if(a._transformDirty){b=a._position.x;var c=a._position.y,d=a._anchorPointInPoints.x,e=-d,f=a._anchorPointInPoints.y,g=-f,h=a._scaleX,j=a._scaleY;if(a._ignoreAnchorPointForPosition){b+=d;c+=f}var k=1,m=0,n=1,o=0;if(a._rotationX!==0||a._rotationY!==0){k=Math.cos(-a._rotationRadiansX);m=Math.sin(-a._rotationRadiansX);n=Math.cos(-a._rotationRadiansY);o=Math.sin(-a._rotationRadiansY)}var r=a._skewX||a._skewY;if(!r&&(d!==0||f!==0)){b+=n*e*h+-m*g*j;c+=o*e*h+k*g*j}var q=a._transform;q.a=n*h;q.b=o*
h;q.c=-m*j;q.d=k*j;q.tx=b;q.ty=c;if(r){q=cc.affineTransformConcat({a:1,b:Math.tan(cc.degreesToRadians(a._skewY)),c:Math.tan(cc.degreesToRadians(a._skewX)),d:1,tx:0,ty:0},q);if(d!==0||f!==0)q=cc.affineTransformTranslate(q,e,g)}if(a._additionalTransformDirty){q=cc.affineTransformConcat(q,a._additionalTransform);a._additionalTransformDirty=false}a._transform=q;a._transformDirty=false}return a._transform},_updateColor:function(){},getOpacity:function(){return this._realOpacity},getDisplayedOpacity:function(){return this._displayedOpacity},
setOpacity:function(a){this._displayedOpacity=this._realOpacity=a;var b=255,c=this._parent;if(c&&c.cascadeOpacity)b=c.getDisplayedOpacity();this.updateDisplayedOpacity(b);this._displayedColor.a=this._realColor.a=a},updateDisplayedOpacity:function(a){this._displayedOpacity=this._realOpacity*a/255;if(this._rendererCmd&&this._rendererCmd._opacity!==undefined)this._rendererCmd._opacity=this._displayedOpacity/255;if(this._cascadeOpacityEnabled){a=this._children;for(var b=0;b<a.length;b++){var c=a[b];c&&
c.updateDisplayedOpacity(this._displayedOpacity)}}},isCascadeOpacityEnabled:function(){return this._cascadeOpacityEnabled},setCascadeOpacityEnabled:function(a){if(this._cascadeOpacityEnabled!==a)(this._cascadeOpacityEnabled=a)?this._enableCascadeOpacity():this._disableCascadeOpacity()},_enableCascadeOpacity:function(){var a=255,b=this._parent;if(b&&b.cascadeOpacity)a=b.getDisplayedOpacity();this.updateDisplayedOpacity(a)},_disableCascadeOpacity:function(){this._displayedOpacity=this._realOpacity;
for(var a=this._children,b=0;b<a.length;b++){var c=a[b];c&&c.updateDisplayedOpacity(255)}},getColor:function(){var a=this._realColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedColor:function(){var a=this._displayedColor;return cc.color(a.r,a.g,a.b,a.a)},setColor:function(a){var b=this._displayedColor,c=this._realColor;b.r=c.r=a.r;b.g=c.g=a.g;b.b=c.b=a.b;a=this._parent;this.updateDisplayedColor(a&&a.cascadeColor?a.getDisplayedColor():cc.color.WHITE)},updateDisplayedColor:function(a){var b=this._displayedColor,
c=this._realColor;b.r=0|c.r*a.r/255;b.g=0|c.g*a.g/255;b.b=0|c.b*a.b/255;if(this._cascadeColorEnabled){a=this._children;for(c=0;c<a.length;c++){var d=a[c];d&&d.updateDisplayedColor(b)}}},isCascadeColorEnabled:function(){return this._cascadeColorEnabled},setCascadeColorEnabled:function(a){if(this._cascadeColorEnabled!==a)(this._cascadeColorEnabled=a)?this._enableCascadeColor():this._disableCascadeColor()},_enableCascadeColor:function(){var a=this._parent;this.updateDisplayedColor(a&&a.cascadeColor?
a.getDisplayedColor():cc.color.WHITE)},_disableCascadeColor:function(){var a=this._displayedColor,b=this._realColor;a.r=b.r;a.g=b.g;a.b=b.b;a=this._children;b=cc.color.WHITE;for(var c=0;c<a.length;c++){var d=a[c];d&&d.updateDisplayedColor(b)}},setOpacityModifyRGB:function(){},isOpacityModifyRGB:function(){return false},_initRendererCmd:function(){},_transformForRenderer:null});cc.Node.create=function(){return new cc.Node};
cc.Node._StateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,updateTransform:5,onExitTransitionDidStart:6,sortAllChildren:7};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){var _p=cc.Node.prototype;_p.ctor=function(){this._initNode();this._initRendererCmd()};_p.setNodeDirty=function(){var a=this;if(a._transformDirty===false){a._setNodeDirtyForCache();a._renderCmdDiry=a._transformDirty=a._inverseDirty=true;cc.renderer.pushDirtyNode(this)}};_p.visit=function(){var a=this;if(a._visible){if(a._parent)a._curLevel=a._parent._curLevel+1;var b,c=a._children,d;a.transform();var e=c.length;if(e>0){a.sortAllChildren();for(b=0;b<e;b++){d=
c[b];if(d._localZOrder<0)d.visit();else break}for(this._rendererCmd&&cc.renderer.pushRenderCommand(this._rendererCmd);b<e;b++)c[b].visit()}else this._rendererCmd&&cc.renderer.pushRenderCommand(this._rendererCmd);this._cacheDirty=false}};_p._transformForRenderer=function(){var a=this.nodeToParentTransform(),b=this._transformWorld;if(this._parent){var c=this._parent._transformWorld;b.a=a.a*c.a+a.b*c.c;b.b=a.a*c.b+a.b*c.d;b.c=a.c*c.a+a.d*c.c;b.d=a.c*c.b+a.d*c.d;if(!this._skewX||this._skewY){var d=this._parent._transform,
e=-(d.b+d.c)*a.tx;b.tx=a.tx*c.a+a.ty*c.c+c.tx+-(d.b+d.c)*a.ty;b.ty=a.tx*c.b+a.ty*c.d+c.ty+e}else{b.tx=a.tx*c.a+a.ty*c.c+c.tx;b.ty=a.tx*c.b+a.ty*c.d+c.ty}}else{b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;b.tx=a.tx;b.ty=a.ty}this._renderCmdDiry=false;if(!(!this._children||this._children.length===0)){c=this._children;a=0;for(b=c.length;a<b;a++)c[a]._transformForRenderer()}};_p.transform=function(){var a=this.getNodeToParentTransform(),b=this._transformWorld;if(this._parent){var c=this._parent._transformWorld;b.a=
a.a*c.a+a.b*c.c;b.b=a.a*c.b+a.b*c.d;b.c=a.c*c.a+a.d*c.c;b.d=a.c*c.b+a.d*c.d;var d=this._parent._transform,e=-(d.b+d.c)*a.tx;b.tx=a.tx*c.a+a.ty*c.c+c.tx+-(d.b+d.c)*a.ty;b.ty=a.tx*c.b+a.ty*c.d+c.ty+e}else{b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;b.tx=a.tx;b.ty=a.ty}};_p.getNodeToParentTransform=function(){var a=this;if(a._usingNormalizedPosition&&a._parent){var b=a._parent._contentSize;a._position.x=a._normalizedPosition.x*b.width;a._position.y=a._normalizedPosition.y*b.height;a._normalizedPositionDirty=false}if(a._transformDirty){b=
a._transform;b.tx=a._position.x;b.ty=a._position.y;var c=1,d=0;if(a._rotationX){c=Math.cos(a._rotationRadiansX);d=Math.sin(a._rotationRadiansX)}b.a=b.d=c;b.b=-d;b.c=d;var e=a._scaleX,f=a._scaleY,g=a._anchorPointInPoints.x,h=a._anchorPointInPoints.y,j=e<1.0E-6&&e>-1.0E-6?1.0E-6:e,k=f<1.0E-6&&f>-1.0E-6?1.0E-6:f;if(a._skewX||a._skewY){var m=Math.tan(-a._skewX*Math.PI/180),n=Math.tan(-a._skewY*Math.PI/180);if(m===Infinity)m=99999999;if(n===Infinity)n=99999999;var o=h*m*j,r=g*n*k;b.a=c+-d*n;b.b=c*m+-d;
b.c=d+c*n;b.d=d*m+c;b.tx+=c*o+-d*r;b.ty+=d*o+c*r}if(e!==1||f!==1){b.a*=j;b.c*=j;b.b*=k;b.d*=k}b.tx+=c*-g*j+-d*h*k;b.ty-=d*-g*j+c*h*k;if(a._ignoreAnchorPointForPosition){b.tx+=g;b.ty+=h}if(a._additionalTransformDirty){a._transform=cc.affineTransformConcat(b,a._additionalTransform);a._additionalTransformDirty=false}a._transformDirty=false}return a._transform};_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLCCNode),cc._LogInfos.MissingFile,"BaseNodesWebGL.js");cc._tmp.WebGLCCNode();delete cc._tmp.WebGLCCNode}
cc.assert(cc.isFunction(cc._tmp.PrototypeCCNode),cc._LogInfos.MissingFile,"BaseNodesPropertyDefine.js");cc._tmp.PrototypeCCNode();delete cc._tmp.PrototypeCCNode;
cc._tmp.PrototypeTexture2D=function(){var a=cc.Texture2D;a.PVRImagesHavePremultipliedAlpha=function(e){cc.PVRHaveAlphaPremultiplied_=e};a.PIXEL_FORMAT_RGBA8888=2;a.PIXEL_FORMAT_RGB888=3;a.PIXEL_FORMAT_RGB565=4;a.PIXEL_FORMAT_A8=5;a.PIXEL_FORMAT_I8=6;a.PIXEL_FORMAT_AI88=7;a.PIXEL_FORMAT_RGBA4444=8;a.PIXEL_FORMAT_RGB5A1=7;a.PIXEL_FORMAT_PVRTC4=9;a.PIXEL_FORMAT_PVRTC2=10;a.PIXEL_FORMAT_DEFAULT=a.PIXEL_FORMAT_RGBA8888;var b=cc.Texture2D._M={};b[a.PIXEL_FORMAT_RGBA8888]="RGBA8888";b[a.PIXEL_FORMAT_RGB888]=
"RGB888";b[a.PIXEL_FORMAT_RGB565]="RGB565";b[a.PIXEL_FORMAT_A8]="A8";b[a.PIXEL_FORMAT_I8]="I8";b[a.PIXEL_FORMAT_AI88]="AI88";b[a.PIXEL_FORMAT_RGBA4444]="RGBA4444";b[a.PIXEL_FORMAT_RGB5A1]="RGB5A1";b[a.PIXEL_FORMAT_PVRTC4]="PVRTC4";b[a.PIXEL_FORMAT_PVRTC2]="PVRTC2";var c=cc.Texture2D._B={};c[a.PIXEL_FORMAT_RGBA8888]=32;c[a.PIXEL_FORMAT_RGB888]=24;c[a.PIXEL_FORMAT_RGB565]=16;c[a.PIXEL_FORMAT_A8]=8;c[a.PIXEL_FORMAT_I8]=8;c[a.PIXEL_FORMAT_AI88]=16;c[a.PIXEL_FORMAT_RGBA4444]=16;c[a.PIXEL_FORMAT_RGB5A1]=
16;c[a.PIXEL_FORMAT_PVRTC4]=4;c[a.PIXEL_FORMAT_PVRTC2]=3;var d=cc.Texture2D.prototype;cc.defineGetterSetter(d,"name",d.getName);cc.defineGetterSetter(d,"pixelFormat",d.getPixelFormat);cc.defineGetterSetter(d,"pixelsWidth",d.getPixelsWide);cc.defineGetterSetter(d,"pixelsHeight",d.getPixelsHigh);cc.defineGetterSetter(d,"width",d._getWidth);cc.defineGetterSetter(d,"height",d._getHeight);a.defaultPixelFormat=a.PIXEL_FORMAT_DEFAULT};
cc._tmp.PrototypeTextureAtlas=function(){var a=cc.TextureAtlas.prototype;cc.defineGetterSetter(a,"totalQuads",a.getTotalQuads);cc.defineGetterSetter(a,"capacity",a.getCapacity);cc.defineGetterSetter(a,"quads",a.getQuads,a.setQuads)};cc.ALIGN_CENTER=51;cc.ALIGN_TOP=19;cc.ALIGN_TOP_RIGHT=18;cc.ALIGN_RIGHT=50;cc.ALIGN_BOTTOM_RIGHT=34;cc.ALIGN_BOTTOM=35;cc.ALIGN_BOTTOM_LEFT=33;cc.ALIGN_LEFT=49;cc.ALIGN_TOP_LEFT=17;cc.PVRHaveAlphaPremultiplied_=false;
if(cc._renderType===cc._RENDER_TYPE_CANVAS)cc.Texture2D=cc.Class.extend({_contentSize:null,_isLoaded:false,_htmlElementObj:null,url:null,ctor:function(){this._contentSize=cc.size(0,0);this._isLoaded=false;this._htmlElementObj=null},getPixelsWide:function(){return this._contentSize.width},getPixelsHigh:function(){return this._contentSize.height},getContentSize:function(){var a=cc.contentScaleFactor();return cc.size(this._contentSize.width/a,this._contentSize.height/a)},_getWidth:function(){return this._contentSize.width/
cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},initWithElement:function(a){if(a)this._htmlElementObj=a},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._isLoaded},handleLoadedTexture:function(){if(!this._isLoaded){if(!this._htmlElementObj){var a=cc.loader.getRes(this.url);if(!a)return;this.initWithElement(a)}this._isLoaded=true;a=this._htmlElementObj;
this._contentSize.width=a.width;this._contentSize.height=a.height;this.dispatchEvent("load")}},description:function(){return"<cc.Texture2D | width = "+this._contentSize.width+" height "+this._contentSize.height+">"},initWithData:function(){return false},initWithImage:function(){return false},initWithString:function(){return false},releaseTexture:function(){},getName:function(){return null},getMaxS:function(){return 1},setMaxS:function(){},getMaxT:function(){return 1},setMaxT:function(){},getPixelFormat:function(){return null},
getShaderProgram:function(){return null},setShaderProgram:function(){},hasPremultipliedAlpha:function(){return false},hasMipmaps:function(){return false},releaseData:function(){},keepData:function(a){return a},drawAtPoint:function(){},drawInRect:function(){},initWithETCFile:function(){cc.log(cc._LogInfos.Texture2D_initWithETCFile);return false},initWithPVRFile:function(){cc.log(cc._LogInfos.Texture2D_initWithPVRFile);return false},initWithPVRTCData:function(){cc.log(cc._LogInfos.Texture2D_initWithPVRTCData);
return false},setTexParameters:function(){},setAntiAliasTexParameters:function(){},setAliasTexParameters:function(){},generateMipmap:function(){},stringForFormat:function(){return""},bitsPerPixelForFormat:function(){return-1},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},removeLoadedEventListener:function(a){this.removeEventListener("load",a)}});else{cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D),cc._LogInfos.MissingFile,"TexturesWebGL.js");cc._tmp.WebGLTexture2D();delete cc._tmp.WebGLTexture2D}cc.EventHelper.prototype.apply(cc.Texture2D.prototype);
cc.assert(cc.isFunction(cc._tmp.PrototypeTexture2D),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js");cc._tmp.PrototypeTexture2D();delete cc._tmp.PrototypeTexture2D;
cc.textureCache={_textures:{},_textureColorsCache:{},_textureKeySeq:0|Math.random()*1E3,_loadedTexturesBefore:{},_initializingRenderer:function(){var a,b=this._loadedTexturesBefore,c=this._textures;for(a in b){var d=b[a];d.handleLoadedTexture();c[a]=d}this._loadedTexturesBefore={}},addPVRTCImage:function(){cc.log(cc._LogInfos.textureCache_addPVRTCImage)},addETCImage:function(){cc.log(cc._LogInfos.textureCache_addETCImage)},description:function(){return"<TextureCache | Number of textures = "+this._textures.length+
">"},textureForKey:function(a){cc.log(cc._LogInfos.textureCache_textureForKey);return this.getTextureForKey(a)},getTextureForKey:function(a){return this._textures[a]||this._textures[cc.loader._aliases[a]]},getKeyByTexture:function(a){for(var b in this._textures)if(this._textures[b]==a)return b;return null},_generalTextureKey:function(){this._textureKeySeq++;return"_textureKey_"+this._textureKeySeq},getTextureColors:function(a){var b=this.getKeyByTexture(a);b||(b=a instanceof HTMLImageElement?a.src:
this._generalTextureKey());this._textureColorsCache[b]||(this._textureColorsCache[b]=cc.generateTextureCacheForColor(a));return this._textureColorsCache[b]},addPVRImage:function(){cc.log(cc._LogInfos.textureCache_addPVRImage)},removeAllTextures:function(){var a=this._textures;for(var b in a)a[b]&&a[b].releaseTexture();this._textures={}},removeTexture:function(a){if(a){var b=this._textures;for(var c in b)if(b[c]==a){b[c].releaseTexture();delete b[c]}}},removeTextureForKey:function(a){a!=null&&this._textures[a]&&
delete this._textures[a]},cacheImage:function(a,b){if(b instanceof cc.Texture2D)this._textures[a]=b;else{var c=new cc.Texture2D;c.initWithElement(b);c.handleLoadedTexture();this._textures[a]=c}},addUIImage:function(a,b){cc.assert(a,cc._LogInfos.textureCache_addUIImage_2);if(b)if(this._textures[b])return this._textures[b];var c=new cc.Texture2D;c.initWithImage(a);if(b!=null&&c!=null)this._textures[b]=c;else cc.log(cc._LogInfos.textureCache_addUIImage);return c},dumpCachedTextureInfo:function(){var a=
0,b=0,c=this._textures;for(var d in c){var e=c[d];a++;e.getHtmlElementObj()instanceof HTMLImageElement?cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo,d,e.getHtmlElementObj().src,e.pixelsWidth,e.pixelsHeight):cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,d,e.pixelsWidth,e.pixelsHeight);b+=e.pixelsWidth*e.pixelsHeight*4}c=this._textureColorsCache;for(d in c){e=c[d];for(var f in e){var g=e[f];a++;cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,d,g.width,g.height);b+=g.width*
g.height*4}}cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_3,a,b/1024,(b/1048576).toFixed(2))},_clear:function(){this._textures={};this._textureColorsCache={};this._textureKeySeq=0|Math.random()*1E3;this._loadedTexturesBefore={}}};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.textureCache;_p.handleLoadedTexture=function(a){var b=this._textures,c=b[a];if(!c){c=b[a]=new cc.Texture2D;c.url=a}c.handleLoadedTexture()};_p.addImage=function(a,b,c){cc.assert(a,cc._LogInfos.Texture2D_addImage);var d=this._textures,e=d[a]||d[cc.loader._aliases[a]];if(e){b&&b.call(c,e);return e}e=d[a]=new cc.Texture2D;e.url=a;if(cc.loader.getRes(a))e.handleLoadedTexture();else cc.loader._checkIsImageURL(a)?cc.loader.load(a,function(){b&&b.call(c)}):
cc.loader.loadImg(a,function(f,g){if(f)return b?b(f):f;cc.loader.cache[a]=g;cc.textureCache.handleLoadedTexture(a);b&&b.call(c,e)});return e};_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache),cc._LogInfos.MissingFile,"TexturesWebGL.js");cc._tmp.WebGLTextureCache();delete cc._tmp.WebGLTextureCache}cc.Scene=cc.Node.extend({_className:"Scene",ctor:function(){cc.Node.prototype.ctor.call(this);this._ignoreAnchorPointForPosition=true;this.setAnchorPoint(0.5,0.5);this.setContentSize(cc.director.getWinSize())}});
cc.Scene.create=function(){return new cc.Scene};
cc.LoaderScene=cc.Scene.extend({_interval:null,_label:null,_className:"LoaderScene",init:function(){var a=this,b=160,c=200,d=a._bgLayer=new cc.LayerColor(cc.color(32,32,32,255));d.setPosition(cc.visibleRect.bottomLeft);a.addChild(d,0);var e=24,f=-c/2+100;if(cc._loaderImage){cc.loader.loadImg(cc._loaderImage,{isCrossOrigin:false},function(g,h){b=h.width;c=h.height;a._initStage(h,cc.visibleRect.center)});e=14;f=-c/2-10}e=a._label=new cc.LabelTTF("Loading... 0%","Arial",e);e.setPosition(cc.pAdd(cc.visibleRect.center,
cc.p(0,f)));e.setColor(cc.color(180,180,180));d.addChild(this._label,10);return true},_initStage:function(a,b){var c=this._texture2d=new cc.Texture2D;c.initWithElement(a);c.handleLoadedTexture();a=this._logo=new cc.Sprite(c);a.setScale(cc.contentScaleFactor());a.x=b.x;a.y=b.y;this._bgLayer.addChild(a,10)},onEnter:function(){cc.Node.prototype.onEnter.call(this);this.schedule(this._startLoading,0.3)},onExit:function(){cc.Node.prototype.onExit.call(this);this._label.setString("Loading... 0%")},initWithResources:function(a,
b){if(cc.isString(a))a=[a];this.resources=a||[];this.cb=b},_startLoading:function(){var a=this;a.unschedule(a._startLoading);cc.loader.load(a.resources,function(b,c,d){b=d/c*100|0;b=Math.min(b,100);a._label.setString("Loading... "+b+"%")},function(){a.cb&&a.cb()})}});cc.LoaderScene.preload=function(a,b){var c=cc;if(!c.loaderScene){c.loaderScene=new cc.LoaderScene;c.loaderScene.init()}c.loaderScene.initWithResources(a,b);cc.director.runScene(c.loaderScene);return c.loaderScene};
cc._tmp.PrototypeLayerColor=function(){var a=cc.LayerColor.prototype;cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth);cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight)};
cc._tmp.PrototypeLayerGradient=function(){var a=cc.LayerGradient.prototype;cc.defineGetterSetter(a,"startColor",a.getStartColor,a.setStartColor);cc.defineGetterSetter(a,"endColor",a.getEndColor,a.setEndColor);cc.defineGetterSetter(a,"startOpacity",a.getStartOpacity,a.setStartOpacity);cc.defineGetterSetter(a,"endOpacity",a.getEndOpacity,a.setEndOpacity);cc.defineGetterSetter(a,"vector",a.getVector,a.setVector)};
cc.Layer=cc.Node.extend({_isBaked:false,_bakeSprite:null,_bakeRenderCmd:null,_className:"Layer",ctor:function(){var a=cc.Node.prototype;a.ctor.call(this);this._ignoreAnchorPointForPosition=true;a.setAnchorPoint.call(this,0.5,0.5);a.setContentSize.call(this,cc.winSize)},init:function(){var a=this;a._ignoreAnchorPointForPosition=true;a.setAnchorPoint(0.5,0.5);a.setContentSize(cc.winSize);a.cascadeOpacity=false;a.cascadeColor=false;return true},bake:null,unbake:null,_bakeRendering:null,isBaked:function(){return this._isBaked},
visit:null});cc.Layer.create=function(){return new cc.Layer};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){var p=cc.Layer.prototype;p.bake=function(){if(!this._isBaked){this._isBaked=this._cacheDirty=cc.renderer.childrenOrderDirty=true;if(!this._bakeRenderCmd&&this._bakeRendering)this._bakeRenderCmd=new cc.CustomRenderCmdCanvas(this,this._bakeRendering);this._cachedParent=this;for(var a=this._children,b=0,c=a.length;b<c;b++)a[b]._setCachedParent(this);if(!this._bakeSprite){this._bakeSprite=new cc.BakeSprite;this._bakeSprite._parent=this}}};p.unbake=function(){if(this._isBaked){cc.renderer.childrenOrderDirty=
true;this._isBaked=false;this._cacheDirty=true;this._cachedParent=null;for(var a=this._children,b=0,c=a.length;b<c;b++)a[b]._setCachedParent(null)}};p.addChild=function(a,b,c){cc.Node.prototype.addChild.call(this,a,b,c);a._parent==this&&this._isBaked&&a._setCachedParent(this)};p._bakeRendering=function(){if(this._cacheDirty){var a=this,b=a._children,c=this._bakeSprite,d=this._getBoundingBoxForBake();d.width=0|d.width;d.height=0|d.height;var e=c.getCacheContext();c.resetCanvasSize(d.width,d.height);
e.translate(0-d.x,d.height+d.y);var f=cc.affineTransformInvert(this._transformWorld),g=cc.view.getScaleX(),h=cc.view.getScaleY();e.transform(f.a,f.c,f.b,f.d,f.tx*g,-f.ty*h);f=c.getAnchorPointInPoints();c.setPosition(f.x+d.x,f.y+d.y);a.sortAllChildren();cc.renderer._turnToCacheMode(this.__instanceId);c=0;for(d=b.length;c<d;c++)b[c].visit(e);cc.renderer._renderingToCacheCanvas(e,this.__instanceId);this._cacheDirty=false}};p.visit=function(a){if(this._isBaked){a=a||cc._renderContext;var b=this,c=b._children.length;
if(!(!b._visible||c===0)){b.transform(a);b._bakeRenderCmd&&cc.renderer.pushRenderCommand(b._bakeRenderCmd);this._bakeSprite.visit(a)}}else cc.Node.prototype.visit.call(this,a)};p._getBoundingBoxForBake=function(){var a=null;if(!this._children||this._children.length===0)return cc.rect(0,0,10,10);for(var b=this._children,c=0;c<b.length;c++){var d=b[c];if(d&&d._visible)if(a){if(d=d._getBoundingBoxToCurrentNode())a=cc.rectUnion(a,d)}else a=d._getBoundingBoxToCurrentNode()}return a};p=null}else{cc.assert(cc.isFunction(cc._tmp.LayerDefineForWebGL),
cc._LogInfos.MissingFile,"CCLayerWebGL.js");cc._tmp.LayerDefineForWebGL();delete cc._tmp.LayerDefineForWebGL}
cc.LayerColor=cc.Layer.extend({_blendFunc:null,_className:"LayerColor",getBlendFunc:function(){return this._blendFunc},changeWidthAndHeight:function(a,b){this.width=a;this.height=b},changeWidth:function(a){this.width=a},changeHeight:function(a){this.height=a},setOpacityModifyRGB:function(){},isOpacityModifyRGB:function(){return false},setColor:function(a){cc.Layer.prototype.setColor.call(this,a);this._updateColor()},setOpacity:function(a){cc.Layer.prototype.setOpacity.call(this,a);this._updateColor()},
_blendFuncStr:"source",ctor:null,init:function(a,b,c){if(cc._renderType!==cc._RENDER_TYPE_CANVAS)this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_COLOR);var d=cc.director.getWinSize();a=a||cc.color(0,0,0,255);b=b===undefined?d.width:b;c=c===undefined?d.height:c;d=this._displayedColor;d.r=a.r;d.g=a.g;d.b=a.b;d=this._realColor;d.r=a.r;d.g=a.g;d.b=a.b;this._realOpacity=this._displayedOpacity=a.a;a=cc.LayerColor.prototype;a.setContentSize.call(this,b,c);a._updateColor.call(this);return true},
setBlendFunc:function(a,b){var c=this,d=this._blendFunc;if(b===undefined){d.src=a.src;d.dst=a.dst}else{d.src=a;d.dst=b}if(cc._renderType===cc._RENDER_TYPE_CANVAS)c._blendFuncStr=cc._getCompositeOperationByBlendFunc(d)},_setWidth:null,_setHeight:null,_updateColor:null,updateDisplayedColor:function(a){cc.Layer.prototype.updateDisplayedColor.call(this,a);this._updateColor()},updateDisplayedOpacity:function(a){cc.Layer.prototype.updateDisplayedOpacity.call(this,a);this._updateColor()},draw:null});
cc.LayerColor.create=function(a,b,c){return new cc.LayerColor(a,b,c)};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.LayerColor.prototype;_p.ctor=function(a,b,c){cc.Layer.prototype.ctor.call(this);this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);cc.LayerColor.prototype.init.call(this,a,b,c)};_p._initRendererCmd=function(){this._rendererCmd=new cc.RectRenderCmdCanvas(this)};_p._setWidth=function(a){cc.Node.prototype._setWidth.call(this,a)};_p._setHeight=function(a){cc.Node.prototype._setHeight.call(this,a)};_p._updateColor=function(){var a=this._rendererCmd;
if(a&&a._color){var b=this._displayedColor;a._color.r=b.r;a._color.g=b.g;a._color.b=b.b;a._color.a=this._displayedOpacity/255}};_p.draw=function(a){a=a||cc._renderContext;var b=this,c=cc.view,d=b._displayedColor;a.fillStyle="rgba("+(0|d.r)+","+(0|d.g)+","+(0|d.b)+","+b._displayedOpacity/255+")";a.fillRect(0,0,b.width*c.getScaleX(),-b.height*c.getScaleY());cc.g_NumberOfDraws++};_p._bakeRendering=function(){if(this._cacheDirty){var a=this,b=a._bakeSprite,c=this._children,d=c.length,e=this._getBoundingBoxForBake();
e.width=0|e.width;e.height=0|e.height;var f=b.getCacheContext();b.resetCanvasSize(e.width,e.height);var g=b.getAnchorPointInPoints(),h=this._position;if(this._ignoreAnchorPointForPosition){f.translate(0-e.x+h.x,e.height+e.y-h.y);b.setPosition(g.x+e.x-h.x,g.y+e.y-h.y)}else{var j=this.getAnchorPointInPoints();h={x:h.x-j.x,y:h.y-j.y};f.translate(0-e.x+h.x,e.height+e.y-h.y);b.setPosition(g.x+e.x-h.x,g.y+e.y-h.y)}b=cc.affineTransformInvert(this._transformWorld);e=cc.view.getScaleX();g=cc.view.getScaleY();
f.transform(b.a,b.c,b.b,b.d,b.tx*e,-b.ty*g);cc.renderer._turnToCacheMode(this.__instanceId);if(d>0){a.sortAllChildren();for(b=0;b<d;b++){e=c[b];if(e._localZOrder<0)e.visit(f);else break}for(a._rendererCmd&&cc.renderer.pushRenderCommand(a._rendererCmd);b<d;b++)c[b].visit(f)}else a._rendererCmd&&cc.renderer.pushRenderCommand(a._rendererCmd);cc.renderer._renderingToCacheCanvas(f,this.__instanceId);this._cacheDirty=false}};_p.visit=function(a){if(this._isBaked){a=a||cc._renderContext;var b=this;if(b._visible){b.transform(a);
b._bakeRenderCmd&&cc.renderer.pushRenderCommand(b._bakeRenderCmd);this._bakeSprite.visit(a)}}else cc.Node.prototype.visit.call(this,a)};_p._getBoundingBoxForBake=function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height),b=this.nodeToWorldTransform();a=cc.rectApplyAffineTransform(a,this.nodeToWorldTransform());if(!this._children||this._children.length===0)return a;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];if(e&&e._visible){e=e._getBoundingBoxToCurrentNode(b);a=cc.rectUnion(a,
e)}}return a};_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLLayerColor),cc._LogInfos.MissingFile,"CCLayerWebGL.js");cc._tmp.WebGLLayerColor();delete cc._tmp.WebGLLayerColor}cc.assert(cc.isFunction(cc._tmp.PrototypeLayerColor),cc._LogInfos.MissingFile,"CCLayerPropertyDefine.js");cc._tmp.PrototypeLayerColor();delete cc._tmp.PrototypeLayerColor;
cc.LayerGradient=cc.LayerColor.extend({_endColor:null,_startOpacity:255,_endOpacity:255,_alongVector:null,_compressedInterpolation:false,_className:"LayerGradient",ctor:function(a,b,c){var d=this;cc.LayerColor.prototype.ctor.call(d);d._endColor=cc.color(0,0,0,255);d._alongVector=cc.p(0,-1);d._startOpacity=255;d._endOpacity=255;cc.LayerGradient.prototype.init.call(d,a,b,c)},_initRendererCmd:function(){this._rendererCmd=new cc.GradientRectRenderCmdCanvas(this)},init:function(a,b,c){a=a||cc.color(0,
0,0,255);b=b||cc.color(0,0,0,255);c=c||cc.p(0,-1);var d=this,e=d._endColor;d._startOpacity=a.a;e.r=b.r;e.g=b.g;e.b=b.b;d._endOpacity=b.a;d._alongVector=c;d._compressedInterpolation=true;cc.LayerColor.prototype.init.call(d,cc.color(a.r,a.g,a.b,255));cc.LayerGradient.prototype._updateColor.call(d);return true},setContentSize:function(a,b){cc.LayerColor.prototype.setContentSize.call(this,a,b);this._updateColor()},_setWidth:function(a){cc.LayerColor.prototype._setWidth.call(this,a);this._updateColor()},
_setHeight:function(a){cc.LayerColor.prototype._setHeight.call(this,a);this._updateColor()},getStartColor:function(){return this._realColor},setStartColor:function(a){this.color=a},setEndColor:function(a){this._endColor=a;this._updateColor()},getEndColor:function(){return this._endColor},setStartOpacity:function(a){this._startOpacity=a;this._updateColor()},getStartOpacity:function(){return this._startOpacity},setEndOpacity:function(a){this._endOpacity=a;this._updateColor()},getEndOpacity:function(){return this._endOpacity},
setVector:function(a){this._alongVector.x=a.x;this._alongVector.y=a.y;this._updateColor()},getVector:function(){return cc.p(this._alongVector.x,this._alongVector.y)},isCompressedInterpolation:function(){return this._compressedInterpolation},setCompressedInterpolation:function(a){this._compressedInterpolation=a;this._updateColor()},_draw:null,_updateColor:null});cc.LayerGradient.create=function(a,b,c){return new cc.LayerGradient(a,b,c)};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.LayerGradient.prototype;_p._updateColor=function(){var a=this,b=a._alongVector,c=a.width*0.5,d=a.height*0.5,e=this._rendererCmd;e._startPoint.x=c*-b.x+c;e._startPoint.y=d*b.y-d;e._endPoint.x=c*b.x+c;e._endPoint.y=d*-b.y-d;b=this._displayedColor;c=this._endColor;d=this._startOpacity;var f=this._endOpacity;e._startStopStr="rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+d.toFixed(4)+")";e._endStopStr="rgba("+Math.round(c.r)+","+Math.round(c.g)+
","+Math.round(c.b)+","+f.toFixed(4)+")"};_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLLayerGradient),cc._LogInfos.MissingFile,"CCLayerWebGL.js");cc._tmp.WebGLLayerGradient();delete cc._tmp.WebGLLayerGradient}cc.assert(cc.isFunction(cc._tmp.PrototypeLayerGradient),cc._LogInfos.MissingFile,"CCLayerPropertyDefine.js");cc._tmp.PrototypeLayerGradient();delete cc._tmp.PrototypeLayerGradient;
cc.LayerMultiplex=cc.Layer.extend({_enabledLayer:0,_layers:null,_className:"LayerMultiplex",ctor:function(a){cc.Layer.prototype.ctor.call(this);a instanceof Array?cc.LayerMultiplex.prototype.initWithLayers.call(this,a):cc.LayerMultiplex.prototype.initWithLayers.call(this,Array.prototype.slice.call(arguments))},initWithLayers:function(a){a.length>0&&a[a.length-1]==null&&cc.log(cc._LogInfos.LayerMultiplex_initWithLayers);this._layers=a;this._enabledLayer=0;this.addChild(this._layers[this._enabledLayer]);
return true},switchTo:function(a){if(a>=this._layers.length)cc.log(cc._LogInfos.LayerMultiplex_switchTo);else{this.removeChild(this._layers[this._enabledLayer],true);this._enabledLayer=a;this.addChild(this._layers[a])}},switchToAndReleaseMe:function(a){if(a>=this._layers.length)cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe);else{this.removeChild(this._layers[this._enabledLayer],true);this._layers[this._enabledLayer]=null;this._enabledLayer=a;this.addChild(this._layers[a])}},addLayer:function(a){a?
this._layers.push(a):cc.log(cc._LogInfos.LayerMultiplex_addLayer)}});cc.LayerMultiplex.create=function(){return new cc.LayerMultiplex(Array.prototype.slice.call(arguments))};
cc._tmp.PrototypeSprite=function(){var a=cc.Sprite.prototype;cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB,a.setOpacityModifyRGB);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"flippedX",a.isFlippedX,a.setFlippedX);cc.defineGetterSetter(a,"flippedY",a.isFlippedY,a.setFlippedY);cc.defineGetterSetter(a,"offsetX",a._getOffsetX);cc.defineGetterSetter(a,"offsetY",a._getOffsetY);cc.defineGetterSetter(a,
"texture",a.getTexture,a.setTexture);cc.defineGetterSetter(a,"textureRectRotated",a.isTextureRectRotated);cc.defineGetterSetter(a,"batchNode",a.getBatchNode,a.setBatchNode);cc.defineGetterSetter(a,"quad",a.getQuad)};
cc.generateTintImageWithMultiply=function(a,b,c,d){d=d||cc.newElement("canvas");c=c||cc.rect(0,0,a.width,a.height);var e=d.getContext("2d");if(d.width!=c.width||d.height!=c.height){d.width=c.width;d.height=c.height}else e.globalCompositeOperation="source-over";e.fillStyle="rgb("+(0|b.r)+","+(0|b.g)+","+(0|b.b)+")";e.fillRect(0,0,c.width,c.height);e.globalCompositeOperation="multiply";e.drawImage(a,c.x,c.y,c.width,c.height,0,0,c.width,c.height);e.globalCompositeOperation="destination-atop";e.drawImage(a,
c.x,c.y,c.width,c.height,0,0,c.width,c.height);return d};
cc.generateTintImage=function(a,b,c,d,e){d||(d=cc.rect(0,0,a.width,a.height));a=c.r/255;var f=c.g/255;c=c.b/255;var g=Math.min(d.width,b[0].width),h=Math.min(d.height,b[0].height);e=e;var j;if(e){j=e.getContext("2d");j.clearRect(0,0,g,h)}else{e=cc.newElement("canvas");e.width=g;e.height=h;j=e.getContext("2d")}j.save();j.globalCompositeOperation="lighter";var k=j.globalAlpha;if(a>0){j.globalAlpha=a*k;j.drawImage(b[0],d.x,d.y,g,h,0,0,g,h)}if(f>0){j.globalAlpha=f*k;j.drawImage(b[1],d.x,d.y,g,h,0,0,g,
h)}if(c>0){j.globalAlpha=c*k;j.drawImage(b[2],d.x,d.y,g,h,0,0,g,h)}if(a+f+c<1){j.globalAlpha=k;j.drawImage(b[3],d.x,d.y,g,h,0,0,g,h)}j.restore();return e};
cc.generateTextureCacheForColor=function(a){function b(){var e=cc.generateTextureCacheForColor,f=a.width,g=a.height;c[0].width=f;c[0].height=g;c[1].width=f;c[1].height=g;c[2].width=f;c[2].height=g;c[3].width=f;c[3].height=g;e.canvas.width=f;e.canvas.height=g;var h=e.canvas.getContext("2d");h.drawImage(a,0,0);e.tempCanvas.width=f;e.tempCanvas.height=g;h=h.getImageData(0,0,f,g).data;for(var j=0;j<4;j++){var k=c[j].getContext("2d");k.getImageData(0,0,f,g);e.tempCtx.drawImage(a,0,0);for(var m=e.tempCtx.getImageData(0,
0,f,g),n=m.data,o=0;o<h.length;o+=4){n[o]=j===0?h[o]:0;n[o+1]=j===1?h[o+1]:0;n[o+2]=j===2?h[o+2]:0;n[o+3]=h[o+3]}k.putImageData(m,0,0)}a.onload=null}if(a.channelCache)return a.channelCache;var c=[cc.newElement("canvas"),cc.newElement("canvas"),cc.newElement("canvas"),cc.newElement("canvas")];try{b()}catch(d){a.onload=b}return a.channelCache=c};cc.generateTextureCacheForColor.canvas=cc.newElement("canvas");cc.generateTextureCacheForColor.tempCanvas=cc.newElement("canvas");
cc.generateTextureCacheForColor.tempCtx=cc.generateTextureCacheForColor.tempCanvas.getContext("2d");cc.cutRotateImageToCanvas=function(a,b){if(!a)return null;if(!b)return a;var c=cc.newElement("canvas");c.width=b.width;c.height=b.height;var d=c.getContext("2d");d.translate(c.width/2,c.height/2);d.rotate(-1.5707963267948966);d.drawImage(a,b.x,b.y,b.height,b.width,-b.height/2,-b.width/2,b.height,b.width);return c};
cc._getCompositeOperationByBlendFunc=function(a){return a?a.src==cc.SRC_ALPHA&&a.dst==cc.ONE||a.src==cc.ONE&&a.dst==cc.ONE?"lighter":a.src==cc.ZERO&&a.dst==cc.SRC_ALPHA?"destination-in":a.src==cc.ZERO&&a.dst==cc.ONE_MINUS_SRC_ALPHA?"destination-out":"source":"source"};
cc.Sprite=cc.Node.extend({dirty:false,atlasIndex:0,textureAtlas:null,_batchNode:null,_recursiveDirty:null,_hasChildren:null,_shouldBeHidden:false,_transformToBatch:null,_blendFunc:null,_texture:null,_rect:null,_rectRotated:false,_offsetPosition:null,_unflippedOffsetPositionFromCenter:null,_opacityModifyRGB:false,_flippedX:false,_flippedY:false,_textureLoaded:false,_newTextureWhenChangeColor:null,_className:"Sprite",_oldDisplayColor:cc.color.WHITE,textureLoaded:function(){return this._textureLoaded},
addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},isDirty:function(){return this.dirty},setDirty:function(a){this.dirty=a},isTextureRectRotated:function(){return this._rectRotated},getAtlasIndex:function(){return this.atlasIndex},setAtlasIndex:function(a){this.atlasIndex=a},getTextureRect:function(){return cc.rect(this._rect)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(a){this.textureAtlas=a},getOffsetPosition:function(){return cc.p(this._offsetPosition)},
_getOffsetX:function(){return this._offsetPosition.x},_getOffsetY:function(){return this._offsetPosition.y},getBlendFunc:function(){return this._blendFunc},initWithSpriteFrame:function(a){cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrame);if(!a.textureLoaded()){this._textureLoaded=false;a.addEventListener("load",this._spriteFrameLoadedCallback,this)}var b=cc._renderType===cc._RENDER_TYPE_CANVAS?false:a._rotated;b=this.initWithTexture(a.getTexture(),a.getRect(),b);this.setSpriteFrame(a);return b},
_spriteFrameLoadedCallback:null,initWithSpriteFrameName:function(a){cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrameName);var b=cc.spriteFrameCache.getSpriteFrame(a);cc.assert(b,a+cc._LogInfos.Sprite_initWithSpriteFrameName1);return this.initWithSpriteFrame(b)},useBatchNode:function(a){this.textureAtlas=a.textureAtlas;this._batchNode=a},setVertexRect:function(a){var b=this._rect;b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height},sortAllChildren:function(){if(this._reorderChildDirty){var a=this._children,
b=a.length,c,d,e;for(c=1;c<b;c++){e=a[c];for(d=c-1;d>=0;){if(e._localZOrder<a[d]._localZOrder)a[d+1]=a[d];else if(e._localZOrder===a[d]._localZOrder&&e.arrivalOrder<a[d].arrivalOrder)a[d+1]=a[d];else break;d--}a[d+1]=e}this._batchNode&&this._arrayMakeObjectsPerformSelector(a,cc.Node._StateCallbackType.sortAllChildren);this._reorderChildDirty=false}},reorderChild:function(a,b){cc.assert(a,cc._LogInfos.Sprite_reorderChild_2);if(this._children.indexOf(a)===-1)cc.log(cc._LogInfos.Sprite_reorderChild);
else if(b!==a.zIndex){if(this._batchNode&&!this._reorderChildDirty){this._setReorderChildDirtyRecursively();this._batchNode.reorderBatch(true)}cc.Node.prototype.reorderChild.call(this,a,b)}},removeChild:function(a,b){this._batchNode&&this._batchNode.removeSpriteFromAtlas(a);cc.Node.prototype.removeChild.call(this,a,b)},setVisible:function(a){cc.Node.prototype.setVisible.call(this,a);this.setDirtyRecursively(true)},removeAllChildren:function(a){var b=this._children,c=this._batchNode;if(c&&b!=null)for(var d=
0,e=b.length;d<e;d++)c.removeSpriteFromAtlas(b[d]);cc.Node.prototype.removeAllChildren.call(this,a);this._hasChildren=false},setDirtyRecursively:function(a){this.dirty=this._recursiveDirty=a;a=this._children;for(var b,c=a?a.length:0,d=0;d<c;d++){b=a[d];b instanceof cc.Sprite&&b.setDirtyRecursively(true)}},setNodeDirty:function(a){cc.Node.prototype.setNodeDirty.call(this);if(!a&&this._batchNode&&!this._recursiveDirty)if(this._hasChildren)this.setDirtyRecursively(true);else this.dirty=this._recursiveDirty=
true},ignoreAnchorPointForPosition:function(a){this._batchNode?cc.log(cc._LogInfos.Sprite_ignoreAnchorPointForPosition):cc.Node.prototype.ignoreAnchorPointForPosition.call(this,a)},setFlippedX:function(a){if(this._flippedX!=a){this._flippedX=a;this.setTextureRect(this._rect,this._rectRotated,this._contentSize);this.setNodeDirty(true)}},setFlippedY:function(a){if(this._flippedY!=a){this._flippedY=a;this.setTextureRect(this._rect,this._rectRotated,this._contentSize);this.setNodeDirty(true)}},isFlippedX:function(){return this._flippedX},
isFlippedY:function(){return this._flippedY},setOpacityModifyRGB:null,isOpacityModifyRGB:function(){return this._opacityModifyRGB},updateDisplayedOpacity:null,setDisplayFrameWithAnimationName:function(a,b){cc.assert(a,cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);if(a=cc.animationCache.getAnimation(a))(b=a.getFrames()[b])?this.setSpriteFrame(b.getSpriteFrame()):cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2);else cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName)},
getBatchNode:function(){return this._batchNode},_setReorderChildDirtyRecursively:function(){if(!this._reorderChildDirty){this._reorderChildDirty=true;for(var a=this._parent;a&&a!=this._batchNode;){a._setReorderChildDirtyRecursively();a=a.parent}}},getTexture:function(){return this._texture},_quad:null,_quadWebBuffer:null,_quadDirty:false,_colorized:false,_blendFuncStr:"source",_originalTexture:null,_drawSize_Canvas:null,ctor:null,_softInit:function(a,b,c){if(a===undefined)cc.Sprite.prototype.init.call(this);
else if(cc.isString(a))if(a[0]==="#"){a=a.substr(1,a.length-1);this.initWithSpriteFrame(cc.spriteFrameCache.getSpriteFrame(a))}else cc.Sprite.prototype.init.call(this,a,b);else if(cc.isObject(a))if(a instanceof cc.Texture2D)this.initWithTexture(a,b,c);else if(a instanceof cc.SpriteFrame)this.initWithSpriteFrame(a);else if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement){b=new cc.Texture2D;b.initWithElement(a);b.handleLoadedTexture();this.initWithTexture(b)}},getQuad:function(){return this._quad},
setBlendFunc:null,init:null,initWithFile:function(a,b){cc.assert(a,cc._LogInfos.Sprite_initWithFile);var c=cc.textureCache.getTextureForKey(a);if(c){if(!b){a=c.getContentSize();b=cc.rect(0,0,a.width,a.height)}return this.initWithTexture(c,b)}else{c=cc.textureCache.addImage(a);return this.initWithTexture(c,b||cc.rect(0,0,c._contentSize.width,c._contentSize.height))}},initWithTexture:null,_textureLoadedCallback:null,setTextureRect:null,updateTransform:null,addChild:null,updateColor:function(){var a=
this._displayedColor,b=this._displayedOpacity;a={r:a.r,g:a.g,b:a.b,a:b};if(this._opacityModifyRGB){a.r*=b/255;a.g*=b/255;a.b*=b/255}b=this._quad;b.bl.colors=a;b.br.colors=a;b.tl.colors=a;b.tr.colors=a;if(this._batchNode)if(this.atlasIndex!=cc.Sprite.INDEX_NOT_INITIALIZED)this.textureAtlas.updateQuad(b,this.atlasIndex);else this.dirty=true;this._quadDirty=true},setOpacity:null,setColor:null,updateDisplayedColor:null,setSpriteFrame:null,setDisplayFrame:function(a){cc.log(cc._LogInfos.Sprite_setDisplayFrame);
this.setSpriteFrame(a)},isFrameDisplayed:null,displayFrame:function(){return new cc.SpriteFrame(this._texture,cc.rectPointsToPixels(this._rect),this._rectRotated,cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),cc.sizePointsToPixels(this._contentSize))},setBatchNode:null,setTexture:null,_updateBlendFunc:function(){if(this._batchNode)cc.log(cc._LogInfos.Sprite__updateBlendFunc);else if(!this._texture||!this._texture.hasPremultipliedAlpha()){this._blendFunc.src=cc.SRC_ALPHA;this._blendFunc.dst=
cc.ONE_MINUS_SRC_ALPHA;this.opacityModifyRGB=false}else{this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this.opacityModifyRGB=true}},_changeTextureColor:function(){var a,b=this._texture,c=this._rendererCmd._textureCoord;if(b&&c.validRect&&this._originalTexture)if(a=b.getHtmlElementObj()){this._colorized=true;if(a instanceof HTMLCanvasElement&&!this._rectRotated&&!this._newTextureWhenChangeColor&&this._originalTexture._htmlElementObj!=a)cc.generateTintImageWithMultiply(this._originalTexture._htmlElementObj,
this._displayedColor,c,a);else{a=cc.generateTintImageWithMultiply(this._originalTexture._htmlElementObj,this._displayedColor,c);b=new cc.Texture2D;b.initWithElement(a);b.handleLoadedTexture();this.texture=b}}},_setTextureCoords:function(a){a=cc.rectPointsToPixels(a);var b=this._batchNode?this.textureAtlas.texture:this._texture;if(b){var c=b.pixelsWidth,d=b.pixelsHeight,e,f=this._quad;if(this._rectRotated){if(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL){b=(2*a.x+1)/(2*c);c=b+(a.height*2-2)/(2*c);e=(2*a.y+
1)/(2*d);a=e+(a.width*2-2)/(2*d)}else{b=a.x/c;c=(a.x+a.height)/c;e=a.y/d;a=(a.y+a.width)/d}if(this._flippedX){d=e;e=a;a=d}if(this._flippedY){d=b;b=c;c=d}f.bl.texCoords.u=b;f.bl.texCoords.v=e;f.br.texCoords.u=b;f.br.texCoords.v=a;f.tl.texCoords.u=c;f.tl.texCoords.v=e;f.tr.texCoords.u=c;f.tr.texCoords.v=a}else{if(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL){b=(2*a.x+1)/(2*c);c=b+(a.width*2-2)/(2*c);e=(2*a.y+1)/(2*d);a=e+(a.height*2-2)/(2*d)}else{b=a.x/c;c=(a.x+a.width)/c;e=a.y/d;a=(a.y+a.height)/d}if(this._flippedX){d=
b;b=c;c=d}if(this._flippedY){d=e;e=a;a=d}f.bl.texCoords.u=b;f.bl.texCoords.v=a;f.br.texCoords.u=c;f.br.texCoords.v=a;f.tl.texCoords.u=b;f.tl.texCoords.v=e;f.tr.texCoords.u=c;f.tr.texCoords.v=e}this._quadDirty=true}}});cc.Sprite.create=function(a,b,c){return new cc.Sprite(a,b,c)};cc.Sprite.createWithTexture=cc.Sprite.create;cc.Sprite.createWithSpriteFrameName=cc.Sprite.create;cc.Sprite.createWithSpriteFrame=cc.Sprite.create;cc.Sprite.INDEX_NOT_INITIALIZED=-1;
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.Sprite.prototype;_p._spriteFrameLoadedCallback=function(a){var b=this;b.setNodeDirty(true);b.setTextureRect(a.getRect(),a.isRotated(),a.getOriginalSize());a=b.color;if(a.r!==255||a.g!==255||a.b!==255)b._changeTextureColor();b.dispatchEvent("load")};_p.setOpacityModifyRGB=function(a){if(this._opacityModifyRGB!==a){this._opacityModifyRGB=a;this.setNodeDirty(true)}};_p.updateDisplayedOpacity=function(a){cc.Node.prototype.updateDisplayedOpacity.call(this,
a);this._setNodeDirtyForCache()};_p.ctor=function(a,b,c){cc.Node.prototype.ctor.call(this);this._shouldBeHidden=false;this._offsetPosition=cc.p(0,0);this._unflippedOffsetPositionFromCenter=cc.p(0,0);this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST};this._rect=cc.rect(0,0,0,0);this._newTextureWhenChangeColor=false;this._textureLoaded=true;this._drawSize_Canvas=cc.size(0,0);this._softInit(a,b,c)};_p._initRendererCmd=function(){this._rendererCmd=new cc.TextureRenderCmdCanvas(this)};_p.setBlendFunc=
function(a,b){var c=this,d=this._blendFunc;if(b===undefined){d.src=a.src;d.dst=a.dst}else{d.src=a;d.dst=b}if(cc._renderType===cc._RENDER_TYPE_CANVAS)c._blendFuncStr=cc._getCompositeOperationByBlendFunc(d)};_p.init=function(){var a=this;if(arguments.length>0)return a.initWithFile(arguments[0],arguments[1]);cc.Node.prototype.init.call(a);a.dirty=a._recursiveDirty=false;a._blendFunc.src=cc.BLEND_SRC;a._blendFunc.dst=cc.BLEND_DST;a.texture=null;a._textureLoaded=true;a._flippedX=a._flippedY=false;a.anchorX=
0.5;a.anchorY=0.5;a._offsetPosition.x=0;a._offsetPosition.y=0;a._hasChildren=false;a.setTextureRect(cc.rect(0,0,0,0),false,cc.size(0,0));return true};_p.initWithTexture=function(a,b,c){var d=this;cc.assert(arguments.length!=0,cc._LogInfos.CCSpriteBatchNode_initWithTexture);if((c=c||false)&&a.isLoaded()){var e=a.getHtmlElementObj();e=cc.cutRotateImageToCanvas(e,b);var f=new cc.Texture2D;f.initWithElement(e);f.handleLoadedTexture();a=f;d._rect=cc.rect(0,0,b.width,b.height)}if(!cc.Node.prototype.init.call(d))return false;
d._batchNode=null;d._recursiveDirty=false;d.dirty=false;d._opacityModifyRGB=true;d._blendFunc.src=cc.BLEND_SRC;d._blendFunc.dst=cc.BLEND_DST;d._flippedX=d._flippedY=false;d.anchorX=0.5;d.anchorY=0.5;d._offsetPosition.x=0;d._offsetPosition.y=0;d._hasChildren=false;e=a.isLoaded();d._textureLoaded=e;if(!e){d._rectRotated=c;if(b){d._rect.x=b.x;d._rect.y=b.y;d._rect.width=b.width;d._rect.height=b.height}d.texture&&d.texture.removeEventListener("load",d);a.addEventListener("load",d._textureLoadedCallback,
d);d.texture=a;return true}b||(b=cc.rect(0,0,a.width,a.height));if(a&&a.url){var g=b.x+b.width,h=b.y+b.height;g>a.width&&cc.error(cc._LogInfos.RectWidth,a.url);h>a.height&&cc.error(cc._LogInfos.RectHeight,a.url)}d._originalTexture=a;d.texture=a;d.setTextureRect(b,c);d.batchNode=null;return true};_p._textureLoadedCallback=function(a){var b=this;if(!b._textureLoaded){b._textureLoaded=true;var c=b._rect;if(c){if(cc._rectEqualToZero(c)){c.width=a.width;c.height=a.height}}else c=cc.rect(0,0,a.width,a.height);
b._originalTexture=a;b.texture=a;b.setTextureRect(c,b._rectRotated);a=this._displayedColor;if(a.r!=255||a.g!=255||a.b!=255)b._changeTextureColor();b.batchNode=b._batchNode;b.dispatchEvent("load")}};_p.setTextureRect=function(a,b,c){var d=this;d._rectRotated=b||false;d.setContentSize(c||a);d.setVertexRect(a);b=d._rendererCmd._textureCoord;c=cc.contentScaleFactor();b.renderX=b.x=0|a.x*c;b.renderY=b.y=0|a.y*c;b.width=0|a.width*c;b.height=0|a.height*c;b.validRect=!(b.width===0||b.height===0||b.x<0||b.y<
0);a=d._unflippedOffsetPositionFromCenter;if(d._flippedX)a.x=-a.x;if(d._flippedY)a.y=-a.y;d._offsetPosition.x=a.x+(d._contentSize.width-d._rect.width)/2;d._offsetPosition.y=a.y+(d._contentSize.height-d._rect.height)/2;if(d._batchNode)d.dirty=true};_p.updateTransform=function(){var a=this;if(a.dirty){var b=a._parent;if(!a._visible||b&&b!=a._batchNode&&b._shouldBeHidden)a._shouldBeHidden=true;else{a._shouldBeHidden=false;a._transformToBatch=!b||b==a._batchNode?a.nodeToParentTransform():cc.affineTransformConcat(a.nodeToParentTransform(),
b._transformToBatch)}a._recursiveDirty=false;a.dirty=false}a._hasChildren&&a._arrayMakeObjectsPerformSelector(a._children,cc.Node._StateCallbackType.updateTransform)};_p.addChild=function(a,b,c){cc.assert(a,cc._LogInfos.CCSpriteBatchNode_addChild_2);if(b==null)b=a._localZOrder;if(c==null)c=a.tag;cc.Node.prototype.addChild.call(this,a,b,c);this._hasChildren=true};_p.setOpacity=function(a){cc.Node.prototype.setOpacity.call(this,a);this._setNodeDirtyForCache()};_p.setColor=function(a){var b=this,c=b.color;
this._oldDisplayColor=c;c.r===a.r&&c.g===a.g&&c.b===a.b||cc.Node.prototype.setColor.call(b,a)};_p.updateDisplayedColor=function(a){var b=this;cc.Node.prototype.updateDisplayedColor.call(b,a);a=b._oldDisplayColor;var c=b._displayedColor;if(!(a.r===c.r&&a.g===c.g&&a.b===c.b)){b._changeTextureColor();b._setNodeDirtyForCache()}};_p.setSpriteFrame=function(a){var b=this;if(cc.isString(a)){a=cc.spriteFrameCache.getSpriteFrame(a);cc.assert(a,cc._LogInfos.CCSpriteBatchNode_setSpriteFrame)}b.setNodeDirty(true);
var c=a.getOffset();b._unflippedOffsetPositionFromCenter.x=c.x;b._unflippedOffsetPositionFromCenter.y=c.y;b._rectRotated=a.isRotated();c=a.getTexture();var d=a.textureLoaded();if(!d){b._textureLoaded=false;a.addEventListener("load",function(e){b._textureLoaded=true;var f=e.getTexture();if(f!=b._texture)b.texture=f;b.setTextureRect(e.getRect(),e.isRotated(),e.getOriginalSize());b.dispatchEvent("load")},b)}if(c!=b._texture)b.texture=c;if(b._rectRotated)b._originalTexture=c;b.setTextureRect(a.getRect(),
b._rectRotated,a.getOriginalSize());b._colorized=false;b._rendererCmd._textureCoord.renderX=b._rendererCmd._textureCoord.x;b._rendererCmd._textureCoord.renderY=b._rendererCmd._textureCoord.y;if(d){a=b.color;if(a.r!==255||a.g!==255||a.b!==255)b._changeTextureColor()}};_p.isFrameDisplayed=function(a){if(a.getTexture()!=this._texture)return false;return cc.rectEqualToRect(a.getRect(),this._rect)};_p.setBatchNode=function(a){var b=this;b._batchNode=a;if(b._batchNode){b._transformToBatch=cc.affineTransformIdentity();
b.textureAtlas=b._batchNode.textureAtlas}else{b.atlasIndex=cc.Sprite.INDEX_NOT_INITIALIZED;b.textureAtlas=null;b._recursiveDirty=false;b.dirty=false}};_p.setTexture=function(a){var b=this;if(a&&cc.isString(a)){a=cc.textureCache.addImage(a);b.setTexture(a);var c=a.getContentSize();b.setTextureRect(cc.rect(0,0,c.width,c.height));a._isLoaded||a.addEventListener("load",function(){var d=a.getContentSize();b.setTextureRect(cc.rect(0,0,d.width,d.height))},this)}else{cc.assert(!a||a instanceof cc.Texture2D,
cc._LogInfos.CCSpriteBatchNode_setTexture);if(b._texture!=a){if(a&&a.getHtmlElementObj()instanceof HTMLImageElement)b._originalTexture=a;b._texture=a}}};if(!cc.sys._supportCanvasNewBlendModes)_p._changeTextureColor=function(){var a,b=this._texture,c=this._rendererCmd._textureCoord;if(b&&c.validRect&&this._originalTexture)if(a=b.getHtmlElementObj())if(b=cc.textureCache.getTextureColors(this._originalTexture.getHtmlElementObj())){this._colorized=true;if(a instanceof HTMLCanvasElement&&!this._rectRotated&&
!this._newTextureWhenChangeColor)cc.generateTintImage(a,b,this._displayedColor,c,a);else{a=cc.generateTintImage(a,b,this._displayedColor,c);b=new cc.Texture2D;b.initWithElement(a);b.handleLoadedTexture();this.texture=b}}};_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLSprite),cc._LogInfos.MissingFile,"SpritesWebGL.js");cc._tmp.WebGLSprite();delete cc._tmp.WebGLSprite}cc.EventHelper.prototype.apply(cc.Sprite.prototype);cc.assert(cc.isFunction(cc._tmp.PrototypeSprite),cc._LogInfos.MissingFile,"SpritesPropertyDefine.js");
cc._tmp.PrototypeSprite();delete cc._tmp.PrototypeSprite;
cc.BakeSprite=cc.Sprite.extend({_cacheCanvas:null,_cacheContext:null,ctor:function(){cc.Sprite.prototype.ctor.call(this);var a=document.createElement("canvas");a.width=a.height=10;this._cacheCanvas=a;this._cacheContext=a.getContext("2d");var b=new cc.Texture2D;b.initWithElement(a);b.handleLoadedTexture();this.setTexture(b)},getCacheContext:function(){return this._cacheContext},getCacheCanvas:function(){return this._cacheCanvas},resetCanvasSize:function(a,b){if(b===undefined){b=a.height;a=a.width}var c=
this._cacheCanvas;c.width=a;c.height=b;this.getTexture().handleLoadedTexture();this.setTextureRect(cc.rect(0,0,a,b),false)}});
cc.AnimationFrame=cc.Class.extend({_spriteFrame:null,_delayPerUnit:0,_userInfo:null,ctor:function(a,b,c){this._spriteFrame=a||null;this._delayPerUnit=b||0;this._userInfo=c||null},clone:function(){var a=new cc.AnimationFrame;a.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo);return a},copyWithZone:function(){return cc.clone(this)},copy:function(){var a=new cc.AnimationFrame;a.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo);return a},
initWithSpriteFrame:function(a,b,c){this._spriteFrame=a;this._delayPerUnit=b;this._userInfo=c;return true},getSpriteFrame:function(){return this._spriteFrame},setSpriteFrame:function(a){this._spriteFrame=a},getDelayUnits:function(){return this._delayPerUnit},setDelayUnits:function(a){this._delayPerUnit=a},getUserInfo:function(){return this._userInfo},setUserInfo:function(a){this._userInfo=a}});cc.AnimationFrame.create=function(a,b,c){return new cc.AnimationFrame(a,b,c)};
cc.Animation=cc.Class.extend({_frames:null,_loops:0,_restoreOriginalFrame:false,_duration:0,_delayPerUnit:0,_totalDelayUnits:0,ctor:function(a,b,c){this._frames=[];if(a===undefined)this.initWithSpriteFrames(null,0);else{var d=a[0];if(d)if(d instanceof cc.SpriteFrame)this.initWithSpriteFrames(a,b,c);else d instanceof cc.AnimationFrame&&this.initWithAnimationFrames(a,b,c)}},getFrames:function(){return this._frames},setFrames:function(a){this._frames=a},addSpriteFrame:function(a){var b=new cc.AnimationFrame;
b.initWithSpriteFrame(a,1,null);this._frames.push(b);this._totalDelayUnits++},addSpriteFrameWithFile:function(a){a=cc.textureCache.addImage(a);var b=cc.rect(0,0,0,0);b.width=a.width;b.height=a.height;this.addSpriteFrame(new cc.SpriteFrame(a,b))},addSpriteFrameWithTexture:function(a,b){this.addSpriteFrame(new cc.SpriteFrame(a,b))},initWithAnimationFrames:function(a,b,c){cc.arrayVerifyType(a,cc.AnimationFrame);this._delayPerUnit=b;this._loops=c===undefined?1:c;this._totalDelayUnits=0;b=this._frames;
for(c=b.length=0;c<a.length;c++){var d=a[c];b.push(d);this._totalDelayUnits+=d.getDelayUnits()}return true},clone:function(){var a=new cc.Animation;a.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops);a.setRestoreOriginalFrame(this._restoreOriginalFrame);return a},copyWithZone:function(){var a=new cc.Animation;a.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops);a.setRestoreOriginalFrame(this._restoreOriginalFrame);return a},_copyFrames:function(){for(var a=
[],b=0;b<this._frames.length;b++)a.push(this._frames[b].clone());return a},copy:function(){return this.copyWithZone(null)},getLoops:function(){return this._loops},setLoops:function(a){this._loops=a},setRestoreOriginalFrame:function(a){this._restoreOriginalFrame=a},getRestoreOriginalFrame:function(){return this._restoreOriginalFrame},getDuration:function(){return this._totalDelayUnits*this._delayPerUnit},getDelayPerUnit:function(){return this._delayPerUnit},setDelayPerUnit:function(a){this._delayPerUnit=
a},getTotalDelayUnits:function(){return this._totalDelayUnits},initWithSpriteFrames:function(a,b,c){cc.arrayVerifyType(a,cc.SpriteFrame);this._loops=c===undefined?1:c;this._delayPerUnit=b||0;this._totalDelayUnits=0;b=this._frames;b.length=0;if(a){for(c=0;c<a.length;c++){var d=a[c],e=new cc.AnimationFrame;e.initWithSpriteFrame(d,1,null);b.push(e)}this._totalDelayUnits+=a.length}return true},retain:function(){},release:function(){}});cc.Animation.create=function(a,b,c){return new cc.Animation(a,b,c)};
cc.Animation.createWithAnimationFrames=cc.Animation.create;
cc.animationCache={_animations:{},addAnimation:function(a,b){this._animations[b]=a},removeAnimation:function(a){a&&this._animations[a]&&delete this._animations[a]},getAnimation:function(a){if(this._animations[a])return this._animations[a];return null},_addAnimationsWithDictionary:function(a,b){var c=a.animations;if(c){var d=1;if(a=a.properties){d=a.format!=null?parseInt(a.format):d;a=a.spritesheets;for(var e=cc.spriteFrameCache,f=cc.path,g=0;g<a.length;g++)e.addSpriteFrames(f.changeBasename(b,a[g]))}switch(d){case 1:this._parseVersion1(c);
break;case 2:this._parseVersion2(c);break;default:cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2);break}}else cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary)},addAnimations:function(a){cc.assert(a,cc._LogInfos.animationCache_addAnimations_2);var b=cc.loader.getRes(a);b?this._addAnimationsWithDictionary(b,a):cc.log(cc._LogInfos.animationCache_addAnimations)},_parseVersion1:function(a){var b=cc.spriteFrameCache;for(var c in a){var d=a[c],e=d.frames;d=parseFloat(d.delay)||
0;var f=null;if(e){f=[];for(var g=0;g<e.length;g++){var h=b.getSpriteFrame(e[g]);if(h){var j=new cc.AnimationFrame;j.initWithSpriteFrame(h,1,null);f.push(j)}else cc.log(cc._LogInfos.animationCache__parseVersion1_2,c,e[g])}if(f.length===0)cc.log(cc._LogInfos.animationCache__parseVersion1_3,c);else{f.length!=e.length&&cc.log(cc._LogInfos.animationCache__parseVersion1_4,c);f=new cc.Animation(f,d,1);cc.animationCache.addAnimation(f,c)}}else cc.log(cc._LogInfos.animationCache__parseVersion1,c)}},_parseVersion2:function(a){var b=
cc.spriteFrameCache;for(var c in a){var d=a[c],e=d.loop,f=parseInt(d.loops);e=e?cc.REPEAT_FOREVER:isNaN(f)?1:f;f=d.restoreOriginalFrame&&d.restoreOriginalFrame==true?true:false;var g=d.frames;if(g){for(var h=[],j=0;j<g.length;j++){var k=g[j],m=k.spriteframe,n=b.getSpriteFrame(m);if(n){m=parseFloat(k.delayUnits)||0;k=k.notification;var o=new cc.AnimationFrame;o.initWithSpriteFrame(n,m,k);h.push(o)}else cc.log(cc._LogInfos.animationCache__parseVersion2_2,c,m)}d=parseFloat(d.delayPerUnit)||0;g=new cc.Animation;
g.initWithAnimationFrames(h,d,e);g.setRestoreOriginalFrame(f);cc.animationCache.addAnimation(g,c)}else cc.log(cc._LogInfos.animationCache__parseVersion2,c)}},_clear:function(){this._animations={}}};
cc.SpriteFrame=cc.Class.extend({_offset:null,_originalSize:null,_rectInPixels:null,_rotated:false,_rect:null,_offsetInPixels:null,_originalSizeInPixels:null,_texture:null,_textureFilename:"",_textureLoaded:false,ctor:function(a,b,c,d,e){this._offset=cc.p(0,0);this._offsetInPixels=cc.p(0,0);this._originalSize=cc.size(0,0);this._rotated=false;this._originalSizeInPixels=cc.size(0,0);this._textureFilename="";this._texture=null;this._textureLoaded=false;if(a!==undefined&&b!==undefined)c===undefined||d===
undefined||e===undefined?this.initWithTexture(a,b):this.initWithTexture(a,b,c,d,e)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},getRectInPixels:function(){var a=this._rectInPixels;return cc.rect(a.x,a.y,a.width,a.height)},setRectInPixels:function(a){if(!this._rectInPixels)this._rectInPixels=cc.rect(0,0,0,0);this._rectInPixels.x=a.x;this._rectInPixels.y=a.y;this._rectInPixels.width=a.width;this._rectInPixels.height=a.height;
this._rect=cc.rectPixelsToPoints(a)},isRotated:function(){return this._rotated},setRotated:function(a){this._rotated=a},getRect:function(){var a=this._rect;return cc.rect(a.x,a.y,a.width,a.height)},setRect:function(a){if(!this._rect)this._rect=cc.rect(0,0,0,0);this._rect.x=a.x;this._rect.y=a.y;this._rect.width=a.width;this._rect.height=a.height;this._rectInPixels=cc.rectPointsToPixels(this._rect)},getOffsetInPixels:function(){return cc.p(this._offsetInPixels)},setOffsetInPixels:function(a){this._offsetInPixels.x=
a.x;this._offsetInPixels.y=a.y;cc._pointPixelsToPointsOut(this._offsetInPixels,this._offset)},getOriginalSizeInPixels:function(){return cc.size(this._originalSizeInPixels)},setOriginalSizeInPixels:function(a){this._originalSizeInPixels.width=a.width;this._originalSizeInPixels.height=a.height},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(a){this._originalSize.width=a.width;this._originalSize.height=a.height},getTexture:function(){if(this._texture)return this._texture;
if(this._textureFilename!==""){var a=cc.textureCache.addImage(this._textureFilename);if(a)this._textureLoaded=a.isLoaded();return a}return null},setTexture:function(a){if(this._texture!=a){var b=a.isLoaded();this._textureLoaded=b;this._texture=a;b||a.addEventListener("load",function(c){this._textureLoaded=true;if(this._rotated&&cc._renderType===cc._RENDER_TYPE_CANVAS){var d=c.getHtmlElementObj();d=cc.cutRotateImageToCanvas(d,this.getRect());var e=new cc.Texture2D;e.initWithElement(d);e.handleLoadedTexture();
this.setTexture(e);d=this.getRect();this.setRect(cc.rect(0,0,d.width,d.height))}d=this._rect;if(d.width===0&&d.height===0){d=c.width;c=c.height;this._rect.width=d;this._rect.height=c;this._rectInPixels=cc.rectPointsToPixels(this._rect);this._originalSizeInPixels.width=this._rectInPixels.width;this._originalSizeInPixels.height=this._rectInPixels.height;this._originalSize.width=d;this._originalSize.height=c}this.dispatchEvent("load")},this)}},getOffset:function(){return cc.p(this._offset)},setOffset:function(a){this._offset.x=
a.x;this._offset.y=a.y},clone:function(){var a=new cc.SpriteFrame;a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels);a.setTexture(this._texture);return a},copyWithZone:function(){var a=new cc.SpriteFrame;a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels);a.setTexture(this._texture);return a},copy:function(){return this.copyWithZone()},initWithTexture:function(a,
b,c,d,e){if(arguments.length===2)b=cc.rectPointsToPixels(b);d=d||cc.p(0,0);e=e||b;c=c||false;if(cc.isString(a)){this._texture=null;this._textureFilename=a}else a instanceof cc.Texture2D&&this.setTexture(a);a=this.getTexture();this._rectInPixels=b;b=this._rect=cc.rectPixelsToPoints(b);if(a&&a.url&&a.isLoaded()){var f,g;if(c){f=b.x+b.height;g=b.y+b.width}else{f=b.x+b.width;g=b.y+b.height}f>a.getPixelsWide()&&cc.error(cc._LogInfos.RectWidth,a.url);g>a.getPixelsHigh()&&cc.error(cc._LogInfos.RectHeight,
a.url)}this._offsetInPixels.x=d.x;this._offsetInPixels.y=d.y;cc._pointPixelsToPointsOut(d,this._offset);this._originalSizeInPixels.width=e.width;this._originalSizeInPixels.height=e.height;cc._sizePixelsToPointsOut(e,this._originalSize);this._rotated=c;return true}});cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype);cc.SpriteFrame.create=function(a,b,c,d,e){return new cc.SpriteFrame(a,b,c,d,e)};cc.SpriteFrame.createWithTexture=cc.SpriteFrame.create;
cc.SpriteFrame._frameWithTextureForCanvas=function(a,b,c,d,e){var f=new cc.SpriteFrame;f._texture=a;f._rectInPixels=b;f._rect=cc.rectPixelsToPoints(b);f._offsetInPixels.x=d.x;f._offsetInPixels.y=d.y;cc._pointPixelsToPointsOut(f._offsetInPixels,f._offset);f._originalSizeInPixels.width=e.width;f._originalSizeInPixels.height=e.height;cc._sizePixelsToPointsOut(f._originalSizeInPixels,f._originalSize);f._rotated=c;return f};
cc.spriteFrameCache={_CCNS_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_CCNS_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,_spriteFrames:{},_spriteFramesAliases:{},_frameConfigCache:{},_rectFromString:function(a){a=this._CCNS_REG2.exec(a);if(!a)return cc.rect(0,0,0,0);return cc.rect(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]))},_pointFromString:function(a){a=this._CCNS_REG1.exec(a);
if(!a)return cc.p(0,0);return cc.p(parseFloat(a[1]),parseFloat(a[2]))},_sizeFromString:function(a){a=this._CCNS_REG1.exec(a);if(!a)return cc.size(0,0);return cc.size(parseFloat(a[1]),parseFloat(a[2]))},_getFrameConfig:function(a){var b=cc.loader.getRes(a);cc.assert(b,cc._LogInfos.spriteFrameCache__getFrameConfig_2,a);cc.loader.release(a);if(b._inited)return this._frameConfigCache[a]=b;var c=b.frames,d=b.metadata||b.meta;b={};var e={},f=0;if(d){f=d.format;f=f.length<=1?parseInt(f):f;e.image=d.textureFileName||
d.textureFileName||d.image}for(var g in c){var h=c[g];if(h){d={};if(f==0){d.rect=cc.rect(h.x,h.y,h.width,h.height);d.rotated=false;d.offset=cc.p(h.offsetX,h.offsetY);var j=h.originalWidth;h=h.originalHeight;if(!j||!h)cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig);j=Math.abs(j);h=Math.abs(h);d.size=cc.size(j,h)}else if(f==1||f==2){d.rect=this._rectFromString(h.frame);d.rotated=h.rotated||false;d.offset=this._pointFromString(h.offset);d.size=this._sizeFromString(h.sourceSize)}else if(f==3){j=
this._sizeFromString(h.spriteSize);var k=this._rectFromString(h.textureRect);if(j)k=cc.rect(k.x,k.y,j.width,j.height);d.rect=k;d.rotated=h.textureRotated||false;d.offset=this._pointFromString(h.spriteOffset);d.size=this._sizeFromString(h.spriteSourceSize);d.aliases=h.aliases}else{j=h.frame;k=h.sourceSize;g=h.filename||g;d.rect=cc.rect(j.x,j.y,j.w,j.h);d.rotated=h.rotated||false;d.offset=cc.p(0,0);d.size=cc.size(k.w,k.h)}b[g]=d}}return this._frameConfigCache[a]={_inited:true,frames:b,meta:e}},addSpriteFrames:function(a,
b){cc.assert(a,cc._LogInfos.spriteFrameCache_addSpriteFrames_2);var c=this._frameConfigCache[a]||cc.loader.getRes(a);if(c&&c.frames){var d=this._frameConfigCache[a]||this._getFrameConfig(a);c=d.frames;d=d.meta;if(b){if(!(b instanceof cc.Texture2D))if(cc.isString(b))b=cc.textureCache.addImage(b);else cc.assert(0,cc._LogInfos.spriteFrameCache_addSpriteFrames_3)}else{b=cc.path.changeBasename(a,d.image||".png");b=cc.textureCache.addImage(b)}a=this._spriteFramesAliases;d=this._spriteFrames;for(var e in c){var f=
c[e],g=d[e];if(!g){g=new cc.SpriteFrame(b,f.rect,f.rotated,f.offset,f.size);if(f=f.aliases)for(var h=0,j=f.length;h<j;h++){var k=f[h];a[k]&&cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames,k);a[k]=e}if(cc._renderType===cc._RENDER_TYPE_CANVAS&&g.isRotated())if(g.getTexture().isLoaded()){f=g.getTexture().getHtmlElementObj();f=cc.cutRotateImageToCanvas(f,g.getRectInPixels());h=new cc.Texture2D;h.initWithElement(f);h.handleLoadedTexture();g.setTexture(h);f=g._rect;g.setRect(cc.rect(0,0,f.width,f.height))}d[e]=
g}}}},_checkConflict:function(a){a=a.frames;for(var b in a)this._spriteFrames[b]&&cc.log(cc._LogInfos.spriteFrameCache__checkConflict,b)},addSpriteFrame:function(a,b){this._spriteFrames[b]=a},removeSpriteFrames:function(){this._spriteFrames={};this._spriteFramesAliases={}},removeSpriteFrameByName:function(a){if(a){this._spriteFramesAliases[a]&&delete this._spriteFramesAliases[a];this._spriteFrames[a]&&delete this._spriteFrames[a]}},removeSpriteFramesFromFile:function(a){var b=this._spriteFrames,c=
this._spriteFramesAliases;if(a=this._frameConfigCache[a]){a=a.frames;for(var d in a)if(b[d]){delete b[d];for(var e in c)c[e]==d&&delete c[e]}}},removeSpriteFramesFromTexture:function(a){var b=this._spriteFrames,c=this._spriteFramesAliases;for(var d in b){var e=b[d];if(e&&e.getTexture()==a){delete b[d];for(var f in c)c[f]==d&&delete c[f]}}},getSpriteFrame:function(a){var b=this._spriteFrames[a];if(!b){var c=this._spriteFramesAliases[a];if(c)(b=this._spriteFrames[c.toString()])||delete this._spriteFramesAliases[a]}b||
cc.log(cc._LogInfos.spriteFrameCache_getSpriteFrame,a);return b},_clear:function(){this._spriteFrames={};this._spriteFramesAliases={};this._frameConfigCache={}}};cc.g_NumberOfDraws=0;cc.GLToClipTransform=function(a){var b=new cc.kmMat4;cc.kmGLGetMatrix(cc.KM_GL_PROJECTION,b);var c=new cc.kmMat4;cc.kmGLGetMatrix(cc.KM_GL_MODELVIEW,c);cc.kmMat4Multiply(a,b,c)};
cc.Director=cc.Class.extend({_landscape:false,_nextDeltaTimeZero:false,_paused:false,_purgeDirectorInNextLoop:false,_sendCleanupToScene:false,_animationInterval:0,_oldAnimationInterval:0,_projection:0,_accumDt:0,_contentScaleFactor:1,_displayStats:false,_deltaTime:0,_frameRate:0,_FPSLabel:null,_SPFLabel:null,_drawsLabel:null,_winSizeInPoints:null,_lastUpdate:null,_nextScene:null,_notificationNode:null,_openGLView:null,_scenesStack:null,_projectionDelegate:null,_runningScene:null,_frames:0,_totalFrames:0,
_secondsPerFrame:0,_dirtyRegion:null,_scheduler:null,_actionManager:null,_eventProjectionChanged:null,_eventAfterDraw:null,_eventAfterVisit:null,_eventAfterUpdate:null,ctor:function(){var a=this;a._lastUpdate=Date.now();cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){a._lastUpdate=Date.now()})},init:function(){this._oldAnimationInterval=this._animationInterval=1/cc.defaultFPS;this._scenesStack=[];this._projection=cc.Director.PROJECTION_DEFAULT;this._projectionDelegate=null;this._frameRate=
this._accumDt=0;this._displayStats=false;this._totalFrames=this._frames=0;this._lastUpdate=Date.now();this._purgeDirectorInNextLoop=this._paused=false;this._winSizeInPoints=cc.size(0,0);this._openGLView=null;this._contentScaleFactor=1;this._scheduler=new cc.Scheduler;this._actionManager=cc.ActionManager?new cc.ActionManager:null;this._scheduler.scheduleUpdateForTarget(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,false);this._eventAfterDraw=new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW);this._eventAfterDraw.setUserData(this);
this._eventAfterVisit=new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT);this._eventAfterVisit.setUserData(this);this._eventAfterUpdate=new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE);this._eventAfterUpdate.setUserData(this);this._eventProjectionChanged=new cc.EventCustom(cc.Director.EVENT_PROJECTION_CHANGED);this._eventProjectionChanged.setUserData(this);return true},calculateDeltaTime:function(){var a=Date.now();if(this._nextDeltaTimeZero){this._deltaTime=0;this._nextDeltaTimeZero=false}else this._deltaTime=
(a-this._lastUpdate)/1E3;if(cc.game.config[cc.game.CONFIG_KEY.debugMode]>0&&this._deltaTime>0.2)this._deltaTime=1/60;this._lastUpdate=a},convertToGL:null,convertToUI:null,drawScene:function(){var a=cc.renderer;this.calculateDeltaTime();if(!this._paused){this._scheduler.update(this._deltaTime);cc.eventManager.dispatchEvent(this._eventAfterUpdate)}this._clear();this._nextScene&&this.setNextScene();this._beforeVisitScene&&this._beforeVisitScene();if(this._runningScene){if(a.childrenOrderDirty===true){cc.renderer.clearRenderCommands();
this._runningScene._curLevel=0;this._runningScene.visit();a.resetFlag()}else a.transformDirty()===true&&a.transform();cc.eventManager.dispatchEvent(this._eventAfterVisit)}this._notificationNode&&this._notificationNode.visit();this._displayStats&&this._showStats();this._afterVisitScene&&this._afterVisitScene();a.rendering(cc._renderContext);cc.eventManager.dispatchEvent(this._eventAfterDraw);this._totalFrames++;this._displayStats&&this._calculateMPF()},_beforeVisitScene:null,_afterVisitScene:null,
end:function(){this._purgeDirectorInNextLoop=true},getContentScaleFactor:function(){return this._contentScaleFactor},getNotificationNode:function(){return this._notificationNode},getWinSize:function(){return cc.size(this._winSizeInPoints)},getWinSizeInPixels:function(){return cc.size(this._winSizeInPoints.width*this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor)},getVisibleSize:null,getVisibleOrigin:null,getZEye:null,pause:function(){if(!this._paused){this._oldAnimationInterval=
this._animationInterval;this.setAnimationInterval(0.25);this._paused=true}},popScene:function(){cc.assert(this._runningScene,cc._LogInfos.Director_popScene);this._scenesStack.pop();var a=this._scenesStack.length;if(a==0)this.end();else{this._sendCleanupToScene=true;this._nextScene=this._scenesStack[a-1]}},purgeCachedData:function(){cc.animationCache._clear();cc.spriteFrameCache._clear();cc.textureCache._clear()},purgeDirector:function(){this.getScheduler().unscheduleAllCallbacks();cc.eventManager&&
cc.eventManager.setEnabled(false);if(this._runningScene){this._runningScene.onExitTransitionDidStart();this._runningScene.onExit();this._runningScene.cleanup()}this._nextScene=this._runningScene=null;this._scenesStack.length=0;this.stopAnimation();this.purgeCachedData();cc.checkGLErrorDebug()},pushScene:function(a){cc.assert(a,cc._LogInfos.Director_pushScene);this._sendCleanupToScene=false;this._scenesStack.push(a);this._nextScene=a},runScene:function(a){cc.assert(a,cc._LogInfos.Director_pushScene);
if(this._runningScene){var b=this._scenesStack.length;if(b===0){this._sendCleanupToScene=true;this._scenesStack[b]=a}else{this._sendCleanupToScene=true;this._scenesStack[b-1]=a}this._nextScene=a}else{this.pushScene(a);this.startAnimation()}},resume:function(){if(this._paused){this.setAnimationInterval(this._oldAnimationInterval);(this._lastUpdate=Date.now())||cc.log(cc._LogInfos.Director_resume);this._paused=false;this._deltaTime=0}},setContentScaleFactor:function(a){if(a!=this._contentScaleFactor){this._contentScaleFactor=
a;this._createStatsLabel()}},setDepthTest:null,setDefaultValues:function(){},setNextDeltaTimeZero:function(a){this._nextDeltaTimeZero=a},setNextScene:function(){var a=false,b=false;if(cc.TransitionScene){a=this._runningScene?this._runningScene instanceof cc.TransitionScene:false;b=this._nextScene?this._nextScene instanceof cc.TransitionScene:false}if(!b){if(b=this._runningScene){b.onExitTransitionDidStart();b.onExit()}this._sendCleanupToScene&&b&&b.cleanup()}this._runningScene=this._nextScene;cc.renderer.childrenOrderDirty=
true;this._nextScene=null;if(!a&&this._runningScene!=null){this._runningScene.onEnter();this._runningScene.onEnterTransitionDidFinish()}},setNotificationNode:function(a){this._notificationNode=a},getDelegate:function(){return this._projectionDelegate},setDelegate:function(a){this._projectionDelegate=a},setOpenGLView:null,setProjection:null,setViewport:null,getOpenGLView:null,getProjection:null,setAlphaBlending:null,_showStats:function(){this._frames++;this._accumDt+=this._deltaTime;if(this._FPSLabel&&
this._SPFLabel&&this._drawsLabel){if(this._accumDt>cc.DIRECTOR_FPS_INTERVAL){this._SPFLabel.string=this._secondsPerFrame.toFixed(3);this._frameRate=this._frames/this._accumDt;this._accumDt=this._frames=0;this._FPSLabel.string=this._frameRate.toFixed(1);this._drawsLabel.string=(0|cc.g_NumberOfDraws).toString()}this._FPSLabel.visit();this._SPFLabel.visit();this._drawsLabel.visit()}else this._createStatsLabel();cc.g_NumberOfDraws=0},isSendCleanupToScene:function(){return this._sendCleanupToScene},getRunningScene:function(){return this._runningScene},
getAnimationInterval:function(){return this._animationInterval},isDisplayStats:function(){return this._displayStats},setDisplayStats:function(a){this._displayStats=a},getSecondsPerFrame:function(){return this._secondsPerFrame},isNextDeltaTimeZero:function(){return this._nextDeltaTimeZero},isPaused:function(){return this._paused},getTotalFrames:function(){return this._totalFrames},popToRootScene:function(){this.popToSceneStackLevel(1)},popToSceneStackLevel:function(a){cc.assert(this._runningScene,
cc._LogInfos.Director_popToSceneStackLevel_2);var b=this._scenesStack,c=b.length;if(c==0)this.end();else if(!(a>c)){for(;c>a;){var d=b.pop();if(d.running){d.onExitTransitionDidStart();d.onExit()}d.cleanup();c--}this._nextScene=b[b.length-1];this._sendCleanupToScene=false}},getScheduler:function(){return this._scheduler},setScheduler:function(a){if(this._scheduler!=a)this._scheduler=a},getActionManager:function(){return this._actionManager},setActionManager:function(a){if(this._actionManager!=a)this._actionManager=
a},getDeltaTime:function(){return this._deltaTime},_createStatsLabel:null,_calculateMPF:function(){this._secondsPerFrame=(Date.now()-this._lastUpdate)/1E3}});cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed";cc.Director.EVENT_AFTER_DRAW="director_after_draw";cc.Director.EVENT_AFTER_VISIT="director_after_visit";cc.Director.EVENT_AFTER_UPDATE="director_after_update";
cc.DisplayLinkDirector=cc.Director.extend({invalid:false,startAnimation:function(){this._nextDeltaTimeZero=true;this.invalid=false},mainLoop:function(){if(this._purgeDirectorInNextLoop){this._purgeDirectorInNextLoop=false;this.purgeDirector()}else this.invalid||this.drawScene()},stopAnimation:function(){this.invalid=true},setAnimationInterval:function(a){this._animationInterval=a;if(!this.invalid){this.stopAnimation();this.startAnimation()}}});cc.Director.sharedDirector=null;
cc.Director.firstUseDirector=true;cc.Director._getInstance=function(){if(cc.Director.firstUseDirector){cc.Director.firstUseDirector=false;cc.Director.sharedDirector=new cc.DisplayLinkDirector;cc.Director.sharedDirector.init()}return cc.Director.sharedDirector};cc.defaultFPS=60;cc.Director.PROJECTION_2D=0;cc.Director.PROJECTION_3D=1;cc.Director.PROJECTION_CUSTOM=3;cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_3D;
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.Director.prototype;_p.setProjection=function(a){this._projection=a;cc.eventManager.dispatchEvent(this._eventProjectionChanged)};_p.setDepthTest=function(){};_p.setOpenGLView=function(a){this._winSizeInPoints.width=cc._canvas.width;this._winSizeInPoints.height=cc._canvas.height;this._openGLView=a||cc.view;cc.eventManager&&cc.eventManager.setEnabled(true)};_p._clear=function(){var a=this._openGLView.getViewPortRect();cc._renderContext.clearRect(-a.x,
a.y,a.width,-a.height)};_p._createStatsLabel=function(){var a=this,b=0;b=a._winSizeInPoints.width>a._winSizeInPoints.height?0|a._winSizeInPoints.height/320*24:0|a._winSizeInPoints.width/320*24;a._FPSLabel=new cc.LabelTTF("000.0","Arial",b);a._SPFLabel=new cc.LabelTTF("0.000","Arial",b);a._drawsLabel=new cc.LabelTTF("0000","Arial",b);b=cc.DIRECTOR_STATS_POSITION;a._drawsLabel.setPosition(a._drawsLabel.width/2+b.x,a._drawsLabel.height*5/2+b.y);a._SPFLabel.setPosition(a._SPFLabel.width/2+b.x,a._SPFLabel.height*
3/2+b.y);a._FPSLabel.setPosition(a._FPSLabel.width/2+b.x,a._FPSLabel.height/2+b.y)};_p.getVisibleSize=function(){return this.getWinSize()};_p.getVisibleOrigin=function(){return cc.p(0,0)}}else{cc.Director._fpsImage=new Image;cc._addEventListener(cc.Director._fpsImage,"load",function(){cc.Director._fpsImageLoaded=true});if(cc._fpsImage)cc.Director._fpsImage.src=cc._fpsImage;cc.assert(cc.isFunction(cc._tmp.DirectorWebGL),cc._LogInfos.MissingFile,"CCDirectorWebGL.js");cc._tmp.DirectorWebGL();delete cc._tmp.DirectorWebGL}
cc.PRIORITY_NON_SYSTEM=cc.PRIORITY_SYSTEM+1;cc.ListEntry=function(a,b,c,d,e,f){this.prev=a;this.next=b;this.target=c;this.priority=d;this.paused=e;this.markedForDeletion=f};cc.HashUpdateEntry=function(a,b,c,d){this.list=a;this.entry=b;this.target=c;this.hh=d};cc.HashTimerEntry=function(a,b,c,d,e,f,g){var h=this;h.timers=a;h.target=b;h.timerIndex=c;h.currentTimer=d;h.currentTimerSalvaged=e;h.paused=f;h.hh=g};
cc.Timer=cc.Class.extend({_interval:0,_callback:null,_target:null,_elapsed:0,_runForever:false,_useDelay:false,_timesExecuted:0,_repeat:0,_delay:0,getInterval:function(){return this._interval},setInterval:function(a){this._interval=a},getCallback:function(){return this._callback},ctor:function(a,b,c,d,e){this._target=a;this._callback=b;this._elapsed=-1;this._interval=c||0;this._delay=e||0;this._useDelay=this._delay>0;this._repeat=d==null?cc.REPEAT_FOREVER:d;this._runForever=this._repeat==cc.REPEAT_FOREVER},
_doCallback:function(){cc.isString(this._callback)?this._target[this._callback](this._elapsed):this._callback.call(this._target,this._elapsed)},update:function(a){if(this._elapsed==-1)this._timesExecuted=this._elapsed=0;else{var b=this._target,c=this._callback;this._elapsed+=a;if(this._runForever&&!this._useDelay){if(this._elapsed>=this._interval){b&&c&&this._doCallback();this._elapsed=0}}else{if(this._useDelay){if(this._elapsed>=this._delay){b&&c&&this._doCallback();this._elapsed-=this._delay;this._timesExecuted+=
1;this._useDelay=false}}else if(this._elapsed>=this._interval){b&&c&&this._doCallback();this._elapsed=0;this._timesExecuted+=1}this._timesExecuted>this._repeat&&cc.director.getScheduler().unscheduleCallbackForTarget(b,c)}}}});
cc.Scheduler=cc.Class.extend({_timeScale:1,_updates:null,_hashForUpdates:null,_arrayForUpdates:null,_hashForTimers:null,_arrayForTimes:null,_currentTarget:null,_currentTargetSalvaged:false,_updateHashLocked:false,ctor:function(){this._timeScale=1;this._updates=[[],[],[]];this._hashForUpdates={};this._arrayForUpdates=[];this._hashForTimers={};this._arrayForTimers=[];this._currentTarget=null;this._updateHashLocked=this._currentTargetSalvaged=false},_removeHashElement:function(a){delete this._hashForTimers[a.target.__instanceId];
cc.arrayRemoveObject(this._arrayForTimers,a);a.Timer=null;a.target=null},_removeUpdateFromHash:function(a){if(a=this._hashForUpdates[a.target.__instanceId]){cc.arrayRemoveObject(a.list,a.entry);delete this._hashForUpdates[a.target.__instanceId];cc.arrayRemoveObject(this._arrayForUpdates,a);a.entry=null;a.target=null}},_priorityIn:function(a,b,c,d){d=new cc.ListEntry(null,null,b,c,d,false);if(a){for(var e=a.length-1,f=0;f<=e;f++)if(c<a[f].priority)break;a.splice(f,0,d)}else{a=[];a.push(d)}c=new cc.HashUpdateEntry(a,
d,b,null);this._arrayForUpdates.push(c);this._hashForUpdates[b.__instanceId]=c;return a},_appendIn:function(a,b,c){c=new cc.ListEntry(null,null,b,0,c,false);a.push(c);a=new cc.HashUpdateEntry(a,c,b,null);this._arrayForUpdates.push(a);this._hashForUpdates[b.__instanceId]=a},setTimeScale:function(a){this._timeScale=a},getTimeScale:function(){return this._timeScale},update:function(a){var b=this._updates,c=this._arrayForTimers,d,e,f;this._updateHashLocked=true;if(this._timeScale!=1)a*=this._timeScale;
e=0;for(f=b.length;e<f&&e>=0;e++)for(var g=this._updates[e],h=0,j=g.length;h<j;h++){d=g[h];!d.paused&&!d.markedForDeletion&&d.target.update(a)}e=0;for(f=c.length;e<f;e++){d=c[e];if(!d)break;this._currentTarget=d;this._currentTargetSalvaged=false;if(!d.paused)for(d.timerIndex=0;d.timerIndex<d.timers.length;d.timerIndex++){d.currentTimer=d.timers[d.timerIndex];d.currentTimerSalvaged=false;d.currentTimer.update(a);d.currentTimer=null}if(this._currentTargetSalvaged&&d.timers.length==0){this._removeHashElement(d);
e--}}e=0;for(f=b.length;e<f;e++){g=this._updates[e];h=0;for(j=g.length;h<j;){d=g[h];if(!d)break;if(d.markedForDeletion)this._removeUpdateFromHash(d);else h++}}this._updateHashLocked=false;this._currentTarget=null},scheduleCallbackForTarget:function(a,b,c,d,e,f){cc.assert(b,cc._LogInfos.Scheduler_scheduleCallbackForTarget_2);cc.assert(a,cc._LogInfos.Scheduler_scheduleCallbackForTarget_3);c=c||0;d=d==null?cc.REPEAT_FOREVER:d;e=e||0;f=f||false;var g=this._hashForTimers[a.__instanceId];if(!g){g=new cc.HashTimerEntry(null,
a,0,null,null,f,null);this._arrayForTimers.push(g);this._hashForTimers[a.__instanceId]=g}if(g.timers==null)g.timers=[];else for(var h=0;h<g.timers.length;h++){f=g.timers[h];if(b==f._callback){cc.log(cc._LogInfos.Scheduler_scheduleCallbackForTarget,f.getInterval().toFixed(4),c.toFixed(4));f._interval=c;return}}f=new cc.Timer(a,b,c,d,e);g.timers.push(f)},scheduleUpdateForTarget:function(a,b,c){if(a!==null){var d=this._updates,e=this._hashForUpdates[a.__instanceId];if(e)e.entry.markedForDeletion=false;
else if(b==0)this._appendIn(d[1],a,c);else if(b<0)d[0]=this._priorityIn(d[0],a,b,c);else d[2]=this._priorityIn(d[2],a,b,c)}},unscheduleCallbackForTarget:function(a,b){if(!(a==null||b==null))if(a=this._hashForTimers[a.__instanceId])for(var c=a.timers,d=0,e=c.length;d<e;d++){var f=c[d];if(b==f._callback){if(f==a.currentTimer&&!a.currentTimerSalvaged)a.currentTimerSalvaged=true;c.splice(d,1);a.timerIndex>=d&&a.timerIndex--;if(c.length==0)if(this._currentTarget==a)this._currentTargetSalvaged=true;else this._removeHashElement(a);
return}}},unscheduleUpdateForTarget:function(a){if(a!=null){a=this._hashForUpdates[a.__instanceId];if(a!=null)if(this._updateHashLocked)a.entry.markedForDeletion=true;else this._removeUpdateFromHash(a.entry)}},unscheduleAllCallbacksForTarget:function(a){if(a!=null){var b=this._hashForTimers[a.__instanceId];if(b){var c=b.timers;if(!b.currentTimerSalvaged&&c.indexOf(b.currentTimer)>=0)b.currentTimerSalvaged=true;c.length=0;if(this._currentTarget==b)this._currentTargetSalvaged=true;else this._removeHashElement(b)}this.unscheduleUpdateForTarget(a)}},
unscheduleAllCallbacks:function(){this.unscheduleAllCallbacksWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllCallbacksWithMinPriority:function(a){for(var b=this._arrayForTimers,c=this._updates,d=0,e=b.length;d<e;d++)this.unscheduleAllCallbacksForTarget(b[d].target);for(d=2;d>=0;d--)if(!(d==1&&a>0||d==0&&a>=0)){b=c[d];e=0;for(var f=b.length;e<f;e++)this.unscheduleUpdateForTarget(b[e].target)}},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},
pauseAllTargetsWithMinPriority:function(){for(var a=[],b,c=this._arrayForTimers,d=this._updates,e=0,f=c.length;e<f;e++)if(b=c[e]){b.paused=true;a.push(b.target)}e=0;for(f=d.length;e<f;e++){c=d[e];for(var g=0,h=c.length;g<h;g++)if(b=c[g]){b.paused=true;a.push(b.target)}}return a},resumeTargets:function(a){if(a)for(var b=0;b<a.length;b++)this.resumeTarget(a[b])},pauseTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_pauseTarget);var b=this._hashForTimers[a.__instanceId];if(b)b.paused=true;if(a=
this._hashForUpdates[a.__instanceId])a.entry.paused=true},resumeTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_resumeTarget);var b=this._hashForTimers[a.__instanceId];if(b)b.paused=false;if(a=this._hashForUpdates[a.__instanceId])a.entry.paused=false},isTargetPaused:function(a){cc.assert(a,cc._LogInfos.Scheduler_isTargetPaused);if(a=this._hashForTimers[a.__instanceId])return a.paused;return false}});cc.Scheduler.PRIORITY_SYSTEM=-2147483648;
cc._tmp.PrototypeLabelTTF=function(){var a=cc.LabelTTF.prototype;cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"string",a.getString,a.setString);cc.defineGetterSetter(a,"textAlign",a.getHorizontalAlignment,a.setHorizontalAlignment);cc.defineGetterSetter(a,"verticalAlign",a.getVerticalAlignment,a.setVerticalAlignment);cc.defineGetterSetter(a,"fontSize",a.getFontSize,a.setFontSize);cc.defineGetterSetter(a,
"fontName",a.getFontName,a.setFontName);cc.defineGetterSetter(a,"font",a._getFont,a._setFont);cc.defineGetterSetter(a,"boundingWidth",a._getBoundingWidth,a._setBoundingWidth);cc.defineGetterSetter(a,"boundingHeight",a._getBoundingHeight,a._setBoundingHeight);cc.defineGetterSetter(a,"fillStyle",a._getFillStyle,a.setFontFillColor);cc.defineGetterSetter(a,"strokeStyle",a._getStrokeStyle,a._setStrokeStyle);cc.defineGetterSetter(a,"lineWidth",a._getLineWidth,a._setLineWidth);cc.defineGetterSetter(a,"shadowOffsetX",
a._getShadowOffsetX,a._setShadowOffsetX);cc.defineGetterSetter(a,"shadowOffsetY",a._getShadowOffsetY,a._setShadowOffsetY);cc.defineGetterSetter(a,"shadowOpacity",a._getShadowOpacity,a._setShadowOpacity);cc.defineGetterSetter(a,"shadowBlur",a._getShadowBlur,a._setShadowBlur)};
cc.LabelTTF=cc.Sprite.extend({_dimensions:null,_hAlignment:cc.TEXT_ALIGNMENT_CENTER,_vAlignment:cc.VERTICAL_TEXT_ALIGNMENT_TOP,_fontName:null,_fontSize:0,_string:"",_originalText:null,_isMultiLine:false,_fontStyleStr:null,_shadowEnabled:false,_shadowOffset:null,_shadowOpacity:0,_shadowBlur:0,_shadowColorStr:null,_shadowColor:null,_strokeEnabled:false,_strokeColor:null,_strokeSize:0,_strokeColorStr:null,_textFillColor:null,_fillColorStr:null,_strokeShadowOffsetX:0,_strokeShadowOffsetY:0,_needUpdateTexture:false,
_labelCanvas:null,_labelContext:null,_lineWidths:null,_className:"LabelTTF",initWithString:function(a,b,c,d,e,f){a=a?a+"":"";c=c||16;d=d||cc.size(0,0);e=e||cc.TEXT_ALIGNMENT_LEFT;f=f||cc.VERTICAL_TEXT_ALIGNMENT_TOP;this._opacityModifyRGB=false;this._dimensions=cc.size(d.width,d.height);this._fontName=b||"Arial";this._hAlignment=e;this._vAlignment=f;this._fontSize=c;this._fontStyleStr=this._fontSize+"px '"+b+"'";this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(b,this._fontSize);this.string=
a;this._setColorsString();this._updateTexture();this._setUpdateTextureDirty();return true},_setUpdateTextureDirty:function(){this._renderCmdDiry=this._needUpdateTexture=true;cc.renderer.pushDirtyNode(this)},ctor:function(a,b,c,d,e,f){cc.Sprite.prototype.ctor.call(this);this._dimensions=cc.size(0,0);this._hAlignment=cc.TEXT_ALIGNMENT_LEFT;this._vAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP;this._opacityModifyRGB=false;this._fontStyleStr="";this._fontName="Arial";this._shadowEnabled=this._isMultiLine=false;
this._shadowOffset=cc.p(0,0);this._shadowBlur=this._shadowOpacity=0;this._shadowColorStr="rgba(128, 128, 128, 0.5)";this._strokeEnabled=false;this._strokeColor=cc.color(255,255,255,255);this._strokeSize=0;this._strokeColorStr="";this._textFillColor=cc.color(255,255,255,255);this._fillColorStr="rgba(255,255,255,1)";this._strokeShadowOffsetY=this._strokeShadowOffsetX=0;this._needUpdateTexture=false;this._lineWidths=[];this._setColorsString();b&&b instanceof cc.FontDefinition?this.initWithStringAndTextDefinition(a,
b):cc.LabelTTF.prototype.initWithString.call(this,a,b,c,d,e,f)},init:function(){return this.initWithString(" ",this._fontName,this._fontSize)},_measureConfig:function(){this._getLabelContext().font=this._fontStyleStr},_measure:function(a){return this._getLabelContext().measureText(a).width},description:function(){return"<cc.LabelTTF | FontName ="+this._fontName+" FontSize = "+this._fontSize.toFixed(1)+">"},setColor:null,_setColorsString:null,updateDisplayedColor:null,setOpacity:null,updateDisplayedOpacity:null,
updateDisplayedOpacityForCanvas:function(a){cc.Node.prototype.updateDisplayedOpacity.call(this,a);this._setColorsString()},getString:function(){return this._string},getHorizontalAlignment:function(){return this._hAlignment},getVerticalAlignment:function(){return this._vAlignment},getDimensions:function(){return cc.size(this._dimensions)},getFontSize:function(){return this._fontSize},getFontName:function(){return this._fontName},initWithStringAndTextDefinition:null,setTextDefinition:function(a){a&&
this._updateWithTextDefinition(a,true)},getTextDefinition:function(){return this._prepareTextDefinition(false)},enableShadow:function(a,b,c,d){a.r!=null&&a.g!=null&&a.b!=null&&a.a!=null?this._enableShadow(a,b,c):this._enableShadowNoneColor(a,b,c,d)},_enableShadowNoneColor:function(a,b,c,d){c=c||0.5;if(false===this._shadowEnabled)this._shadowEnabled=true;var e=this._shadowOffset;if(e&&e.x!=a||e._y!=b){e.x=a;e.y=b}if(this._shadowOpacity!=c)this._shadowOpacity=c;this._setColorsString();if(this._shadowBlur!=
d)this._shadowBlur=d;this._setUpdateTextureDirty()},_enableShadow:function(a,b,c){if(!this._shadowColor)this._shadowColor=cc.color(255,255,255,128);this._shadowColor.r=a.r;this._shadowColor.g=a.g;this._shadowColor.b=a.b;this._enableShadowNoneColor(b.width||b.x||0,b.height||b.y||0,a.a!=null?a.a/255:0.5,c)},_getShadowOffsetX:function(){return this._shadowOffset.x},_setShadowOffsetX:function(a){if(false===this._shadowEnabled)this._shadowEnabled=true;if(this._shadowOffset.x!=a){this._shadowOffset.x=a;
this._setUpdateTextureDirty()}},_getShadowOffsetY:function(){return this._shadowOffset._y},_setShadowOffsetY:function(a){if(false===this._shadowEnabled)this._shadowEnabled=true;if(this._shadowOffset._y!=a){this._shadowOffset._y=a;this._setUpdateTextureDirty()}},_getShadowOffset:function(){return cc.p(this._shadowOffset.x,this._shadowOffset.y)},_setShadowOffset:function(a){if(false===this._shadowEnabled)this._shadowEnabled=true;if(this._shadowOffset.x!=a.x||this._shadowOffset.y!=a.y){this._shadowOffset.x=
a.x;this._shadowOffset.y=a.y;this._setUpdateTextureDirty()}},_getShadowOpacity:function(){return this._shadowOpacity},_setShadowOpacity:function(a){if(false===this._shadowEnabled)this._shadowEnabled=true;if(this._shadowOpacity!=a){this._shadowOpacity=a;this._setColorsString();this._setUpdateTextureDirty()}},_getShadowBlur:function(){return this._shadowBlur},_setShadowBlur:function(a){if(false===this._shadowEnabled)this._shadowEnabled=true;if(this._shadowBlur!=a){this._shadowBlur=a;this._setUpdateTextureDirty()}},
disableShadow:function(){if(this._shadowEnabled){this._shadowEnabled=false;this._setUpdateTextureDirty()}},enableStroke:function(a,b){if(this._strokeEnabled===false)this._strokeEnabled=true;var c=this._strokeColor;if(c.r!==a.r||c.g!==a.g||c.b!==a.b){c.r=a.r;c.g=a.g;c.b=a.b;this._setColorsString()}if(this._strokeSize!==b)this._strokeSize=b||0;this._setUpdateTextureDirty()},_getStrokeStyle:function(){return this._strokeColor},_setStrokeStyle:function(a){if(this._strokeEnabled===false)this._strokeEnabled=
true;var b=this._strokeColor;if(b.r!==a.r||b.g!==a.g||b.b!==a.b){b.r=a.r;b.g=a.g;b.b=a.b;this._setColorsString();this._setUpdateTextureDirty()}},_getLineWidth:function(){return this._strokeSize},_setLineWidth:function(a){if(this._strokeEnabled===false)this._strokeEnabled=true;if(this._strokeSize!==a){this._strokeSize=a||0;this._setUpdateTextureDirty()}},disableStroke:function(){if(this._strokeEnabled){this._strokeEnabled=false;this._setUpdateTextureDirty()}},setFontFillColor:null,_getFillStyle:function(){return this._textFillColor},
_updateWithTextDefinition:function(a,b){if(a.fontDimensions){this._dimensions.width=a.boundingWidth;this._dimensions.height=a.boundingHeight}else{this._dimensions.width=0;this._dimensions.height=0}this._hAlignment=a.textAlign;this._vAlignment=a.verticalAlign;this._fontName=a.fontName;this._fontSize=a.fontSize||12;this._fontStyleStr=this._fontSize+"px '"+this._fontName+"'";this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(this._fontName,this._fontSize);a.shadowEnabled&&this.enableShadow(a.shadowOffsetX,
a.shadowOffsetY,a.shadowOpacity,a.shadowBlur);a.strokeEnabled&&this.enableStroke(a.strokeStyle,a.lineWidth);this.setFontFillColor(a.fillStyle);b&&this._updateTexture()},_prepareTextDefinition:function(a){var b=new cc.FontDefinition;if(a){b.fontSize=this._fontSize;b.boundingWidth=cc.contentScaleFactor()*this._dimensions.width;b.boundingHeight=cc.contentScaleFactor()*this._dimensions.height}else{b.fontSize=this._fontSize;b.boundingWidth=this._dimensions.width;b.boundingHeight=this._dimensions.height}b.fontName=
this._fontName;b.textAlign=this._hAlignment;b.verticalAlign=this._vAlignment;if(this._strokeEnabled){b.strokeEnabled=true;var c=this._strokeColor;b.strokeStyle=cc.color(c.r,c.g,c.b);b.lineWidth=this._strokeSize}else b.strokeEnabled=false;if(this._shadowEnabled){b.shadowEnabled=true;b.shadowBlur=this._shadowBlur;b.shadowOpacity=this._shadowOpacity;b.shadowOffsetX=(a?cc.contentScaleFactor():1)*this._shadowOffset.x;b.shadowOffsetY=(a?cc.contentScaleFactor():1)*this._shadowOffset.y}else b._shadowEnabled=
false;a=this._textFillColor;b.fillStyle=cc.color(a.r,a.g,a.b);return b},_fontClientHeight:18,setString:function(a){a=String(a);if(this._originalText!=a){this._originalText=a+"";this._updateString();this._setUpdateTextureDirty()}},_updateString:function(){this._string=this._originalText},setHorizontalAlignment:function(a){if(a!==this._hAlignment){this._hAlignment=a;this._setUpdateTextureDirty()}},setVerticalAlignment:function(a){if(a!=this._vAlignment){this._vAlignment=a;this._setUpdateTextureDirty()}},
setDimensions:function(a,b){var c;if(b===undefined){c=a.width;b=a.height}else c=a;if(c!=this._dimensions.width||b!=this._dimensions.height){this._dimensions.width=c;this._dimensions.height=b;this._updateString();this._setUpdateTextureDirty()}},_getBoundingWidth:function(){return this._dimensions.width},_setBoundingWidth:function(a){if(a!=this._dimensions.width){this._dimensions.width=a;this._updateString();this._setUpdateTextureDirty()}},_getBoundingHeight:function(){return this._dimensions.height},
_setBoundingHeight:function(a){if(a!=this._dimensions.height){this._dimensions.height=a;this._updateString();this._setUpdateTextureDirty()}},setFontSize:function(a){if(this._fontSize!==a){this._fontSize=a;this._fontStyleStr=a+"px '"+this._fontName+"'";this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(this._fontName,a);this._setUpdateTextureDirty()}},setFontName:function(a){if(this._fontName&&this._fontName!=a){this._fontName=a;this._fontStyleStr=this._fontSize+"px '"+a+"'";this._fontClientHeight=
cc.LabelTTF.__getFontHeightByDiv(a,this._fontSize);this._setUpdateTextureDirty()}},_getFont:function(){return this._fontStyleStr},_setFont:function(a){var b=cc.LabelTTF._fontStyleRE.exec(a);if(b){this._fontSize=parseInt(b[1]);this._fontName=b[2];this._fontStyleStr=a;this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(this._fontName,this._fontSize);this._setUpdateTextureDirty()}},_drawTTFInCanvas:function(a){if(a){var b=this._strokeShadowOffsetX,c=this._strokeShadowOffsetY,d=this._contentSize.height-
c,e=this._vAlignment,f=this._hAlignment,g=this._fontClientHeight,h=this._strokeSize;a.setTransform(1,0,0,1,0+b*0.5,d+c*0.5);if(a.font!=this._fontStyleStr)a.font=this._fontStyleStr;a.fillStyle=this._fillColorStr;var j=c=0,k=this._strokeEnabled;if(k){a.lineWidth=h*2;a.strokeStyle=this._strokeColorStr}if(this._shadowEnabled){h=this._shadowOffset;a.shadowColor=this._shadowColorStr;a.shadowOffsetX=h.x;a.shadowOffsetY=-h.y;a.shadowBlur=this._shadowBlur}a.textBaseline=cc.LabelTTF._textBaseline[e];a.textAlign=
cc.LabelTTF._textAlign[f];b=this._contentSize.width-b;c+=f===cc.TEXT_ALIGNMENT_RIGHT?b:f===cc.TEXT_ALIGNMENT_CENTER?b/2:0;if(this._isMultiLine){f=this._strings.length;if(e===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM)j=g+d-g*f;else if(e===cc.VERTICAL_TEXT_ALIGNMENT_CENTER)j=g/2+(d-g*f)/2;for(e=0;e<f;e++){b=this._strings[e];h=-d+g*e+j;k&&a.strokeText(b,c,h);a.fillText(b,c,h)}}else{if(e!==cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM)j-=e===cc.VERTICAL_TEXT_ALIGNMENT_TOP?d:d*0.5;k&&a.strokeText(this._string,c,j);a.fillText(this._string,
c,j)}}},_getLabelContext:function(){if(this._labelContext)return this._labelContext;if(!this._labelCanvas){var a=cc.newElement("canvas"),b=new cc.Texture2D;b.initWithElement(a);this.texture=b;this._labelCanvas=a}return this._labelContext=this._labelCanvas.getContext("2d")},_checkWarp:function(a,b,c){var d=a[b],e=this._measure(d);if(e>c&&d.length>1){for(var f=d.length*(c/e)|0,g=d.substr(f),h=e-this._measure(g),j,k=0,m=0;h>c&&m++<100;){f*=c/h;f|=0;g=d.substr(f);h=e-this._measure(g)}for(m=0;h<c&&m++<
100;){if(g){k=(j=cc.LabelTTF._wordRex.exec(g))?j[0].length:1;j=g}f+=k;g=d.substr(f);h=e-this._measure(g)}f-=k;c=d.substr(0,f);if(cc.LabelTTF.wrapInspection)if(cc.LabelTTF._symbolRex.test(j||g)){e=cc.LabelTTF._lastWordRex.exec(c);f-=e?e[0].length:0;j=d.substr(f);c=d.substr(0,f)}if(cc.LabelTTF._firsrEnglish.test(j))if((e=cc.LabelTTF._lastEnglish.exec(c))&&c!==e[0]){f-=e[0].length;j=d.substr(f);c=d.substr(0,f)}a[b]=j||g;a.splice(b,0,c)}},_updateTTF:function(){var a=this._dimensions.width,b,c,d=this._lineWidths;
d.length=0;this._isMultiLine=false;this._measureConfig();if(a!==0){this._strings=this._string.split("\n");for(b=0;b<this._strings.length;b++)this._checkWarp(this._strings,b,a)}else{this._strings=this._string.split("\n");b=0;for(c=this._strings.length;b<c;b++)d.push(this._measure(this._strings[b]))}if(this._strings.length>0)this._isMultiLine=true;c=b=0;if(this._strokeEnabled)b=c=this._strokeSize*2;if(this._shadowEnabled){var e=this._shadowOffset;b+=Math.abs(e.x)*2;c+=Math.abs(e.y)*2}a=a===0?this._isMultiLine?
cc.size(0|Math.max.apply(Math,d)+b,0|this._fontClientHeight*this._strings.length+c):cc.size(0|this._measure(this._string)+b,0|this._fontClientHeight+c):this._dimensions.height===0?this._isMultiLine?cc.size(0|a+b,0|this._fontClientHeight*this._strings.length+c):cc.size(0|a+b,0|this._fontClientHeight+c):cc.size(0|a+b,0|this._dimensions.height+c);this.setContentSize(a);this._strokeShadowOffsetX=b;this._strokeShadowOffsetY=c;d=this._anchorPoint;this._anchorPointInPoints.x=b*0.5+(a.width-b)*d.x;this._anchorPointInPoints.y=
c*0.5+(a.height-c)*d.y},getContentSize:function(){this._needUpdateTexture&&this._updateTTF();return cc.Sprite.prototype.getContentSize.call(this)},_getWidth:function(){this._needUpdateTexture&&this._updateTTF();return cc.Sprite.prototype._getWidth.call(this)},_getHeight:function(){this._needUpdateTexture&&this._updateTTF();return cc.Sprite.prototype._getHeight.call(this)},_updateTexture:function(){var a=this._getLabelContext(),b=this._labelCanvas,c=this._contentSize;if(this._string.length===0){b.width=
1;b.height=c.height||1;this._texture&&this._texture.handleLoadedTexture();this.setTextureRect(cc.rect(0,0,1,c.height));return true}a.font=this._fontStyleStr;this._updateTTF();var d=c.width;c=c.height;var e=b.width==d&&b.height==c;b.width=d;b.height=c;e&&a.clearRect(0,0,d,c);this._drawTTFInCanvas(a);this._texture&&this._texture.handleLoadedTexture();this.setTextureRect(cc.rect(0,0,d,c));return true},visit:function(a){if(!(!this._string||this._string=="")){if(this._needUpdateTexture){this._needUpdateTexture=
false;this._updateTexture()}cc.Sprite.prototype.visit.call(this,a||cc._renderContext)}},draw:null,_setTextureCoords:function(a){var b=this._batchNode?this.textureAtlas.texture:this._texture;if(b){var c=b.pixelsWidth,d=b.pixelsHeight,e,f=this._quad;if(this._rectRotated){if(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL){b=(2*a.x+1)/(2*c);c=b+(a.height*2-2)/(2*c);e=(2*a.y+1)/(2*d);a=e+(a.width*2-2)/(2*d)}else{b=a.x/c;c=(a.x+a.height)/c;e=a.y/d;a=(a.y+a.width)/d}if(this._flippedX){d=e;e=a;a=d}if(this._flippedY){d=
b;b=c;c=d}f.bl.texCoords.u=b;f.bl.texCoords.v=e;f.br.texCoords.u=b;f.br.texCoords.v=a;f.tl.texCoords.u=c;f.tl.texCoords.v=e;f.tr.texCoords.u=c;f.tr.texCoords.v=a}else{if(cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL){b=(2*a.x+1)/(2*c);c=b+(a.width*2-2)/(2*c);e=(2*a.y+1)/(2*d);a=e+(a.height*2-2)/(2*d)}else{b=a.x/c;c=(a.x+a.width)/c;e=a.y/d;a=(a.y+a.height)/d}if(this._flippedX){d=b;b=c;c=d}if(this._flippedY){d=e;e=a;a=d}f.bl.texCoords.u=b;f.bl.texCoords.v=a;f.br.texCoords.u=c;f.br.texCoords.v=a;f.tl.texCoords.u=
b;f.tl.texCoords.v=e;f.tr.texCoords.u=c;f.tr.texCoords.v=e}this._quadDirty=true}}});
if(cc._renderType===cc._RENDER_TYPE_CANVAS){_p=cc.LabelTTF.prototype;_p.setColor=function(a){cc.Node.prototype.setColor.call(this,a);this._setColorsString()};_p._transformForRenderer=function(){if(this._needUpdateTexture){this._needUpdateTexture=false;this._updateTexture()}cc.Node.prototype._transformForRenderer.call(this)};_p._setColorsString=function(){this._setUpdateTextureDirty();var a=this._displayedColor,b=this._displayedOpacity,c=this._shadowColor||this._displayedColor,d=this._strokeColor,
e=this._textFillColor;this._shadowColorStr="rgba("+(0|c.r*0.5)+","+(0|c.g*0.5)+","+(0|c.b*0.5)+","+this._shadowOpacity+")";this._fillColorStr="rgba("+(0|a.r/255*e.r)+","+(0|a.g/255*e.g)+","+(0|a.b/255*e.b)+", "+b/255+")";this._strokeColorStr="rgba("+(0|a.r/255*d.r)+","+(0|a.g/255*d.g)+","+(0|a.b/255*d.b)+", "+b/255+")"};_p.updateDisplayedColor=function(a){cc.Node.prototype.updateDisplayedColor.call(this,a);this._setColorsString()};_p.setOpacity=function(a){if(this._opacity!==a){cc.Sprite.prototype.setOpacity.call(this,
a);this._setColorsString();this._setUpdateTextureDirty()}};_p.updateDisplayedOpacity=cc.Sprite.prototype.updateDisplayedOpacity;_p.initWithStringAndTextDefinition=function(a,b){this._updateWithTextDefinition(b,false);this.string=a;return true};_p.setFontFillColor=function(a){var b=this._textFillColor;if(b.r!=a.r||b.g!=a.g||b.b!=a.b){b.r=a.r;b.g=a.g;b.b=a.b;this._setColorsString();this._setUpdateTextureDirty()}};_p.draw=cc.Sprite.prototype.draw;_p.setTextureRect=function(a,b,c){this._rectRotated=b||
false;c=c||a;this.setContentSize(c);this.setVertexRect(a);b=this._rendererCmd._textureCoord;b.x=a.x;b.y=a.y;b.renderX=a.x;b.renderY=a.y;b.width=a.width;b.height=a.height;b.validRect=!(b.width===0||b.height===0||b.x<0||b.y<0);a=this._unflippedOffsetPositionFromCenter;if(this._flippedX)a.x=-a.x;if(this._flippedY)a.y=-a.y;this._offsetPosition.x=a.x+(this._contentSize.width-this._rect.width)/2;this._offsetPosition.y=a.y+(this._contentSize.height-this._rect.height)/2;if(this._batchNode)this.dirty=true};
_p=null}else{cc.assert(cc.isFunction(cc._tmp.WebGLLabelTTF),cc._LogInfos.MissingFile,"LabelTTFWebGL.js");cc._tmp.WebGLLabelTTF();delete cc._tmp.WebGLLabelTTF}cc.assert(cc.isFunction(cc._tmp.PrototypeLabelTTF),cc._LogInfos.MissingFile,"LabelTTFPropertyDefine.js");cc._tmp.PrototypeLabelTTF();delete cc._tmp.PrototypeLabelTTF;cc.LabelTTF._textAlign=["left","center","right"];cc.LabelTTF._textBaseline=["top","middle","bottom"];cc.LabelTTF.wrapInspection=true;cc.LabelTTF._wordRex=/([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)/;
cc.LabelTTF._symbolRex=/^[!,.:;}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/;cc.LabelTTF._lastWordRex=/([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)$/;cc.LabelTTF._lastEnglish=/[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+$/;cc.LabelTTF._firsrEnglish=/^[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]/;
cc.LabelTTF._fontStyleRE=/^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/;cc.LabelTTF.create=function(a,b,c,d,e,f){return new cc.LabelTTF(a,b,c,d,e,f)};cc.LabelTTF.createWithFontDefinition=cc.LabelTTF.create;cc.LabelTTF._SHADER_PROGRAM=cc.USE_LA88_LABELS?cc.SHADER_POSITION_TEXTURECOLOR:cc.SHADER_POSITION_TEXTUREA8COLOR;cc.LabelTTF.__labelHeightDiv=cc.newElement("div");cc.LabelTTF.__labelHeightDiv.style.fontFamily="Arial";cc.LabelTTF.__labelHeightDiv.style.position="absolute";
cc.LabelTTF.__labelHeightDiv.style.left="-100px";cc.LabelTTF.__labelHeightDiv.style.top="-100px";cc.LabelTTF.__labelHeightDiv.style.lineHeight="normal";document.body?document.body.appendChild(cc.LabelTTF.__labelHeightDiv):cc._addEventListener(window,"load",function(){this.removeEventListener("load",arguments.callee,false);document.body.appendChild(cc.LabelTTF.__labelHeightDiv)},false);
cc.LabelTTF.__getFontHeightByDiv=function(a,b){var c=cc.LabelTTF.__fontHeightCache[a+"."+b];if(c>0)return c;var d=cc.LabelTTF.__labelHeightDiv;d.innerHTML="ajghl~!";d.style.fontFamily=a;d.style.fontSize=b+"px";c=d.clientHeight;cc.LabelTTF.__fontHeightCache[a+"."+b]=c;d.innerHTML="";return c};cc.LabelTTF.__fontHeightCache={};cc=cc||{};cc._tmp=cc._tmp||{};cc.associateWithNative=function(){};
cc.KEY={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,
f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,",":186,equal:187,"=":187,";":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,"]":221,closebracket:221,backslash:220,quote:222,space:32};cc.FMT_JPG=0;cc.FMT_PNG=1;cc.FMT_TIFF=2;cc.FMT_RAWDATA=3;cc.FMT_WEBP=4;cc.FMT_UNKNOWN=5;
cc.getImageFormatByData=function(a){if(a.length>8&&a[0]==137&&a[1]==80&&a[2]==78&&a[3]==71&&a[4]==13&&a[5]==10&&a[6]==26&&a[7]==10)return cc.FMT_PNG;if(a.length>2&&(a[0]==73&&a[1]==73||a[0]==77&&a[1]==77||a[0]==255&&a[1]==216))return cc.FMT_TIFF;return cc.FMT_UNKNOWN};cc.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
cc.base=function(a,b){var c=arguments.callee.caller;if(c.superClass_)return ret=c.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var d=Array.prototype.slice.call(arguments,2),e=false,f=a.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[b]===c)e=true;else if(e)return f.prototype[b].apply(a,d);if(a[b]===c)return a.constructor.prototype[b].apply(a,d);else throw Error("cc.base called from a method of one name to a method of a different name");};
if(cc._renderType===cc._RENDER_TYPE_CANVAS){cc.rendererCanvas={childrenOrderDirty:true,_transformNodePool:[],_renderCmds:[],_isCacheToCanvasOn:false,_cacheToCanvasCmds:{},_cacheInstanceIds:[],_currentID:0,rendering:function(a){var b=this._renderCmds,c,d=cc.view.getScaleX(),e=cc.view.getScaleY(),f=a||cc._renderContext;a=0;for(c=b.length;a<c;a++)b[a].rendering(f,d,e)},_renderingToCacheCanvas:function(a,b){a||cc.log("The context of RenderTexture is invalid.");b=b||this._currentID;var c=this._cacheToCanvasCmds[b],
d,e;d=0;for(e=c.length;d<e;d++)c[d].rendering(a,1,1);c.length=0;a=this._cacheInstanceIds;delete this._cacheToCanvasCmds[b];cc.arrayRemoveObject(a,b);if(a.length===0)this._isCacheToCanvasOn=false;else this._currentID=a[a.length-1]},_turnToCacheMode:function(a){this._isCacheToCanvasOn=true;a=a||0;this._cacheToCanvasCmds[a]=[];this._cacheInstanceIds.push(a);this._currentID=a},_turnToNormalMode:function(){this._isCacheToCanvasOn=false},resetFlag:function(){this.childrenOrderDirty=false;this._transformNodePool.length=
0},transform:function(){var a=this._transformNodePool;a.sort(this._sortNodeByLevelAsc);for(var b=0,c=a.length;b<c;b++)a[b]._renderCmdDiry&&a[b]._transformForRenderer();a.length=0},transformDirty:function(){return this._transformNodePool.length>0},_sortNodeByLevelAsc:function(a,b){return a._curLevel-b._curLevel},pushDirtyNode:function(a){this._transformNodePool.push(a)},clearRenderCommands:function(){this._renderCmds.length=0},pushRenderCommand:function(a){if(this._isCacheToCanvasOn){var b=this._cacheToCanvasCmds[this._currentID];
b.indexOf(a)===-1&&b.push(a)}else this._renderCmds.indexOf(a)===-1&&this._renderCmds.push(a)}};cc.renderer=cc.rendererCanvas;cc.TextureRenderCmdCanvas=function(a){this._node=a;this._textureCoord={renderX:0,renderY:0,x:0,y:0,width:0,height:0,validRect:false}};cc.TextureRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node;a=a||cc._renderContext;var e=this._textureCoord;if(!(d._texture&&(e.width===0||e.height===0)))if(!(!e.validRect&&d._displayedOpacity===0))if(!(d._texture&&!d._texture._isLoaded)){var f=
d._transformWorld,g=d._offsetPosition.x,h=-d._offsetPosition.y-d._rect.height,j=d._rect.width,k=d._rect.height,m,n=d._blendFuncStr!=="source";m=d._displayedOpacity/255;if(f.a!==1||f.b!==0||f.c!==0||f.d!==1||d._flippedX||d._flippedY){a.save();a.globalAlpha=m;a.transform(f.a,f.c,f.b,f.d,f.tx*b,-f.ty*c);if(n)a.globalCompositeOperation=d._blendFuncStr;if(d._flippedX){g=-g-j;a.scale(-1,1)}if(d._flippedY){h=d._offsetPosition.y;a.scale(1,-1)}if(d._texture){m=d._texture._htmlElementObj;d._colorized?a.drawImage(m,
0,0,e.width,e.height,g*b,h*c,j*b,k*c):a.drawImage(m,e.renderX,e.renderY,e.width,e.height,g*b,h*c,j*b,k*c)}else{j=d._contentSize;if(e.validRect){d=d._displayedColor;a.fillStyle="rgba("+d.r+","+d.g+","+d.b+",1)";a.fillRect(g*b,h*c,j.width*b,j.height*c)}}a.restore()}else{if(n){a.save();a.globalCompositeOperation=d._blendFuncStr}a.globalAlpha=m;if(d._texture){m=d._texture.getHtmlElementObj();d._colorized?a.drawImage(m,0,0,e.width,e.height,(f.tx+g)*b,(-f.ty+h)*c,j*b,k*c):a.drawImage(m,e.renderX,e.renderY,
e.width,e.height,(f.tx+g)*b,(-f.ty+h)*c,j*b,k*c)}else{j=d._contentSize;if(e.validRect){d=d._displayedColor;a.fillStyle="rgba("+d.r+","+d.g+","+d.b+",1)";a.fillRect((f.tx+g)*b,(-f.ty+h)*c,j.width*b,j.height*c)}}n&&a.restore()}cc.g_NumberOfDraws++}};cc.RectRenderCmdCanvas=function(a){this._node=a};cc.RectRenderCmdCanvas.prototype.rendering=function(a,b,c){a=a||cc._renderContext;var d=this._node,e=d._transformWorld,f=d._displayedColor,g=d._displayedOpacity/255,h=d._contentSize.width,j=d._contentSize.height;
if(g!==0){var k=e.a!==1||e.b!==0||e.c!==0||e.d!==1,m=d._blendFuncStr!=="source"||k;if(m){a.save();a.globalCompositeOperation=d._blendFuncStr}a.globalAlpha=g;a.fillStyle="rgba("+(0|f.r)+","+(0|f.g)+","+(0|f.b)+", 1)";if(k){a.transform(e.a,e.c,e.b,e.d,e.tx*b,-e.ty*c);a.fillRect(0,0,h*b,-j*c)}else a.fillRect(e.tx*b,-e.ty*c,h*b,-j*c);m&&a.restore();cc.g_NumberOfDraws++}};cc.GradientRectRenderCmdCanvas=function(a){this._node=a;this._startPoint=cc.p(0,0);this._endPoint=cc.p(0,0);this._endStopStr=this._startStopStr=
null};cc.GradientRectRenderCmdCanvas.prototype.rendering=function(a,b,c){a=a||cc._renderContext;var d=this._node,e=d._displayedOpacity/255,f=d._transformWorld;if(e!==0){var g=f.a!==1||f.b!==0||f.c!==0||f.d!==1,h=d._blendFuncStr!=="source"||g;if(h){a.save();a.globalCompositeOperation=d._blendFuncStr}a.globalAlpha=e;e=d._contentSize.width;d=d._contentSize.height;var j=a.createLinearGradient(this._startPoint.x,this._startPoint.y,this._endPoint.x,this._endPoint.y);j.addColorStop(0,this._startStopStr);
j.addColorStop(1,this._endStopStr);a.fillStyle=j;if(g){a.transform(f.a,f.c,f.b,f.d,f.tx*b,-f.ty*c);a.fillRect(0,0,e*b,-d*c)}else a.fillRect(f.tx*b,-f.ty*c,e*b,-d*c);h&&a.restore();cc.g_NumberOfDraws++}};cc.ParticleRenderCmdCanvas=function(a){this._node=a};cc.ParticleRenderCmdCanvas.prototype.rendering=function(a,b,c){a=a||cc._renderContext;var d=this._node,e=d._transformWorld,f=d._pointRect;a.save();a.transform(e.a,e.c,e.b,e.d,e.tx*b,-e.ty*c);a.globalCompositeOperation=d.isBlendAdditive()?"lighter":
"source-over";var g;b=this._node.particleCount;c=this._node._particles;if(cc.ParticleSystem.SHAPE_MODE==cc.ParticleSystem.TEXTURE_MODE){if(!d._texture||!d._texture._isLoaded){a.restore();return}var h=d._texture.getHtmlElementObj();if(!h.width||!h.height){a.restore();return}var j=cc.textureCache,k=h;for(d=0;d<b;d++){e=c[d];g=e.color.a/255;if(g!==0){a.globalAlpha=g;a.save();a.translate(0|e.drawPos.x,-(0|e.drawPos.y));var m=Math.floor(e.size/4)*4;g=f.width;var n=f.height;a.scale(Math.max(1/g*m,1.0E-6),
Math.max(1/n*m,1.0E-6));e.rotation&&a.rotate(cc.degreesToRadians(e.rotation));if(e.isChangeColor)if(m=j.getTextureColors(h)){if(!m.tintCache){m.tintCache=cc.newElement("canvas");m.tintCache.width=h.width;m.tintCache.height=h.height}cc.generateTintImage(h,m,e.color,this._pointRect,m.tintCache);k=m.tintCache}a.drawImage(k,-(0|g/2),-(0|n/2));a.restore()}}}else{h=cc._drawingUtil;for(d=0;d<b;d++){e=c[d];f=0|e.size*0.5;g=e.color.a/255;if(g!==0){a.globalAlpha=g;a.save();a.translate(0|e.drawPos.x,-(0|e.drawPos.y));
if(cc.ParticleSystem.BALL_SHAPE==cc.ParticleSystem.STAR_SHAPE){e.rotation&&a.rotate(cc.degreesToRadians(e.rotation));h.drawStar(a,f,e.color)}else h.drawColorBall(a,f,e.color);a.restore()}}}a.restore();cc.g_NumberOfDraws++};cc.ProgressRenderCmdCanvas=function(a){this._PI180=Math.PI/180;this._node=a;this._sprite=null;this._type=cc.ProgressTimer.TYPE_RADIAL;this._barRect=cc.rect(0,0,0,0);this._origin=cc.p(0,0);this._radius=0;this._endAngle=this._startAngle=270;this._counterClockWise=false};cc.ProgressRenderCmdCanvas.prototype.rendering=
function(a,b,c){a=a||cc._renderContext;var d=this._sprite,e=d._rendererCmd._textureCoord,f=d._displayedOpacity/255;if(!(e.width===0||e.height===0))if(!(!d._texture||!e.validRect||f===0)){var g=this._node._transformWorld;a.save();a.transform(g.a,g.c,g.b,g.d,g.tx*b,-g.ty*c);if(d._blendFuncStr!="source")a.globalCompositeOperation=d._blendFuncStr;a.globalAlpha=f;var h=d._rect,j=d._offsetPosition;f=d._drawSize_Canvas;g=0|j.x;var k=-j.y-h.height;f.width=h.width*b;f.height=h.height*c;if(d._flippedX){g=-j.x-
h.width;a.scale(-1,1)}if(d._flippedY){k=j.y;a.scale(1,-1)}g*=b;k*=c;if(this._type==cc.ProgressTimer.TYPE_BAR){h=this._barRect;a.beginPath();a.rect(h.x*b,h.y*c,h.width*b,h.height*c);a.clip();a.closePath()}else if(this._type==cc.ProgressTimer.TYPE_RADIAL){b=this._origin.x*b;h=this._origin.y*c;a.beginPath();a.arc(b,h,this._radius*c,this._PI180*this._startAngle,this._PI180*this._endAngle,this._counterClockWise);a.lineTo(b,h);a.clip();a.closePath()}c=d._texture.getHtmlElementObj();a.drawImage(c,e.renderX,
e.renderY,e.width,e.height,g,k,f.width,f.height);a.restore();cc.g_NumberOfDraws++}};cc.DrawNodeRenderCmdCanvas=function(a){this._node=a;this._blendFunc=this._drawColor=this._buffer=null};cc.DrawNodeRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=a||cc._renderContext,e=this,f=e._node,g=f._displayedOpacity/255;if(g!==0){d.globalAlpha=g;f=f._transformWorld;d.save();a.transform(f.a,f.c,f.b,f.d,f.tx*b,-f.ty*c);if(e._blendFunc&&e._blendFunc.src==cc.SRC_ALPHA&&e._blendFunc.dst==cc.ONE)d.globalCompositeOperation=
"lighter";a=e._buffer;f=0;for(g=a.length;f<g;f++){var h=a[f];switch(h.type){case cc.DrawNode.TYPE_DOT:e._drawDot(d,h,b,c);break;case cc.DrawNode.TYPE_SEGMENT:e._drawSegment(d,h,b,c);break;case cc.DrawNode.TYPE_POLY:e._drawPoly(d,h,b,c);break}}d.restore()}};cc.DrawNodeRenderCmdCanvas.prototype._drawDot=function(a,b,c,d){var e=b.fillColor,f=b.verts[0];b=b.lineWidth;a.fillStyle="rgba("+(0|e.r)+","+(0|e.g)+","+(0|e.b)+","+e.a/255+")";a.beginPath();a.arc(f.x*c,-f.y*d,b*c,0,Math.PI*2,false);a.closePath();
a.fill()};cc.DrawNodeRenderCmdCanvas.prototype._drawSegment=function(a,b,c,d){var e=b.lineColor,f=b.verts[0],g=b.verts[1],h=b.lineWidth;b=b.lineCap;a.strokeStyle="rgba("+(0|e.r)+","+(0|e.g)+","+(0|e.b)+","+e.a/255+")";a.lineWidth=h*c;a.beginPath();a.lineCap=b;a.moveTo(f.x*c,-f.y*d);a.lineTo(g.x*c,-g.y*d);a.stroke()};cc.DrawNodeRenderCmdCanvas.prototype._drawPoly=function(a,b,c,d){var e=b.verts,f=b.fillColor,g=b.lineWidth,h=b.lineColor,j=b.isClosePolygon,k=b.isFill,m=b.isStroke;if(e!=null){var n=e[0];
a.lineCap=b.lineCap;if(f)a.fillStyle="rgba("+(0|f.r)+","+(0|f.g)+","+(0|f.b)+","+f.a/255+")";if(g)a.lineWidth=g*c;if(h)a.strokeStyle="rgba("+(0|h.r)+","+(0|h.g)+","+(0|h.b)+","+h.a/255+")";a.beginPath();a.moveTo(n.x*c,-n.y*d);b=1;for(f=e.length;b<f;b++)a.lineTo(e[b].x*c,-e[b].y*d);j&&a.closePath();k&&a.fill();m&&a.stroke()}};cc.ClippingNodeSaveRenderCmdCanvas=function(a){this._node=a};cc.ClippingNodeSaveRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node;a=a||cc._renderContext;if(d._clipElemType){b=
cc.ClippingNode._getSharedCache();c=a.canvas;b.width=c.width;b.height=c.height;b.getContext("2d").drawImage(c,0,0);a.save()}else{d.transform();d=d._transformWorld;a.save();a.save();a.transform(d.a,d.c,d.b,d.d,d.tx*b,-d.ty*c)}};cc.ClippingNodeClipRenderCmdCanvas=function(a){this._node=a};cc.ClippingNodeClipRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node;a=a||cc._renderContext;if(d._clipElemType){a.globalCompositeOperation=d.inverted?"destination-out":"destination-in";d=d._transformWorld;
a.transform(d.a,d.c,d.b,d.d,d.tx*b,-d.ty*c)}else{a.restore();if(d.inverted){b=a.canvas;a.save();a.setTransform(1,0,0,1,0,0);a.moveTo(0,0);a.lineTo(0,b.height);a.lineTo(b.width,b.height);a.lineTo(b.width,0);a.lineTo(0,0);a.restore()}a.clip()}};cc.ClippingNodeRestoreRenderCmdCanvas=function(a){this._node=a};cc.ClippingNodeRestoreRenderCmdCanvas.prototype.rendering=function(a){var b=this._node,c=cc.ClippingNode._getSharedCache();a=a||cc._renderContext;if(b._clipElemType){a.restore();a.save();a.setTransform(1,
0,0,1,0,0);a.globalCompositeOperation="destination-over";a.drawImage(c,0,0)}a.restore()};cc.PhysicsDebugNodeRenderCmdCanvas=function(a){this._node=a;this._buffer=a._buffer};cc.PhysicsDebugNodeRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node;if(d._space){d._space.eachShape(cc.DrawShape.bind(d));d._space.eachConstraint(cc.DrawConstraint.bind(d));cc.DrawNodeRenderCmdCanvas.prototype.rendering.call(this,a,b,c);d.clear()}};cc.PhysicsDebugNodeRenderCmdCanvas.prototype._drawDot=cc.DrawNodeRenderCmdCanvas.prototype._drawDot;
cc.PhysicsDebugNodeRenderCmdCanvas.prototype._drawSegment=cc.DrawNodeRenderCmdCanvas.prototype._drawSegment;cc.PhysicsDebugNodeRenderCmdCanvas.prototype._drawPoly=cc.DrawNodeRenderCmdCanvas.prototype._drawPoly;cc.TMXLayerRenderCmdCanvas=function(a){this._node=a;this._childrenRenderCmds=[]};cc.TMXLayerRenderCmdCanvas.prototype._copyRendererCmds=function(a){if(a){var b=this._childrenRenderCmds;for(var c=b.length=0,d=a.length;c<d;c++)b[c]=a[c]}};cc.TMXLayerRenderCmdCanvas.prototype._renderingChildToCache=
function(a,b){var c=this._node;if(c._cacheDirty){var d=this._childrenRenderCmds,e=c._cacheContext,f=c._cacheCanvas;e.save();e.clearRect(0,0,f.width,-f.height);f=cc.affineTransformInvert(c._transformWorld);e.transform(f.a,f.c,f.b,f.d,f.tx*a,-f.ty*b);f=0;for(var g=d.length;f<g;f++){d[f].rendering(e,a,b);if(d[f]._node)d[f]._node._cacheDirty=false}e.restore();c._cacheDirty=false}};cc.TMXLayerRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node,e=d._displayedOpacity/255;if(!(e<=0)){this._renderingChildToCache(b,
c);a=a||cc._renderContext;a.globalAlpha=e;e=0|-d._anchorPointInPoints.x;var f=0|-d._anchorPointInPoints.y,g=d._cacheCanvas,h=d._transformWorld;if(g&&g.width!==0&&g.height!==0){a.save();a.transform(h.a,h.c,h.b,h.d,h.tx*b,-h.ty*c);h=g.height*c;d.layerOrientation===cc.TMX_ORIENTATION_HEX?a.drawImage(g,0,0,g.width,g.height,e,-(f+h)+d._mapTileSize.height*0.5*c,g.width*b,h):a.drawImage(g,0,0,g.width,g.height,e,-(f+h),g.width*b,h);a.restore()}cc.g_NumberOfDraws++}};cc.CustomRenderCmdCanvas=function(a,b){this._node=
a;this._callback=b};cc.CustomRenderCmdCanvas.prototype.rendering=function(a,b,c){this._callback&&this._callback.call(this._node,a,b,c)};cc.SkeletonRenderCmdCanvas=function(a){this._node=a};cc.SkeletonRenderCmdCanvas.prototype.rendering=function(a,b,c){var d=this._node;a=a||cc._renderContext;if(d._debugSlots||d._debugBones){var e=d._transformWorld;a.save();a.transform(e.a,e.c,e.b,e.d,e.tx*b,-e.ty*c);b=d._skeleton;var f,g,h=cc._drawingUtil;if(d._debugSlots){h.setDrawColor(0,0,255,255);h.setLineWidth(1);
var j=[];c=0;for(e=b.slots.length;c<e;c++){g=b.drawOrder[c];if(!(!g.attachment||g.attachment.type!=sp.ATTACHMENT_TYPE.REGION)){f=g.attachment;sp._regionAttachment_updateSlotForCanvas(f,g,j);h.drawPoly(j,4,true)}}}if(d._debugBones){h.setLineWidth(2);h.setDrawColor(255,0,0,255);c=0;for(e=b.bones.length;c<e;c++){d=b.bones[c];h.drawLine({x:d.worldX,y:d.worldY},{x:d.data.length*d.m00+d.worldX,y:d.data.length*d.m10+d.worldY})}h.setPointSize(4);h.setDrawColor(0,0,255,255);c=0;for(e=b.bones.length;c<e;c++){d=
b.bones[c];h.drawPoint({x:d.worldX,y:d.worldY});c===0&&h.setDrawColor(0,255,0,255)}}a.restore()}}}
cc._LogInfos={ActionManager_addAction:"cc.ActionManager.addAction(): action must be non-null",ActionManager_removeAction:"cocos2d: removeAction: Target not found",ActionManager_removeActionByTag:"cc.ActionManager.removeActionByTag(): an invalid tag",ActionManager_removeActionByTag_2:"cc.ActionManager.removeActionByTag(): target must be non-null",ActionManager_getActionByTag:"cc.ActionManager.getActionByTag(): an invalid tag",ActionManager_getActionByTag_2:"cocos2d : getActionByTag(tag = %s): Action not found",
configuration_dumpInfo:"cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",configuration_loadConfigFile:"Expected 'data' dict, but not found. Config file: %s",configuration_loadConfigFile_2:"Please load the resource first : %s",Director_resume:"cocos2d: Director: Error in gettimeofday",Director_setProjection:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel_2:"cocos2d: Director: Error in gettimeofday",
Director_popScene:"running scene should not null",Director_pushScene:"the scene should not null",arrayVerifyType:"element type is wrong!",Scheduler_scheduleCallbackForTarget:"CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",Scheduler_scheduleCallbackForTarget_2:"cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",Scheduler_scheduleCallbackForTarget_3:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",Scheduler_pauseTarget:"cc.Scheduler.pauseTarget():target should be non-null",
Scheduler_resumeTarget:"cc.Scheduler.resumeTarget():target should be non-null",Scheduler_isTargetPaused:"cc.Scheduler.isTargetPaused():target should be non-null",Node_getZOrder:"getZOrder is deprecated. Please use getLocalZOrder instead.",Node_setZOrder:"setZOrder is deprecated. Please use setLocalZOrder instead.",Node_getRotation:"RotationX != RotationY. Don't know which one to return",Node_getScale:"ScaleX != ScaleY. Don't know which one to return",Node_addChild:"An Node can't be added as a child of itself.",
Node_addChild_2:"child already added. It can't be added again",Node_addChild_3:"child must be non-null",Node_removeFromParentAndCleanup:"removeFromParentAndCleanup is deprecated. Use removeFromParent instead",Node_boundingBox:"boundingBox is deprecated. Use getBoundingBox instead",Node_removeChildByTag:"argument tag is an invalid tag",Node_removeChildByTag_2:"cocos2d: removeChildByTag(tag = %s): child not found!",Node_removeAllChildrenWithCleanup:"removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",
Node_stopActionByTag:"cc.Node.stopActionBy(): argument tag an invalid tag",Node_getActionByTag:"cc.Node.getActionByTag(): argument tag is an invalid tag",Node_resumeSchedulerAndActions:"resumeSchedulerAndActions is deprecated, please use resume instead.",Node_pauseSchedulerAndActions:"pauseSchedulerAndActions is deprecated, please use pause instead.",Node__arrayMakeObjectsPerformSelector:"Unknown callback function",Node_reorderChild:"child must be non-null",Node_runAction:"cc.Node.runAction(): action must be non-null",
Node_schedule:"callback function must be non-null",Node_schedule_2:"interval must be positive",Node_initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",AtlasNode_updateAtlasValues:"cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",AtlasNode_initWithTileFile:"",AtlasNode__initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",_EventListenerKeyboard_checkAvailable:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",
_EventListenerTouchOneByOne_checkAvailable:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",_EventListenerTouchAllAtOnce_checkAvailable:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",_EventListenerAcceleration_checkAvailable:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",EventListener_create:"Invalid parameter.",__getListenerID:"Don't call this method if the event is for touch.",
eventManager__forceAddEventListener:"Invalid scene graph priority!",eventManager_addListener:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",eventManager_removeListeners:"Invalid listener type!",eventManager_setPriority:"Can't set fixed priority with scene graph based listener.",eventManager_addListener_2:"Invalid parameters.",eventManager_addListener_3:"listener must be a cc.EventListener object when adding a fixed priority listener",eventManager_addListener_4:"The listener has been registered, please don't register it again.",
LayerMultiplex_initWithLayers:"parameters should not be ending with null in Javascript",LayerMultiplex_switchTo:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_switchToAndReleaseMe:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_addLayer:"cc.Layer.addLayer(): layer should be non-null",EGLView_setDesignResolutionSize:"Resolution not valid",EGLView_setDesignResolutionSize_2:"should set resolutionPolicy",inputManager_handleTouchesBegin:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",
swap:"cc.swap is being modified from original macro, please check usage",checkGLErrorDebug:"WebGL error %s",animationCache__addAnimationsWithDictionary:"cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",animationCache__addAnimationsWithDictionary_2:"cc.AnimationCache. Invalid animation format",animationCache_addAnimations:"cc.AnimationCache.addAnimations(): File could not be found",animationCache__parseVersion1:"cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
animationCache__parseVersion1_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache__parseVersion1_3:"cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",animationCache__parseVersion1_4:"cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",
animationCache__parseVersion2:"cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion2_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache_addAnimations_2:"cc.AnimationCache.addAnimations(): Invalid texture file name",Sprite_reorderChild:"cc.Sprite.reorderChild(): this child is not in children list",
Sprite_ignoreAnchorPointForPosition:"cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",Sprite_setDisplayFrameWithAnimationName:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",Sprite_setDisplayFrameWithAnimationName_2:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",Sprite_setDisplayFrame:"setDisplayFrame is deprecated, please use setSpriteFrame instead.",Sprite__updateBlendFunc:"cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",
Sprite_initWithSpriteFrame:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",Sprite_initWithSpriteFrameName:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",Sprite_initWithSpriteFrameName1:" is null, please check.",Sprite_initWithFile:"cc.Sprite.initWithFile(): filename should be non-null",Sprite_setDisplayFrameWithAnimationName_3:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",Sprite_reorderChild_2:"cc.Sprite.reorderChild(): child should be non-null",
Sprite_addChild:"cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",Sprite_addChild_2:"cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",Sprite_addChild_3:"cc.Sprite.addChild(): child should be non-null",Sprite_setTexture:"cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",Sprite_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
Sprite_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_4:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_5:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",Sprite_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",Sprite_setSpriteFrame:"Invalid spriteFrameName",Sprite_setTexture_2:"Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",
Sprite_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",Sprite_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",Sprite_addChild_6:"cc.SpriteBatchNode.addChild(): child should be non-null",SpriteBatchNode_addSpriteWithoutQuad:"cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",SpriteBatchNode_increaseAtlasCapacity:"cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",
SpriteBatchNode_increaseAtlasCapacity_2:"cocos2d: WARNING: Not enough memory to resize the atlas",SpriteBatchNode_reorderChild:"cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",SpriteBatchNode_removeChild:"cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",SpriteBatchNode_addSpriteWithoutQuad_2:"cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",SpriteBatchNode_reorderChild_2:"cc.SpriteBatchNode.addChild():child should be non-null",spriteFrameCache__getFrameConfig:"cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",
spriteFrameCache_addSpriteFrames:"cocos2d: WARNING: an alias with name %s already exists",spriteFrameCache__checkConflict:"cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",spriteFrameCache_getSpriteFrame:"cocos2d: cc.SpriteFrameCahce: Frame %s not found",spriteFrameCache__getFrameConfig_2:"Please load the resource first : %s",spriteFrameCache_addSpriteFrames_2:"cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",spriteFrameCache_addSpriteFrames_3:"Argument must be non-nil",
CCSpriteBatchNode_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_addChild:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",CCSpriteBatchNode_addChild_2:"cc.Sprite.addChild(): child should be non-null",
CCSpriteBatchNode_setSpriteFrame:"Invalid spriteFrameName",CCSpriteBatchNode_setTexture:"Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",CCSpriteBatchNode_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_addChild_3:"cc.SpriteBatchNode.addChild(): child should be non-null",TextureAtlas_initWithFile:"cocos2d: Could not open file: %s",
TextureAtlas_insertQuad:"cc.TextureAtlas.insertQuad(): invalid totalQuads",TextureAtlas_initWithTexture:"cc.TextureAtlas.initWithTexture():texture should be non-null",TextureAtlas_updateQuad:"cc.TextureAtlas.updateQuad(): quad should be non-null",TextureAtlas_updateQuad_2:"cc.TextureAtlas.updateQuad(): Invalid index",TextureAtlas_insertQuad_2:"cc.TextureAtlas.insertQuad(): Invalid index",TextureAtlas_insertQuads:"cc.TextureAtlas.insertQuad(): Invalid index + amount",TextureAtlas_insertQuadFromIndex:"cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",
TextureAtlas_insertQuadFromIndex_2:"cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",TextureAtlas_removeQuadAtIndex:"cc.TextureAtlas.removeQuadAtIndex(): Invalid index",TextureAtlas_removeQuadsAtIndex:"cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",TextureAtlas_moveQuadsFromIndex:"cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",TextureAtlas_moveQuadsFromIndex_2:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",TextureAtlas_moveQuadsFromIndex_3:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",
textureCache_addPVRTCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_addETCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_textureForKey:"textureForKey is deprecated. Please use getTextureForKey instead.",textureCache_addPVRImage:"addPVRImage does not support on HTML5",textureCache_addUIImage:"cocos2d: Couldn't add UIImage in TextureCache",textureCache_dumpCachedTextureInfo:"cocos2d: '%s' id=%s %s x %s",textureCache_dumpCachedTextureInfo_2:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",
textureCache_dumpCachedTextureInfo_3:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",textureCache_addUIImage_2:"cc.Texture.addUIImage(): image should be non-null",Texture2D_initWithETCFile:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData:"initWithPVRTCData does not support on HTML5",Texture2D_addImage:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithImage:"cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",
Texture2D_initWithImage_2:"cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",Texture2D_initWithString:"initWithString isn't supported on cocos2d-html5",Texture2D_initWithETCFile_2:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile_2:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData_2:"initWithPVRTCData does not support on HTML5",Texture2D_bitsPerPixelForFormat:"bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",
Texture2D__initPremultipliedATextureWithImage:"cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",Texture2D_addImage_2:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithData:"NSInternalInconsistencyException",MissingFile:"Missing file: %s",radiansToDegress:"cc.radiansToDegress() should be called cc.radiansToDegrees()",RectWidth:"Rect width exceeds maximum margin: %s",RectHeight:"Rect height exceeds maximum margin: %s",EventManager__updateListeners:"If program goes here, there should be event in dispatch.",
EventManager__updateListeners_2:"_inDispatch should be 1 here."};
cc._logToWebPage=function(a){if(cc._canvas){var b=cc._logList,c=document;if(!b){var d=c.createElement("Div");b=d.style;d.setAttribute("id","logInfoDiv");cc._canvas.parentNode.appendChild(d);d.setAttribute("width","200");d.setAttribute("height",cc._canvas.height);b.zIndex="99999";b.position="absolute";b.top="0";b.left="0";b=cc._logList=c.createElement("textarea");c=b.style;b.setAttribute("rows","20");b.setAttribute("cols","30");b.setAttribute("disabled",true);d.appendChild(b);c.backgroundColor="transparent";
c.borderBottom="1px solid #cccccc";c.borderRightWidth="0px";c.borderLeftWidth="0px";c.borderTopWidth="0px";c.borderTopStyle="none";c.borderRightStyle="none";c.borderLeftStyle="none";c.padding="0px";c.margin=0}b.value=b.value+a+"\r\n";b.scrollTop=b.scrollHeight}};cc._formatString=function(a){if(cc.isObject(a))try{return JSON.stringify(a)}catch(b){return""}else return a};
cc._initDebugSetting=function(a){var b=cc.game;if(a!=b.DEBUG_MODE_NONE){var c;if(a>b.DEBUG_MODE_ERROR){c=cc._logToWebPage.bind(cc);cc.error=function(){c("ERROR :  "+cc.formatStr.apply(cc,arguments))};cc.assert=function(d,e){if(!d&&e){for(var f=2;f<arguments.length;f++)e=e.replace(/(%s)|(%d)/,cc._formatString(arguments[f]));c("Assert: "+e)}};if(a!=b.DEBUG_MODE_ERROR_FOR_WEB_PAGE)cc.warn=function(){c("WARN :  "+cc.formatStr.apply(cc,arguments))};if(a==b.DEBUG_MODE_INFO_FOR_WEB_PAGE)cc.log=function(){c(cc.formatStr.apply(cc,
arguments))}}else if(console){cc.error=function(){return console.error.apply(console,arguments)};cc.assert=function(d,e){if(!d&&e){for(var f=2;f<arguments.length;f++)e=e.replace(/(%s)|(%d)/,cc._formatString(arguments[f]));throw e;}};if(a!=b.DEBUG_MODE_ERROR)cc.warn=function(){return console.warn.apply(console,arguments)};if(a==b.DEBUG_MODE_INFO)cc.log=function(){return console.log.apply(console,arguments)}}}};cc._initDebugSetting(cc.game.config[cc.game.CONFIG_KEY.debugMode]);
cc.HashElement=cc.Class.extend({actions:null,target:null,actionIndex:0,currentAction:null,currentActionSalvaged:false,paused:false,hh:null,ctor:function(){this.actions=[];this.target=null;this.actionIndex=0;this.currentAction=null;this.paused=this.currentActionSalvaged=false;this.hh=null}});
cc.ActionManager=cc.Class.extend({_hashTargets:null,_arrayTargets:null,_currentTarget:null,_currentTargetSalvaged:false,_searchElementByTarget:function(a,b){for(var c=0;c<a.length;c++)if(b==a[c].target)return a[c];return null},ctor:function(){this._hashTargets={};this._arrayTargets=[];this._currentTarget=null;this._currentTargetSalvaged=false},addAction:function(a,b,c){if(!a)throw"cc.ActionManager.addAction(): action must be non-null";if(!b)throw"cc.ActionManager.addAction(): action must be non-null";
var d=this._hashTargets[b.__instanceId];if(!d){d=new cc.HashElement;d.paused=c;d.target=b;this._hashTargets[b.__instanceId]=d;this._arrayTargets.push(d)}this._actionAllocWithHashElement(d);d.actions.push(a);a.startWithTarget(b)},removeAllActions:function(){for(var a=this._arrayTargets,b=0;b<a.length;b++){var c=a[b];c&&this.removeAllActionsFromTarget(c.target,true)}},removeAllActionsFromTarget:function(a,b){if(a!=null)if(a=this._hashTargets[a.__instanceId]){if(a.actions.indexOf(a.currentAction)!==
-1&&!a.currentActionSalvaged)a.currentActionSalvaged=true;a.actions.length=0;if(this._currentTarget==a&&!b)this._currentTargetSalvaged=true;else this._deleteHashElement(a)}},removeAction:function(a){if(a!=null){var b=this._hashTargets[a.getOriginalTarget().__instanceId];if(b)for(var c=0;c<b.actions.length;c++){if(b.actions[c]==a){b.actions.splice(c,1);break}}else cc.log(cc._LogInfos.ActionManager_removeAction)}},removeActionByTag:function(a,b){a==cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_addAction);
cc.assert(b,cc._LogInfos.ActionManager_addAction);var c=this._hashTargets[b.__instanceId];if(c)for(var d=c.actions.length,e=0;e<d;++e){var f=c.actions[e];if(f&&f.getTag()===a&&f.getOriginalTarget()==b){this._removeActionAtIndex(e,c);break}}},getActionByTag:function(a,b){a==cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_getActionByTag);if(b=this._hashTargets[b.__instanceId]){if(b.actions!=null)for(var c=0;c<b.actions.length;++c){var d=b.actions[c];if(d&&d.getTag()===a)return d}cc.log(cc._LogInfos.ActionManager_getActionByTag_2,
a)}return null},numberOfRunningActionsInTarget:function(a){if(a=this._hashTargets[a.__instanceId])return a.actions?a.actions.length:0;return 0},pauseTarget:function(a){if(a=this._hashTargets[a.__instanceId])a.paused=true},resumeTarget:function(a){if(a=this._hashTargets[a.__instanceId])a.paused=false},pauseAllRunningActions:function(){for(var a=[],b=this._arrayTargets,c=0;c<b.length;c++){var d=b[c];if(d&&!d.paused){d.paused=true;a.push(d.target)}}return a},resumeTargets:function(a){if(a)for(var b=
0;b<a.length;b++)a[b]&&this.resumeTarget(a[b])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdateForTarget(this)},_removeActionAtIndex:function(a,b){if(b.actions[a]==b.currentAction&&!b.currentActionSalvaged)b.currentActionSalvaged=true;b.actions.splice(a,1);b.actionIndex>=a&&b.actionIndex--;if(b.actions.length==0)if(this._currentTarget==b)this._currentTargetSalvaged=true;else this._deleteHashElement(b)},_deleteHashElement:function(a){if(a){delete this._hashTargets[a.target.__instanceId];
cc.arrayRemoveObject(this._arrayTargets,a);a.actions=null;a.target=null}},_actionAllocWithHashElement:function(a){if(a.actions==null)a.actions=[]},update:function(a){for(var b=this._arrayTargets,c,d=0;d<b.length;d++){c=this._currentTarget=b[d];if(!c.paused)for(c.actionIndex=0;c.actionIndex<c.actions.length;c.actionIndex++){c.currentAction=c.actions[c.actionIndex];if(c.currentAction){c.currentActionSalvaged=false;c.currentAction.step(a*(c.currentAction._speedMethod?c.currentAction._speed:1));if(c.currentActionSalvaged)c.currentAction=
null;else if(c.currentAction.isDone()){c.currentAction.stop();var e=c.currentAction;c.currentAction=null;this.removeAction(e)}c.currentAction=null}}this._currentTargetSalvaged&&c.actions.length===0&&this._deleteHashElement(c)}}});cc.ACTION_TAG_INVALID=-1;
cc.Action=cc.Class.extend({originalTarget:null,target:null,tag:cc.ACTION_TAG_INVALID,ctor:function(){this.target=this.originalTarget=null;this.tag=cc.ACTION_TAG_INVALID},copy:function(){cc.log("copy is deprecated. Please use clone instead.");return this.clone()},clone:function(){var a=new cc.Action;a.originalTarget=null;a.target=null;a.tag=this.tag;return a},isDone:function(){return true},startWithTarget:function(a){this.target=this.originalTarget=a},stop:function(){this.target=null},step:function(){cc.log("[Action step]. override me")},
update:function(){cc.log("[Action update]. override me")},getTarget:function(){return this.target},setTarget:function(a){this.target=a},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(a){this.originalTarget=a},getTag:function(){return this.tag},setTag:function(a){this.tag=a},retain:function(){},release:function(){}});cc.action=function(){return new cc.Action};cc.Action.create=cc.action;
cc.FiniteTimeAction=cc.Action.extend({_duration:0,ctor:function(){cc.Action.prototype.ctor.call(this);this._duration=0},getDuration:function(){return this._duration*(this._times||1)},setDuration:function(a){this._duration=a},reverse:function(){cc.log("cocos2d: FiniteTimeAction#reverse: Implement me");return null},clone:function(){return new cc.FiniteTimeAction}});
cc.Speed=cc.Action.extend({_speed:0,_innerAction:null,ctor:function(a,b){cc.Action.prototype.ctor.call(this);this._speed=0;this._innerAction=null;a&&this.initWithAction(a,b)},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a},initWithAction:function(a,b){if(!a)throw"cc.Speed.initWithAction(): action must be non nil";this._innerAction=a;this._speed=b;return true},clone:function(){var a=new cc.Speed;a.initWithAction(this._innerAction.clone(),this._speed);return a},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,
a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();cc.Action.prototype.stop.call(this)},step:function(a){this._innerAction.step(a*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(a){if(this._innerAction!=a)this._innerAction=a},getInnerAction:function(){return this._innerAction}});cc.speed=function(a,b){return new cc.Speed(a,b)};cc.Speed.create=cc.speed;
cc.Follow=cc.Action.extend({_followedNode:null,_boundarySet:false,_boundaryFullyCovered:false,_halfScreenSize:null,_fullScreenSize:null,_worldRect:null,leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0,ctor:function(a,b){cc.Action.prototype.ctor.call(this);this._followedNode=null;this._boundaryFullyCovered=this._boundarySet=false;this._fullScreenSize=this._halfScreenSize=null;this.bottomBoundary=this.topBoundary=this.rightBoundary=this.leftBoundary=0;this._worldRect=cc.rect(0,0,0,0);if(a)b?
this.initWithTarget(a,b):this.initWithTarget(a)},clone:function(){var a=new cc.Follow,b=this._worldRect;b=new cc.Rect(b.x,b.y,b.width,b.height);a.initWithTarget(this._followedNode,b);return a},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(a){this._boundarySet=a},initWithTarget:function(a,b){if(!a)throw"cc.Follow.initWithAction(): followedNode must be non nil";var c=this;b=b||cc.rect(0,0,0,0);c._followedNode=a;c._worldRect=b;c._boundarySet=!cc._rectEqualToZero(b);c._boundaryFullyCovered=
false;a=cc.director.getWinSize();c._fullScreenSize=cc.p(a.width,a.height);c._halfScreenSize=cc.pMult(c._fullScreenSize,0.5);if(c._boundarySet){c.leftBoundary=-(b.x+b.width-c._fullScreenSize.x);c.rightBoundary=-b.x;c.topBoundary=-b.y;c.bottomBoundary=-(b.y+b.height-c._fullScreenSize.y);if(c.rightBoundary<c.leftBoundary)c.rightBoundary=c.leftBoundary=(c.leftBoundary+c.rightBoundary)/2;if(c.topBoundary<c.bottomBoundary)c.topBoundary=c.bottomBoundary=(c.topBoundary+c.bottomBoundary)/2;if(c.topBoundary==
c.bottomBoundary&&c.leftBoundary==c.rightBoundary)c._boundaryFullyCovered=true}return true},step:function(){var a=this._followedNode.x,b=this._followedNode.y;a=this._halfScreenSize.x-a;b=this._halfScreenSize.y-b;if(this._boundarySet)this._boundaryFullyCovered||this.target.setPosition(cc.clampf(a,this.leftBoundary,this.rightBoundary),cc.clampf(b,this.bottomBoundary,this.topBoundary));else this.target.setPosition(a,b)},isDone:function(){return!this._followedNode.running},stop:function(){this.target=
null;cc.Action.prototype.stop.call(this)}});cc.follow=function(a,b){return new cc.Follow(a,b)};cc.Follow.create=cc.follow;
cc.ActionInterval=cc.FiniteTimeAction.extend({_elapsed:0,_firstTick:false,_easeList:null,_times:1,_repeatForever:false,_repeatMethod:false,_speed:1,_speedMethod:false,ctor:function(a){this._times=this._speed=1;this._repeatForever=false;this.MAX_VALUE=2;this._speedMethod=this._repeatMethod=false;cc.FiniteTimeAction.prototype.ctor.call(this);a!==undefined&&this.initWithDuration(a)},getElapsed:function(){return this._elapsed},initWithDuration:function(a){this._duration=a===0?cc.FLT_EPSILON:a;this._elapsed=
0;return this._firstTick=true},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(a){a._repeatForever=this._repeatForever;a._speed=this._speed;a._times=this._times;a._easeList=this._easeList;a._speedMethod=this._speedMethod;a._repeatMethod=this._repeatMethod},_reverseEaseList:function(a){if(this._easeList){a._easeList=[];for(var b=0;b<this._easeList.length;b++)a._easeList.push(this._easeList[b].reverse())}},clone:function(){var a=new cc.ActionInterval(this._duration);
this._cloneDecoration(a);return a},easing:function(){if(this._easeList)this._easeList.length=0;else this._easeList=[];for(var a=0;a<arguments.length;a++)this._easeList.push(arguments[a]);return this},_computeEaseTime:function(a){var b=this._easeList;if(!b||b.length===0)return a;for(var c=0,d=b.length;c<d;c++)a=b[c].easing(a);return a},step:function(a){if(this._firstTick){this._firstTick=false;this._elapsed=0}else this._elapsed+=a;a=this._elapsed/(this._duration>1.192092896E-7?this._duration:1.192092896E-7);
a=1>a?a:1;this.update(a>0?a:0);if(this._repeatMethod&&this._times>1&&this.isDone()){this._repeatForever||this._times--;this.startWithTarget(this.target);this.step(this._elapsed-this._duration)}},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a);this._elapsed=0;this._firstTick=true},reverse:function(){cc.log("cc.IntervalAction: reverse not implemented.");return null},setAmplitudeRate:function(){cc.log("cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.")},
getAmplitudeRate:function(){cc.log("cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.");return 0},speed:function(a){if(a<=0){cc.log("The speed parameter error");return this}this._speedMethod=true;this._speed*=a;return this},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a;return this},repeat:function(a){a=Math.round(a);if(isNaN(a)||a<1){cc.log("The repeat parameter error");return this}this._repeatMethod=true;this._times*=a;return this},repeatForever:function(){this._repeatMethod=
true;this._times=this.MAX_VALUE;this._repeatForever=true;return this}});cc.actionInterval=function(a){return new cc.ActionInterval(a)};cc.ActionInterval.create=cc.actionInterval;
cc.Sequence=cc.ActionInterval.extend({_actions:null,_split:null,_last:0,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._actions=[];var b=a instanceof Array?a:arguments,c=b.length-1;c>=0&&b[c]==null&&cc.log("parameters should not be ending with null in Javascript");if(c>=0){for(var d=b[0],e=1;e<c;e++)if(b[e]){d=d;d=cc.Sequence._actionOneTwo(d,b[e])}this.initWithTwoActions(d,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw"cc.Sequence.initWithTwoActions(): arguments must all be non nil";
this.initWithDuration(a._duration+b._duration);this._actions[0]=a;this._actions[1]=b;return true},clone:function(){var a=new cc.Sequence;this._cloneDecoration(a);a.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._split=this._actions[0]._duration/this._duration;this._last=-1},stop:function(){this._last!==-1&&this._actions[this._last].stop();cc.Action.prototype.stop.call(this)},
update:function(a){a=this._computeEaseTime(a);var b=0,c=this._split,d=this._actions,e=this._last;if(a<c){a=c!==0?a/c:1;if(b===0&&e===1){d[1].update(0);d[1].stop()}}else{b=1;a=c===1?1:(a-c)/(1-c);if(e===-1){d[0].startWithTarget(this.target);d[0].update(1);d[0].stop()}if(!e){d[0].update(1);d[0].stop()}}if(!(e===b&&d[b].isDone())){e!==b&&d[b].startWithTarget(this.target);d[b].update(a);this._last=b}},reverse:function(){var a=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());
this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.sequence=function(a){var b=a instanceof Array?a:arguments;b.length>0&&b[b.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");for(var c=b[0],d=1;d<b.length;d++)if(b[d])c=cc.Sequence._actionOneTwo(c,b[d]);return c};cc.Sequence.create=cc.sequence;cc.Sequence._actionOneTwo=function(a,b){var c=new cc.Sequence;c.initWithTwoActions(a,b);return c};
cc.Repeat=cc.ActionInterval.extend({_times:0,_total:0,_nextDt:0,_actionInstant:false,_innerAction:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithAction(a,b)},initWithAction:function(a,b){if(this.initWithDuration(a._duration*b)){this._times=b;this._innerAction=a;if(a instanceof cc.ActionInstant){this._actionInstant=true;this._times-=1}this._total=0;return true}return false},clone:function(){var a=new cc.Repeat;this._cloneDecoration(a);a.initWithAction(this._innerAction.clone(),
this._times);return a},startWithTarget:function(a){this._total=0;this._nextDt=this._innerAction._duration/this._duration;cc.ActionInterval.prototype.startWithTarget.call(this,a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a);var b=this._innerAction,c=this._duration,d=this._times,e=this._nextDt;if(a>=e){for(;a>e&&this._total<d;){b.update(1);this._total++;b.stop();b.startWithTarget(this.target);
e+=b._duration/c;this._nextDt=e}a>=1&&this._total<d&&this._total++;if(!this._actionInstant)if(this._total===d){b.update(1);b.stop()}else b.update(a-(e-b._duration/c))}else b.update(a*d%1)},isDone:function(){return this._total==this._times},reverse:function(){var a=new cc.Repeat(this._innerAction.reverse(),this._times);this._cloneDecoration(a);this._reverseEaseList(a);return a},setInnerAction:function(a){if(this._innerAction!=a)this._innerAction=a},getInnerAction:function(){return this._innerAction}});
cc.repeat=function(a,b){return new cc.Repeat(a,b)};cc.Repeat.create=cc.repeat;
cc.RepeatForever=cc.ActionInterval.extend({_innerAction:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._innerAction=null;a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw"cc.RepeatForever.initWithAction(): action must be non null";this._innerAction=a;return true},clone:function(){var a=new cc.RepeatForever;this._cloneDecoration(a);a.initWithAction(this._innerAction.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._innerAction.startWithTarget(a)},step:function(a){var b=this._innerAction;b.step(a);if(b.isDone()){b.startWithTarget(this.target);b.step(b.getElapsed()-b._duration)}},isDone:function(){return false},reverse:function(){var a=new cc.RepeatForever(this._innerAction.reverse());this._cloneDecoration(a);this._reverseEaseList(a);return a},setInnerAction:function(a){if(this._innerAction!=a)this._innerAction=a},getInnerAction:function(){return this._innerAction}});cc.repeatForever=function(a){return new cc.RepeatForever(a)};
cc.RepeatForever.create=cc.repeatForever;
cc.Spawn=cc.ActionInterval.extend({_one:null,_two:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._two=this._one=null;var b=a instanceof Array?a:arguments,c=b.length-1;c>=0&&b[c]==null&&cc.log("parameters should not be ending with null in Javascript");if(c>=0){for(var d=b[0],e=1;e<c;e++)if(b[e]){d=d;d=cc.Spawn._actionOneTwo(d,b[e])}this.initWithTwoActions(d,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw"cc.Spawn.initWithTwoActions(): arguments must all be non null";var c=
false,d=a._duration,e=b._duration;if(this.initWithDuration(Math.max(d,e))){this._one=a;this._two=b;if(d>e)this._two=cc.Sequence._actionOneTwo(b,cc.delayTime(d-e));else if(d<e)this._one=cc.Sequence._actionOneTwo(a,cc.delayTime(e-d));c=true}return c},clone:function(){var a=new cc.Spawn;this._cloneDecoration(a);a.initWithTwoActions(this._one.clone(),this._two.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._one.startWithTarget(a);this._two.startWithTarget(a)},
stop:function(){this._one.stop();this._two.stop();cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a);this._one&&this._one.update(a);this._two&&this._two.update(a)},reverse:function(){var a=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.spawn=function(a){var b=a instanceof Array?a:arguments;b.length>0&&b[b.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");for(var c=b[0],d=1;d<b.length;d++)if(b[d]!=null)c=cc.Spawn._actionOneTwo(c,b[d]);return c};cc.Spawn.create=cc.spawn;cc.Spawn._actionOneTwo=function(a,b){var c=new cc.Spawn;c.initWithTwoActions(a,b);return c};
cc.RotateTo=cc.ActionInterval.extend({_dstAngleX:0,_startAngleX:0,_diffAngleX:0,_dstAngleY:0,_startAngleY:0,_diffAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._dstAngleX=b||0;this._dstAngleY=c||this._dstAngleX;return true}return false},clone:function(){var a=new cc.RotateTo;this._cloneDecoration(a);a.initWithDuration(this._duration,
this._dstAngleX,this._dstAngleY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.rotationX%360,c=this._dstAngleX-b;if(c>180)c-=360;if(c<-180)c+=360;this._startAngleX=b;this._diffAngleX=c;this._startAngleY=a.rotationY%360;a=this._dstAngleY-this._startAngleY;if(a>180)a-=360;if(a<-180)a+=360;this._diffAngleY=a},reverse:function(){cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.")},update:function(a){a=this._computeEaseTime(a);
if(this.target){this.target.rotationX=this._startAngleX+this._diffAngleX*a;this.target.rotationY=this._startAngleY+this._diffAngleY*a}}});cc.rotateTo=function(a,b,c){return new cc.RotateTo(a,b,c)};cc.RotateTo.create=cc.rotateTo;
cc.RotateBy=cc.ActionInterval.extend({_angleX:0,_startAngleX:0,_angleY:0,_startAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._angleX=b||0;this._angleY=c||this._angleX;return true}return false},clone:function(){var a=new cc.RotateBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._angleX,this._angleY);return a},
startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startAngleX=a.rotationX;this._startAngleY=a.rotationY},update:function(a){a=this._computeEaseTime(a);if(this.target){this.target.rotationX=this._startAngleX+this._angleX*a;this.target.rotationY=this._startAngleY+this._angleY*a}},reverse:function(){var a=new cc.RotateBy(this._duration,-this._angleX,-this._angleY);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.rotateBy=function(a,b,c){return new cc.RotateBy(a,b,c)};cc.RotateBy.create=cc.rotateBy;
cc.MoveBy=cc.ActionInterval.extend({_positionDelta:null,_startPosition:null,_previousPosition:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);this._positionDelta=cc.p(0,0);this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);b!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){if(b.x!==undefined){c=b.y;b=b.x}this._positionDelta.x=b;this._positionDelta.y=c;return true}return false},
clone:function(){var a=new cc.MoveBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._positionDelta);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=this._positionDelta.x*a;a=this._positionDelta.y*a;var c=this._startPosition;
if(cc.ENABLE_STACKABLE_ACTIONS){var d=this.target.getPositionX(),e=this.target.getPositionY(),f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;b+=c.x;a+=c.y;f.x=b;f.y=a;this.target.setPosition(b,a)}else this.target.setPosition(c.x+b,c.y+a)}},reverse:function(){var a=new cc.MoveBy(this._duration,cc.p(-this._positionDelta.x,-this._positionDelta.y));this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.moveBy=function(a,b,c){return new cc.MoveBy(a,b,c)};cc.MoveBy.create=cc.moveBy;
cc.MoveTo=cc.MoveBy.extend({_endPosition:null,ctor:function(a,b,c){cc.MoveBy.prototype.ctor.call(this);this._endPosition=cc.p(0,0);b!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(cc.MoveBy.prototype.initWithDuration.call(this,a,b,c)){if(b.x!==undefined){c=b.y;b=b.x}this._endPosition.x=b;this._endPosition.y=c;return true}return false},clone:function(){var a=new cc.MoveTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endPosition);return a},startWithTarget:function(a){cc.MoveBy.prototype.startWithTarget.call(this,
a);this._positionDelta.x=this._endPosition.x-a.getPositionX();this._positionDelta.y=this._endPosition.y-a.getPositionY()}});cc.moveTo=function(a,b,c){return new cc.MoveTo(a,b,c)};cc.MoveTo.create=cc.moveTo;
cc.SkewTo=cc.ActionInterval.extend({_skewX:0,_skewY:0,_startSkewX:0,_startSkewY:0,_endSkewX:0,_endSkewY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);c!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=false;if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._endSkewX=b;this._endSkewY=c;d=true}return d},clone:function(){var a=new cc.SkewTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endSkewX,
this._endSkewY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startSkewX=a.skewX%180;this._deltaX=this._endSkewX-this._startSkewX;if(this._deltaX>180)this._deltaX-=360;if(this._deltaX<-180)this._deltaX+=360;this._startSkewY=a.skewY%360;this._deltaY=this._endSkewY-this._startSkewY;if(this._deltaY>180)this._deltaY-=360;if(this._deltaY<-180)this._deltaY+=360},update:function(a){a=this._computeEaseTime(a);this.target.skewX=this._startSkewX+this._deltaX*
a;this.target.skewY=this._startSkewY+this._deltaY*a}});cc.skewTo=function(a,b,c){return new cc.SkewTo(a,b,c)};cc.SkewTo.create=cc.skewTo;
cc.SkewBy=cc.SkewTo.extend({ctor:function(a,b,c){cc.SkewTo.prototype.ctor.call(this);c!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=false;if(cc.SkewTo.prototype.initWithDuration.call(this,a,b,c)){this._skewX=b;this._skewY=c;d=true}return d},clone:function(){var a=new cc.SkewBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._skewX,this._skewY);return a},startWithTarget:function(a){cc.SkewTo.prototype.startWithTarget.call(this,a);this._deltaX=this._skewX;
this._deltaY=this._skewY;this._endSkewX=this._startSkewX+this._deltaX;this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var a=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.skewBy=function(a,b,c){return new cc.SkewBy(a,b,c)};cc.SkewBy.create=cc.skewBy;
cc.JumpBy=cc.ActionInterval.extend({_startPosition:null,_delta:null,_height:0,_jumps:0,_previousPosition:null,ctor:function(a,b,c,d,e){cc.ActionInterval.prototype.ctor.call(this);this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);this._delta=cc.p(0,0);d!==undefined&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){if(e===undefined){e=d;d=c;c=b.y;b=b.x}this._delta.x=b;this._delta.y=c;this._height=d;this._jumps=
e;return true}return false},clone:function(){var a=new cc.JumpBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._delta,this._height,this._jumps);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=a*this._jumps%1;b=this._height*
4*b*(1-b);b+=this._delta.y*a;a=this._delta.x*a;var c=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var d=this.target.getPositionX(),e=this.target.getPositionY(),f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;a+=c.x;b+=c.y;f.x=a;f.y=b;this.target.setPosition(a,b)}else this.target.setPosition(c.x+a,c.y+b)}},reverse:function(){var a=new cc.JumpBy(this._duration,cc.p(-this._delta.x,-this._delta.y),this._height,this._jumps);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.jumpBy=function(a,b,c,d,e){return new cc.JumpBy(a,b,c,d,e)};cc.JumpBy.create=cc.jumpBy;
cc.JumpTo=cc.JumpBy.extend({_endPosition:null,ctor:function(a,b,c,d,e){cc.JumpBy.prototype.ctor.call(this);this._endPosition=cc.p(0,0);d!==undefined&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){if(cc.JumpBy.prototype.initWithDuration.call(this,a,b,c,d,e)){if(e===undefined){c=b.y;b=b.x}this._endPosition.x=b;this._endPosition.y=c;return true}return false},startWithTarget:function(a){cc.JumpBy.prototype.startWithTarget.call(this,a);this._delta.x=this._endPosition.x-this._startPosition.x;
this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var a=new cc.JumpTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endPosition,this._height,this._jumps);return a}});cc.jumpTo=function(a,b,c,d,e){return new cc.JumpTo(a,b,c,d,e)};cc.JumpTo.create=cc.jumpTo;cc.bezierAt=function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d};
cc.BezierBy=cc.ActionInterval.extend({_config:null,_startPosition:null,_previousPosition:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);this._config=[];this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._config=b;return true}return false},clone:function(){var a=new cc.BezierBy;this._cloneDecoration(a);for(var b=[],c=0;c<this._config.length;c++){var d=
this._config[c];b.push(cc.p(d.x,d.y))}a.initWithDuration(this._duration,b);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=this._config,c=b[0].y,d=b[1].y,e=b[2].y;b=cc.bezierAt(0,b[0].x,b[1].x,b[2].x,a);a=cc.bezierAt(0,c,d,e,a);c=this._startPosition;
if(cc.ENABLE_STACKABLE_ACTIONS){d=this.target.getPositionX();e=this.target.getPositionY();var f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;b+=c.x;a+=c.y;f.x=b;f.y=a;this.target.setPosition(b,a)}else this.target.setPosition(c.x+b,c.y+a)}},reverse:function(){var a=this._config;a=[cc.pAdd(a[1],cc.pNeg(a[2])),cc.pAdd(a[0],cc.pNeg(a[2])),cc.pNeg(a[2])];a=new cc.BezierBy(this._duration,a);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.bezierBy=function(a,b){return new cc.BezierBy(a,b)};cc.BezierBy.create=cc.bezierBy;
cc.BezierTo=cc.BezierBy.extend({_toConfig:null,ctor:function(a,b){cc.BezierBy.prototype.ctor.call(this);this._toConfig=[];b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._toConfig=b;return true}return false},clone:function(){var a=new cc.BezierTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toConfig);return a},startWithTarget:function(a){cc.BezierBy.prototype.startWithTarget.call(this,a);a=this._startPosition;
var b=this._toConfig,c=this._config;c[0]=cc.pSub(b[0],a);c[1]=cc.pSub(b[1],a);c[2]=cc.pSub(b[2],a)}});cc.bezierTo=function(a,b){return new cc.BezierTo(a,b)};cc.BezierTo.create=cc.bezierTo;
cc.ScaleTo=cc.ActionInterval.extend({_scaleX:1,_scaleY:1,_startScaleX:1,_startScaleY:1,_endScaleX:0,_endScaleY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._endScaleX=b;this._endScaleY=c!=null?c:b;return true}return false},clone:function(){var a=new cc.ScaleTo;this._cloneDecoration(a);a.initWithDuration(this._duration,
this._endScaleX,this._endScaleY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startScaleX=a.scaleX;this._startScaleY=a.scaleY;this._deltaX=this._endScaleX-this._startScaleX;this._deltaY=this._endScaleY-this._startScaleY},update:function(a){a=this._computeEaseTime(a);if(this.target){this.target.scaleX=this._startScaleX+this._deltaX*a;this.target.scaleY=this._startScaleY+this._deltaY*a}}});cc.scaleTo=function(a,b,c){return new cc.ScaleTo(a,b,c)};
cc.ScaleTo.create=cc.scaleTo;
cc.ScaleBy=cc.ScaleTo.extend({startWithTarget:function(a){cc.ScaleTo.prototype.startWithTarget.call(this,a);this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX;this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var a=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.ScaleBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endScaleX,
this._endScaleY);return a}});cc.scaleBy=function(a,b,c){return new cc.ScaleBy(a,b,c)};cc.ScaleBy.create=cc.scaleBy;
cc.Blink=cc.ActionInterval.extend({_times:0,_originalState:false,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithDuration(a,b)},initWithDuration:function(a,b){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._times=b;return true}return false},clone:function(){var a=new cc.Blink;this._cloneDecoration(a);a.initWithDuration(this._duration,this._times);return a},update:function(a){a=this._computeEaseTime(a);if(this.target&&!this.isDone()){var b=
1/this._times;this.target.visible=a%b>b/2}},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._originalState=a.visible},stop:function(){this.target.visible=this._originalState;cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var a=new cc.Blink(this._duration,this._times);this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.blink=function(a,b){return new cc.Blink(a,b)};cc.Blink.create=cc.blink;
cc.FadeTo=cc.ActionInterval.extend({_toOpacity:0,_fromOpacity:0,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);b!==undefined&&this.initWithDuration(a,b)},initWithDuration:function(a,b){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._toOpacity=b;return true}return false},clone:function(){var a=new cc.FadeTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a},update:function(a){a=this._computeEaseTime(a);var b=this._fromOpacity!==
undefined?this._fromOpacity:255;this.target.opacity=b+(this._toOpacity-b)*a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._fromOpacity=a.opacity}});cc.fadeTo=function(a,b){return new cc.FadeTo(a,b)};cc.FadeTo.create=cc.fadeTo;
cc.FadeIn=cc.FadeTo.extend({_reverseAction:null,ctor:function(a){cc.FadeTo.prototype.ctor.call(this);a&&this.initWithDuration(a,255)},reverse:function(){var a=new cc.FadeOut;a.initWithDuration(this._duration,0);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.FadeIn;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a},startWithTarget:function(a){if(this._reverseAction)this._toOpacity=this._reverseAction._fromOpacity;cc.FadeTo.prototype.startWithTarget.call(this,
a)}});cc.fadeIn=function(a){return new cc.FadeIn(a)};cc.FadeIn.create=cc.fadeIn;cc.FadeOut=cc.FadeTo.extend({ctor:function(a){cc.FadeTo.prototype.ctor.call(this);a&&this.initWithDuration(a,0)},reverse:function(){var a=new cc.FadeIn;a._reverseAction=this;a.initWithDuration(this._duration,255);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.FadeOut;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a}});cc.fadeOut=function(a){return new cc.FadeOut(a)};
cc.FadeOut.create=cc.fadeOut;
cc.TintTo=cc.ActionInterval.extend({_to:null,_from:null,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);this._to=cc.color(0,0,0);this._from=cc.color(0,0,0);d!==undefined&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._to=cc.color(b,c,d);return true}return false},clone:function(){var a=new cc.TintTo;this._cloneDecoration(a);var b=this._to;a.initWithDuration(this._duration,b.r,b.g,b.b);return a},
startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._from=this.target.color},update:function(a){a=this._computeEaseTime(a);var b=this._from,c=this._to;if(b)this.target.color=cc.color(b.r+(c.r-b.r)*a,b.g+(c.g-b.g)*a,b.b+(c.b-b.b)*a)}});cc.tintTo=function(a,b,c,d){return new cc.TintTo(a,b,c,d)};cc.TintTo.create=cc.tintTo;
cc.TintBy=cc.ActionInterval.extend({_deltaR:0,_deltaG:0,_deltaB:0,_fromR:0,_fromG:0,_fromB:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);d!==undefined&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this._deltaR=b;this._deltaG=c;this._deltaB=d;return true}return false},clone:function(){var a=new cc.TintBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB);
return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);a=a.color;this._fromR=a.r;this._fromG=a.g;this._fromB=a.b},update:function(a){a=this._computeEaseTime(a);this.target.color=cc.color(this._fromR+this._deltaR*a,this._fromG+this._deltaG*a,this._fromB+this._deltaB*a)},reverse:function(){var a=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.tintBy=function(a,b,c,d){return new cc.TintBy(a,b,c,d)};cc.TintBy.create=cc.tintBy;cc.DelayTime=cc.ActionInterval.extend({update:function(){},reverse:function(){var a=new cc.DelayTime(this._duration);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.DelayTime;this._cloneDecoration(a);a.initWithDuration(this._duration);return a}});cc.delayTime=function(a){return new cc.DelayTime(a)};cc.DelayTime.create=cc.delayTime;
cc.ReverseTime=cc.ActionInterval.extend({_other:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._other=null;a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw"cc.ReverseTime.initWithAction(): action must be non null";if(a==this._other)throw"cc.ReverseTime.initWithAction(): the action was already passed in.";if(cc.ActionInterval.prototype.initWithDuration.call(this,a._duration)){this._other=a;return true}return false},clone:function(){var a=new cc.ReverseTime;
this._cloneDecoration(a);a.initWithAction(this._other.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._other.startWithTarget(a)},update:function(a){a=this._computeEaseTime(a);this._other&&this._other.update(1-a)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop();cc.Action.prototype.stop.call(this)}});cc.reverseTime=function(a){return new cc.ReverseTime(a)};cc.ReverseTime.create=cc.reverseTime;
cc.Animate=cc.ActionInterval.extend({_animation:null,_nextFrame:0,_origFrame:null,_executedLoops:0,_splitTimes:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._splitTimes=[];a&&this.initWithAnimation(a)},getAnimation:function(){return this._animation},setAnimation:function(a){this._animation=a},initWithAnimation:function(a){if(!a)throw"cc.Animate.initWithAnimation(): animation must be non-NULL";var b=a.getDuration();if(this.initWithDuration(b*a.getLoops())){this._nextFrame=
0;this.setAnimation(a);this._origFrame=null;this._executedLoops=0;var c=this._splitTimes;var d=c.length=0,e=b/a.getTotalDelayUnits();a=a.getFrames();cc.arrayVerifyType(a,cc.AnimationFrame);for(var f=0;f<a.length;f++){var g=d*e/b;d+=a[f].getDelayUnits();c.push(g)}return true}return false},clone:function(){var a=new cc.Animate;this._cloneDecoration(a);a.initWithAnimation(this._animation.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);if(this._animation.getRestoreOriginalFrame())this._origFrame=
a.displayFrame();this._executedLoops=this._nextFrame=0},update:function(a){a=this._computeEaseTime(a);if(a<1){a*=this._animation.getLoops();if((0|a)>this._executedLoops){this._nextFrame=0;this._executedLoops++}a%=1}for(var b=this._animation.getFrames(),c=b.length,d=this._splitTimes,e=this._nextFrame;e<c;e++)if(d[e]<=a){this.target.setSpriteFrame(b[e].getSpriteFrame());this._nextFrame=e+1}else break},reverse:function(){var a=this._animation,b=a.getFrames(),c=[];cc.arrayVerifyType(b,cc.AnimationFrame);
if(b.length>0)for(var d=b.length-1;d>=0;d--){var e=b[d];if(!e)break;c.push(e.clone())}b=new cc.Animation(c,a.getDelayPerUnit(),a.getLoops());b.setRestoreOriginalFrame(a.getRestoreOriginalFrame());a=new cc.Animate(b);this._cloneDecoration(a);this._reverseEaseList(a);return a},stop:function(){this._animation.getRestoreOriginalFrame()&&this.target&&this.target.setSpriteFrame(this._origFrame);cc.Action.prototype.stop.call(this)}});cc.animate=function(a){return new cc.Animate(a)};cc.Animate.create=cc.animate;
cc.TargetedAction=cc.ActionInterval.extend({_action:null,_forcedTarget:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);b&&this.initWithTarget(a,b)},initWithTarget:function(a,b){if(this.initWithDuration(b._duration)){this._forcedTarget=a;this._action=b;return true}return false},clone:function(){var a=new cc.TargetedAction;this._cloneDecoration(a);a.initWithTarget(this._forcedTarget,this._action.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(a){a=this._computeEaseTime(a);this._action.update(a)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(a){if(this._forcedTarget!=a)this._forcedTarget=a}});cc.targetedAction=function(a,b){return new cc.TargetedAction(a,b)};cc.TargetedAction.create=cc.targetedAction;
cc.ActionInstant=cc.FiniteTimeAction.extend({isDone:function(){return true},step:function(){this.update(1)},update:function(){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}});cc.Show=cc.ActionInstant.extend({update:function(){this.target.visible=true},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}});cc.show=function(){return new cc.Show};cc.Show.create=cc.show;
cc.Hide=cc.ActionInstant.extend({update:function(){this.target.visible=false},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}});cc.hide=function(){return new cc.Hide};cc.Hide.create=cc.hide;cc.ToggleVisibility=cc.ActionInstant.extend({update:function(){this.target.visible=!this.target.visible},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}});cc.toggleVisibility=function(){return new cc.ToggleVisibility};
cc.ToggleVisibility.create=cc.toggleVisibility;cc.RemoveSelf=cc.ActionInstant.extend({_isNeedCleanUp:true,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);a!==undefined&&this.init(a)},update:function(){this.target.removeFromParent(this._isNeedCleanUp)},init:function(a){this._isNeedCleanUp=a;return true},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}});cc.removeSelf=function(a){return new cc.RemoveSelf(a)};
cc.RemoveSelf.create=cc.removeSelf;cc.FlipX=cc.ActionInstant.extend({_flippedX:false,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);this._flippedX=false;a!==undefined&&this.initWithFlipX(a)},initWithFlipX:function(a){this._flippedX=a;return true},update:function(){this.target.flippedX=this._flippedX},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var a=new cc.FlipX;a.initWithFlipX(this._flippedX);return a}});cc.flipX=function(a){return new cc.FlipX(a)};
cc.FlipX.create=cc.flipX;cc.FlipY=cc.ActionInstant.extend({_flippedY:false,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);this._flippedY=false;a!==undefined&&this.initWithFlipY(a)},initWithFlipY:function(a){this._flippedY=a;return true},update:function(){this.target.flippedY=this._flippedY},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var a=new cc.FlipY;a.initWithFlipY(this._flippedY);return a}});cc.flipY=function(a){return new cc.FlipY(a)};
cc.FlipY.create=cc.flipY;cc.Place=cc.ActionInstant.extend({_x:0,_y:0,ctor:function(a,b){cc.FiniteTimeAction.prototype.ctor.call(this);this._y=this._x=0;if(a!==undefined){if(a.x!==undefined){b=a.y;a=a.x}this.initWithPosition(a,b)}},initWithPosition:function(a,b){this._x=a;this._y=b;return true},update:function(){this.target.setPosition(this._x,this._y)},clone:function(){var a=new cc.Place;a.initWithPosition(this._x,this._y);return a}});cc.place=function(a,b){return new cc.Place(a,b)};
cc.Place.create=cc.place;
cc.CallFunc=cc.ActionInstant.extend({_selectorTarget:null,_callFunc:null,_function:null,_data:null,ctor:function(a,b,c){cc.FiniteTimeAction.prototype.ctor.call(this);if(a!==undefined)b===undefined?this.initWithFunction(a):this.initWithFunction(a,b,c)},initWithFunction:function(a,b,c){if(b){this._data=c;this._callFunc=a;this._selectorTarget=b}else if(a)this._function=a;return true},execute:function(){if(this._callFunc!=null)this._callFunc.call(this._selectorTarget,this.target,this._data);else this._function&&
this._function.call(null,this.target)},update:function(){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(a){if(a!=this._selectorTarget){if(this._selectorTarget)this._selectorTarget=null;this._selectorTarget=a}},clone:function(){var a=new cc.CallFunc;if(this._selectorTarget)a.initWithFunction(this._callFunc,this._selectorTarget,this._data);else this._function&&a.initWithFunction(this._function);return a}});
cc.callFunc=function(a,b,c){return new cc.CallFunc(a,b,c)};cc.CallFunc.create=cc.callFunc;
cc.ActionCamera=cc.ActionInterval.extend({_centerXOrig:0,_centerYOrig:0,_centerZOrig:0,_eyeXOrig:0,_eyeYOrig:0,_eyeZOrig:0,_upXOrig:0,_upYOrig:0,_upZOrig:0,ctor:function(){var a=this;cc.ActionInterval.prototype.ctor.call(a);a._centerXOrig=0;a._centerYOrig=0;a._centerZOrig=0;a._eyeXOrig=0;a._eyeYOrig=0;a._eyeZOrig=0;a._upXOrig=0;a._upYOrig=0;a._upZOrig=0},startWithTarget:function(a){var b=this;cc.ActionInterval.prototype.startWithTarget.call(b,a);a=a.getCamera();var c=a.getCenter();b._centerXOrig=
c.x;b._centerYOrig=c.y;b._centerZOrig=c.z;c=a.getEye();b._eyeXOrig=c.x;b._eyeYOrig=c.y;b._eyeZOrig=c.z;a=a.getUp();b._upXOrig=a.x;b._upYOrig=a.y;b._upZOrig=a.z},clone:function(){return new cc.ActionCamera},reverse:function(){return new cc.ReverseTime(this)}});
cc.OrbitCamera=cc.ActionCamera.extend({_radius:0,_deltaRadius:0,_angleZ:0,_deltaAngleZ:0,_angleX:0,_deltaAngleX:0,_radZ:0,_radDeltaZ:0,_radX:0,_radDeltaX:0,ctor:function(a,b,c,d,e,f,g){cc.ActionCamera.prototype.ctor.call(this);g!==undefined&&this.initWithDuration(a,b,c,d,e,f,g)},initWithDuration:function(a,b,c,d,e,f,g){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){var h=this;h._radius=b;h._deltaRadius=c;h._angleZ=d;h._deltaAngleZ=e;h._angleX=f;h._deltaAngleX=g;h._radDeltaZ=cc.degreesToRadians(e);
h._radDeltaX=cc.degreesToRadians(g);return true}return false},sphericalRadius:function(){var a,b;b=this.target.getCamera();var c=b.getEye();a=b.getCenter();b=c.x-a.x;var d=c.y-a.y;a=c.z-a.z;c=Math.sqrt(Math.pow(b,2)+Math.pow(d,2)+Math.pow(a,2));var e=Math.sqrt(Math.pow(b,2)+Math.pow(d,2));if(e===0)e=cc.FLT_EPSILON;if(c===0)c=cc.FLT_EPSILON;a=Math.acos(a/c);b=b<0?Math.PI-Math.asin(d/e):Math.asin(d/e);return{newRadius:c/cc.Camera.getZEye(),zenith:a,azimuth:b}},startWithTarget:function(a){var b=this;
cc.ActionInterval.prototype.startWithTarget.call(b,a);a=b.sphericalRadius();if(isNaN(b._radius))b._radius=a.newRadius;if(isNaN(b._angleZ))b._angleZ=cc.radiansToDegrees(a.zenith);if(isNaN(b._angleX))b._angleX=cc.radiansToDegrees(a.azimuth);b._radZ=cc.degreesToRadians(b._angleZ);b._radX=cc.degreesToRadians(b._angleX)},clone:function(){var a=new cc.OrbitCamera,b=this;a.initWithDuration(b._duration,b._radius,b._deltaRadius,b._angleZ,b._deltaAngleZ,b._angleX,b._deltaAngleX);return a},update:function(a){a=
this._computeEaseTime(a);var b=(this._radius+this._deltaRadius*a)*cc.Camera.getZEye(),c=this._radZ+this._radDeltaZ*a,d=this._radX+this._radDeltaX*a;a=Math.sin(c)*Math.cos(d)*b+this._centerXOrig;d=Math.sin(c)*Math.sin(d)*b+this._centerYOrig;b=Math.cos(c)*b+this._centerZOrig;this.target.getCamera().setEye(a,d,b);this.target.setNodeDirty()}});cc.orbitCamera=function(a,b,c,d,e,f,g){return new cc.OrbitCamera(a,b,c,d,e,f,g)};cc.OrbitCamera.create=cc.orbitCamera;
cc.ActionEase=cc.ActionInterval.extend({_inner:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw"cc.ActionEase.initWithAction(): action must be non nil";if(this.initWithDuration(a.getDuration())){this._inner=a;return true}return false},clone:function(){var a=new cc.ActionEase;a.initWithAction(this._inner.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._inner.startWithTarget(this.target)},
stop:function(){this._inner.stop();cc.ActionInterval.prototype.stop.call(this)},update:function(a){this._inner.update(a)},reverse:function(){return new cc.ActionEase(this._inner.reverse())},getInnerAction:function(){return this._inner}});cc.actionEase=function(a){return new cc.ActionEase(a)};cc.ActionEase.create=cc.actionEase;
cc.EaseRateAction=cc.ActionEase.extend({_rate:0,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this);b!==undefined&&this.initWithAction(a,b)},setRate:function(a){this._rate=a},getRate:function(){return this._rate},initWithAction:function(a,b){if(cc.ActionEase.prototype.initWithAction.call(this,a)){this._rate=b;return true}return false},clone:function(){var a=new cc.EaseRateAction;a.initWithAction(this._inner.clone(),this._rate);return a},reverse:function(){return new cc.EaseRateAction(this._inner.reverse(),
1/this._rate)}});cc.easeRateAction=function(a,b){return new cc.EaseRateAction(a,b)};cc.EaseRateAction.create=cc.easeRateAction;cc.EaseIn=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,this._rate))},reverse:function(){return new cc.EaseIn(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseIn;a.initWithAction(this._inner.clone(),this._rate);return a}});cc.EaseIn.create=function(a,b){return new cc.EaseIn(a,b)};
cc.easeIn=function(a){return{_rate:a,easing:function(b){return Math.pow(b,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}};cc.EaseOut=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,1/this._rate))},reverse:function(){return new cc.EaseOut(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseOut;a.initWithAction(this._inner.clone(),this._rate);return a}});cc.EaseOut.create=function(a,b){return new cc.EaseOut(a,b)};
cc.easeOut=function(a){return{_rate:a,easing:function(b){return Math.pow(b,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}};cc.EaseInOut=cc.EaseRateAction.extend({update:function(a){a*=2;a<1?this._inner.update(0.5*Math.pow(a,this._rate)):this._inner.update(1-0.5*Math.pow(2-a,this._rate))},clone:function(){var a=new cc.EaseInOut;a.initWithAction(this._inner.clone(),this._rate);return a},reverse:function(){return new cc.EaseInOut(this._inner.reverse(),this._rate)}});
cc.EaseInOut.create=function(a,b){return new cc.EaseInOut(a,b)};cc.easeInOut=function(a){return{_rate:a,easing:function(b){b*=2;return b<1?0.5*Math.pow(b,this._rate):1-0.5*Math.pow(2-b,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}};
cc.EaseExponentialIn=cc.ActionEase.extend({update:function(a){this._inner.update(a===0?0:Math.pow(2,10*(a-1)))},reverse:function(){return new cc.EaseExponentialOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialIn;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialIn.create=function(a){return new cc.EaseExponentialIn(a)};cc._easeExponentialInObj={easing:function(a){return a===0?0:Math.pow(2,10*(a-1))},reverse:function(){return cc._easeExponentialOutObj}};
cc.easeExponentialIn=function(){return cc._easeExponentialInObj};cc.EaseExponentialOut=cc.ActionEase.extend({update:function(a){this._inner.update(a==1?1:-Math.pow(2,-10*a)+1)},reverse:function(){return new cc.EaseExponentialIn(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialOut;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialOut.create=function(a){return new cc.EaseExponentialOut(a)};
cc._easeExponentialOutObj={easing:function(a){return a==1?1:-Math.pow(2,-10*a)+1},reverse:function(){return cc._easeExponentialInObj}};cc.easeExponentialOut=function(){return cc._easeExponentialOutObj};
cc.EaseExponentialInOut=cc.ActionEase.extend({update:function(a){if(a!=1&&a!==0){a*=2;a=a<1?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)}this._inner.update(a)},reverse:function(){return new cc.EaseExponentialInOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialInOut;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialInOut.create=function(a){return new cc.EaseExponentialInOut(a)};
cc._easeExponentialInOutObj={easing:function(a){if(a!==1&&a!==0){a*=2;return a<1?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)}return a},reverse:function(){return cc._easeExponentialInOutObj}};cc.easeExponentialInOut=function(){return cc._easeExponentialInOutObj};
cc.EaseSineIn=cc.ActionEase.extend({update:function(a){a=a===0||a===1?a:-1*Math.cos(a*Math.PI/2)+1;this._inner.update(a)},reverse:function(){return new cc.EaseSineOut(this._inner.reverse())},clone:function(){var a=new cc.EaseSineIn;a.initWithAction(this._inner.clone());return a}});cc.EaseSineIn.create=function(a){return new cc.EaseSineIn(a)};cc._easeSineInObj={easing:function(a){return a===0||a===1?a:-1*Math.cos(a*Math.PI/2)+1},reverse:function(){return cc._easeSineOutObj}};cc.easeSineIn=function(){return cc._easeSineInObj};
cc.EaseSineOut=cc.ActionEase.extend({update:function(a){a=a===0||a===1?a:Math.sin(a*Math.PI/2);this._inner.update(a)},reverse:function(){return new cc.EaseSineIn(this._inner.reverse())},clone:function(){var a=new cc.EaseSineOut;a.initWithAction(this._inner.clone());return a}});cc.EaseSineOut.create=function(a){return new cc.EaseSineOut(a)};cc._easeSineOutObj={easing:function(a){return a===0||a==1?a:Math.sin(a*Math.PI/2)},reverse:function(){return cc._easeSineInObj}};cc.easeSineOut=function(){return cc._easeSineOutObj};
cc.EaseSineInOut=cc.ActionEase.extend({update:function(a){a=a===0||a===1?a:-0.5*(Math.cos(Math.PI*a)-1);this._inner.update(a)},clone:function(){var a=new cc.EaseSineInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseSineInOut(this._inner.reverse())}});cc.EaseSineInOut.create=function(a){return new cc.EaseSineInOut(a)};cc._easeSineInOutObj={easing:function(a){return a===0||a===1?a:-0.5*(Math.cos(Math.PI*a)-1)},reverse:function(){return cc._easeSineInOutObj}};
cc.easeSineInOut=function(){return cc._easeSineInOutObj};
cc.EaseElastic=cc.ActionEase.extend({_period:0.3,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this);a&&this.initWithAction(a,b)},getPeriod:function(){return this._period},setPeriod:function(a){this._period=a},initWithAction:function(a,b){cc.ActionEase.prototype.initWithAction.call(this,a);this._period=b==null?0.3:b;return true},reverse:function(){cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass.");return null},clone:function(){var a=new cc.EaseElastic;a.initWithAction(this._inner.clone(),
this._period);return a}});cc.EaseElastic.create=function(a,b){return new cc.EaseElastic(a,b)};cc.EaseElasticIn=cc.EaseElastic.extend({update:function(a){var b=0;if(a===0||a===1)b=a;else{b=this._period/4;a-=1;b=-Math.pow(2,10*a)*Math.sin((a-b)*Math.PI*2/this._period)}this._inner.update(b)},reverse:function(){return new cc.EaseElasticOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticIn;a.initWithAction(this._inner.clone(),this._period);return a}});
cc.EaseElasticIn.create=function(a,b){return new cc.EaseElasticIn(a,b)};cc._easeElasticInObj={easing:function(a){if(a===0||a===1)return a;a-=1;return-Math.pow(2,10*a)*Math.sin((a-0.075)*Math.PI*2/0.3)},reverse:function(){return cc._easeElasticOutObj}};cc.easeElasticIn=function(a){if(a&&a!==0.3)return{_period:a,easing:function(b){if(b===0||b===1)return b;b-=1;return-Math.pow(2,10*b)*Math.sin((b-this._period/4)*Math.PI*2/this._period)},reverse:function(){return cc.easeElasticOut(this._period)}};return cc._easeElasticInObj};
cc.EaseElasticOut=cc.EaseElastic.extend({update:function(a){var b=0;if(a===0||a==1)b=a;else{b=this._period/4;b=Math.pow(2,-10*a)*Math.sin((a-b)*Math.PI*2/this._period)+1}this._inner.update(b)},reverse:function(){return new cc.EaseElasticIn(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticOut;a.initWithAction(this._inner.clone(),this._period);return a}});cc.EaseElasticOut.create=function(a,b){return new cc.EaseElasticOut(a,b)};
cc._easeElasticOutObj={easing:function(a){return a===0||a===1?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*Math.PI*2/0.3)+1},reverse:function(){return cc._easeElasticInObj}};cc.easeElasticOut=function(a){if(a&&a!==0.3)return{_period:a,easing:function(b){return b===0||b===1?b:Math.pow(2,-10*b)*Math.sin((b-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}};return cc._easeElasticOutObj};
cc.EaseElasticInOut=cc.EaseElastic.extend({update:function(a){var b=0;b=this._period;if(a===0||a==1)b=a;else{a*=2;if(!b)b=this._period=0.3*1.5;var c=b/4;a-=1;b=a<0?-0.5*Math.pow(2,10*a)*Math.sin((a-c)*Math.PI*2/b):Math.pow(2,-10*a)*Math.sin((a-c)*Math.PI*2/b)*0.5+1}this._inner.update(b)},reverse:function(){return new cc.EaseElasticInOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticInOut;a.initWithAction(this._inner.clone(),this._period);return a}});
cc.EaseElasticInOut.create=function(a,b){return new cc.EaseElasticInOut(a,b)};cc.easeElasticInOut=function(a){a=a||0.3;return{_period:a,easing:function(b){var c=0;c=this._period;if(b===0||b===1)c=b;else{b*=2;if(!c)c=this._period=0.3*1.5;var d=c/4;b-=1;c=b<0?-0.5*Math.pow(2,10*b)*Math.sin((b-d)*Math.PI*2/c):Math.pow(2,-10*b)*Math.sin((b-d)*Math.PI*2/c)*0.5+1}return c},reverse:function(){return cc.easeElasticInOut(this._period)}}};
cc.EaseBounce=cc.ActionEase.extend({bounceTime:function(a){if(a<1/2.75)return 7.5625*a*a;else if(a<2/2.75){a-=1.5/2.75;return 7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;return 7.5625*a*a+0.9375}a-=2.625/2.75;return 7.5625*a*a+0.984375},clone:function(){var a=new cc.EaseBounce;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBounce(this._inner.reverse())}});cc.EaseBounce.create=function(a){return new cc.EaseBounce(a)};
cc.EaseBounceIn=cc.EaseBounce.extend({update:function(a){this._inner.update(1-this.bounceTime(1-a))},reverse:function(){return new cc.EaseBounceOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceIn;a.initWithAction(this._inner.clone());return a}});cc.EaseBounceIn.create=function(a){return new cc.EaseBounceIn(a)};
cc._bounceTime=function(a){if(a<1/2.75)return 7.5625*a*a;else if(a<2/2.75){a-=1.5/2.75;return 7.5625*a*a+0.75}else if(a<2.5/2.75){a-=2.25/2.75;return 7.5625*a*a+0.9375}a-=2.625/2.75;return 7.5625*a*a+0.984375};cc._easeBounceInObj={easing:function(a){return 1-cc._bounceTime(1-a)},reverse:function(){return cc._easeBounceOutObj}};cc.easeBounceIn=function(){return cc._easeBounceInObj};
cc.EaseBounceOut=cc.EaseBounce.extend({update:function(a){this._inner.update(this.bounceTime(a))},reverse:function(){return new cc.EaseBounceIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceOut;a.initWithAction(this._inner.clone());return a}});cc.EaseBounceOut.create=function(a){return new cc.EaseBounceOut(a)};cc._easeBounceOutObj={easing:function(a){return cc._bounceTime(a)},reverse:function(){return cc._easeBounceInObj}};cc.easeBounceOut=function(){return cc._easeBounceOutObj};
cc.EaseBounceInOut=cc.EaseBounce.extend({update:function(a){var b=0;if(a<0.5){a*=2;b=(1-this.bounceTime(1-a))*0.5}else b=this.bounceTime(a*2-1)*0.5+0.5;this._inner.update(b)},clone:function(){var a=new cc.EaseBounceInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBounceInOut(this._inner.reverse())}});cc.EaseBounceInOut.create=function(a){return new cc.EaseBounceInOut(a)};
cc._easeBounceInOutObj={easing:function(a){if(a<0.5){a*=2;a=(1-cc._bounceTime(1-a))*0.5}else a=cc._bounceTime(a*2-1)*0.5+0.5;return a},reverse:function(){return cc._easeBounceInOutObj}};cc.easeBounceInOut=function(){return cc._easeBounceInOutObj};
cc.EaseBackIn=cc.ActionEase.extend({update:function(a){a=a===0||a==1?a:a*a*(2.70158*a-1.70158);this._inner.update(a)},reverse:function(){return new cc.EaseBackOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBackIn;a.initWithAction(this._inner.clone());return a}});cc.EaseBackIn.create=function(a){return new cc.EaseBackIn(a)};cc._easeBackInObj={easing:function(a){return a===0||a===1?a:a*a*(2.70158*a-1.70158)},reverse:function(){return cc._easeBackOutObj}};cc.easeBackIn=function(){return cc._easeBackInObj};
cc.EaseBackOut=cc.ActionEase.extend({update:function(a){a-=1;this._inner.update(a*a*(2.70158*a+1.70158)+1)},reverse:function(){return new cc.EaseBackIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBackOut;a.initWithAction(this._inner.clone());return a}});cc.EaseBackOut.create=function(a){return new cc.EaseBackOut(a)};cc._easeBackOutObj={easing:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},reverse:function(){return cc._easeBackInObj}};cc.easeBackOut=function(){return cc._easeBackOutObj};
cc.EaseBackInOut=cc.ActionEase.extend({update:function(a){a*=2;if(a<1)this._inner.update(a*a*(3.5949095*a-2.5949095)/2);else{a-=2;this._inner.update(a*a*(3.5949095*a+2.5949095)/2+1)}},clone:function(){var a=new cc.EaseBackInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBackInOut(this._inner.reverse())}});cc.EaseBackInOut.create=function(a){return new cc.EaseBackInOut(a)};
cc._easeBackInOutObj={easing:function(a){a*=2;if(a<1)return a*a*(3.5949095*a-2.5949095)/2;else{a-=2;return a*a*(3.5949095*a+2.5949095)/2+1}},reverse:function(){return cc._easeBackInOutObj}};cc.easeBackInOut=function(){return cc._easeBackInOutObj};
cc.EaseBezierAction=cc.ActionEase.extend({_p0:null,_p1:null,_p2:null,_p3:null,ctor:function(a){cc.ActionEase.prototype.ctor.call(this,a)},_updateTime:function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d},update:function(a){this._inner.update(this._updateTime(this._p0,this._p1,this._p2,this._p3,a))},clone:function(){var a=new cc.EaseBezierAction;a.initWithAction(this._inner.clone());a.setBezierParamer(this._p0,this._p1,this._p2,this._p3);return a},
reverse:function(){var a=new cc.EaseBezierAction(this._inner.reverse());a.setBezierParamer(this._p3,this._p2,this._p1,this._p0);return a},setBezierParamer:function(a,b,c,d){this._p0=a||0;this._p1=b||0;this._p2=c||0;this._p3=d||0}});cc.EaseBezierAction.create=function(a){return new cc.EaseBezierAction(a)};cc.easeBezierAction=function(a,b,c,d){return{easing:function(e){return cc.EaseBezierAction.prototype._updateTime(a,b,c,d,e)},reverse:function(){return cc.easeBezierAction(d,c,b,a)}}};
cc.EaseQuadraticActionIn=cc.ActionEase.extend({_updateTime:function(a){return Math.pow(a,2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuadraticActionIn(this._inner.reverse())}});cc.EaseQuadraticActionIn.create=function(a){return new cc.EaseQuadraticActionIn(a)};cc._easeQuadraticActionIn={easing:cc.EaseQuadraticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionIn}};
cc.easeQuadraticActionIn=function(){return cc._easeQuadraticActionIn};cc.EaseQuadraticActionOut=cc.ActionEase.extend({_updateTime:function(a){return-a*(a-2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionOut;a.initWithAction();return a},reverse:function(){return new cc.EaseQuadraticActionOut(this._inner.reverse())}});cc.EaseQuadraticActionOut.create=function(a){return new cc.EaseQuadraticActionOut(a)};
cc._easeQuadraticActionOut={easing:cc.EaseQuadraticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionOut}};cc.easeQuadraticActionOut=function(){return cc._easeQuadraticActionOut};
cc.EaseQuadraticActionInOut=cc.ActionEase.extend({_updateTime:function(a){var b=a;a*=2;if(a<1)b=a*a*0.5;else{--a;b=-0.5*(a*(a-2)-1)}return b},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuadraticActionInOut(this._inner.reverse())}});cc.EaseQuadraticActionInOut.create=function(a){return new cc.EaseQuadraticActionInOut(a)};
cc._easeQuadraticActionInOut={easing:cc.EaseQuadraticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionInOut}};cc.easeQuadraticActionInOut=function(){return cc._easeQuadraticActionInOut};cc.EaseQuarticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionIn(this._inner.reverse())}});
cc.EaseQuarticActionIn.create=function(a){return new cc.EaseQuarticActionIn(a)};cc._easeQuarticActionIn={easing:cc.EaseQuarticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuarticActionIn}};cc.easeQuarticActionIn=function(){return cc._easeQuarticActionIn};
cc.EaseQuarticActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return-(a*a*a*a-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionOut(this._inner.reverse())}});cc.EaseQuarticActionOut.create=function(a){return new cc.EaseQuarticActionOut(a)};cc._easeQuarticActionOut={easing:cc.EaseQuarticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionOut}};
cc.easeQuarticActionOut=function(){return cc._easeQuarticActionOut};cc.EaseQuarticActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(a<1)return 0.5*a*a*a*a;a-=2;return-0.5*(a*a*a*a-2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionInOut(this._inner.reverse())}});cc.EaseQuarticActionInOut.create=function(a){return new cc.EaseQuarticActionInOut(a)};
cc._easeQuarticActionInOut={easing:cc.EaseQuarticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionInOut}};cc.easeQuarticActionInOut=function(){return cc._easeQuarticActionInOut};cc.EaseQuinticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionIn(this._inner.reverse())}});
cc.EaseQuinticActionIn.create=function(a){return new cc.EaseQuinticActionIn(a)};cc._easeQuinticActionIn={easing:cc.EaseQuinticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuinticActionIn}};cc.easeQuinticActionIn=function(){return cc._easeQuinticActionIn};
cc.EaseQuinticActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return a*a*a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionOut(this._inner.reverse())}});cc.EaseQuinticActionOut.create=function(a){return new cc.EaseQuinticActionOut(a)};cc._easeQuinticActionOut={easing:cc.EaseQuinticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionOut}};
cc.easeQuinticActionOut=function(){return cc._easeQuinticActionOut};cc.EaseQuinticActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(a<1)return 0.5*a*a*a*a*a;a-=2;return 0.5*(a*a*a*a*a+2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionInOut(this._inner.reverse())}});cc.EaseQuinticActionInOut.create=function(a){return new cc.EaseQuinticActionInOut(a)};
cc._easeQuinticActionInOut={easing:cc.EaseQuinticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionInOut}};cc.easeQuinticActionInOut=function(){return cc._easeQuinticActionInOut};cc.EaseCircleActionIn=cc.ActionEase.extend({_updateTime:function(a){return-1*(Math.sqrt(1-a*a)-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionIn(this._inner.reverse())}});
cc.EaseCircleActionIn.create=function(a){return new cc.EaseCircleActionIn(a)};cc._easeCircleActionIn={easing:cc.EaseCircleActionIn.prototype._updateTime,reverse:function(){return cc._easeCircleActionIn}};cc.easeCircleActionIn=function(){return cc._easeCircleActionIn};
cc.EaseCircleActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return Math.sqrt(1-a*a)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionOut(this._inner.reverse())}});cc.EaseCircleActionOut.create=function(a){return new cc.EaseCircleActionOut(a)};cc._easeCircleActionOut={easing:cc.EaseCircleActionOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionOut}};
cc.easeCircleActionOut=function(){return cc._easeCircleActionOut};cc.EaseCircleActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(a<1)return-0.5*(Math.sqrt(1-a*a)-1);a-=2;return 0.5*(Math.sqrt(1-a*a)+1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionInOut(this._inner.reverse())}});cc.EaseCircleActionInOut.create=function(a){return new cc.EaseCircleActionInOut(a)};
cc._easeCircleActionInOut={easing:cc.EaseCircleActionInOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionInOut}};cc.easeCircleActionInOut=function(){return cc._easeCircleActionInOut};cc.EaseCubicActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionIn(this._inner.reverse())}});
cc.EaseCubicActionIn.create=function(a){return new cc.EaseCubicActionIn(a)};cc._easeCubicActionIn={easing:cc.EaseCubicActionIn.prototype._updateTime,reverse:function(){return cc._easeCubicActionIn}};cc.easeCubicActionIn=function(){return cc._easeCubicActionIn};
cc.EaseCubicActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionOut(this._inner.reverse())}});cc.EaseCubicActionOut.create=function(a){return new cc.EaseCubicActionOut(a)};cc._easeCubicActionOut={easing:cc.EaseCubicActionOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionOut}};
cc.easeCubicActionOut=function(){return cc._easeCubicActionOut};cc.EaseCubicActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(a<1)return 0.5*a*a*a;a-=2;return 0.5*(a*a*a+2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionInOut(this._inner.reverse())}});cc.EaseCubicActionInOut.create=function(a){return new cc.EaseCubicActionInOut(a)};
cc._easeCubicActionInOut={easing:cc.EaseCubicActionInOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionInOut}};cc.easeCubicActionInOut=function(){return cc._easeCubicActionInOut};cc.cardinalSplineAt=function(a,b,c,d,e,f){var g=f*f,h=g*f,j=(1-e)/2;e=j*(-h+2*g-f);var k=j*(-h+g)+(2*h-3*g+1);f=j*(h-2*g+f)+(-2*h+3*g);g=j*(h-g);return cc.p(a.x*e+b.x*k+c.x*f+d.x*g,a.y*e+b.y*k+c.y*f+d.y*g)};
cc.reverseControlPoints=function(a){for(var b=[],c=a.length-1;c>=0;c--)b.push(cc.p(a[c].x,a[c].y));return b};cc.cloneControlPoints=function(a){for(var b=[],c=0;c<a.length;c++)b.push(cc.p(a[c].x,a[c].y));return b};cc.copyControlPoints=cc.cloneControlPoints;cc.getControlPointAt=function(a,b){b=Math.min(a.length-1,Math.max(b,0));return a[b]};cc.reverseControlPointsInline=function(a){for(var b=a.length,c=0|b/2,d=0;d<c;++d){var e=a[d];a[d]=a[b-d-1];a[b-d-1]=e}};
cc.CardinalSplineTo=cc.ActionInterval.extend({_points:null,_deltaT:0,_tension:0,_previousPosition:null,_accumulatedDiff:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);this._points=[];c!==undefined&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(!b||b.length==0)throw"Invalid configuration. It must at least have one control point";if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this.setPoints(b);this._tension=c;return true}return false},clone:function(){var a=
new cc.CardinalSplineTo;a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._deltaT=1/(this._points.length-1);this._previousPosition=cc.p(this.target.getPositionX(),this.target.getPositionY());this._accumulatedDiff=cc.p(0,0)},update:function(a){a=this._computeEaseTime(a);var b,c=this._points;if(a==1){b=c.length-1;a=1}else{var d=this._deltaT;b=0|a/d;a=(a-d*b)/d}b=cc.cardinalSplineAt(cc.getControlPointAt(c,
b-1),cc.getControlPointAt(c,b-0),cc.getControlPointAt(c,b+1),cc.getControlPointAt(c,b+2),this._tension,a);if(cc.ENABLE_STACKABLE_ACTIONS){c=this.target.getPositionX()-this._previousPosition.x;a=this.target.getPositionY()-this._previousPosition.y;if(c!=0||a!=0){d=this._accumulatedDiff;c=d.x+c;a=d.y+a;d.x=c;d.y=a;b.x+=c;b.y+=a}}this.updatePosition(b)},reverse:function(){var a=cc.reverseControlPoints(this._points);return cc.cardinalSplineTo(this._duration,a,this._tension)},updatePosition:function(a){this.target.setPosition(a);
this._previousPosition=a},getPoints:function(){return this._points},setPoints:function(a){this._points=a}});cc.cardinalSplineTo=function(a,b,c){return new cc.CardinalSplineTo(a,b,c)};cc.CardinalSplineTo.create=cc.cardinalSplineTo;
cc.CardinalSplineBy=cc.CardinalSplineTo.extend({_startPosition:null,ctor:function(a,b,c){cc.CardinalSplineTo.prototype.ctor.call(this);this._startPosition=cc.p(0,0);c!==undefined&&this.initWithDuration(a,b,c)},startWithTarget:function(a){cc.CardinalSplineTo.prototype.startWithTarget.call(this,a);this._startPosition.x=a.getPositionX();this._startPosition.y=a.getPositionY()},reverse:function(){for(var a=this._points.slice(),b,c=a[0],d=1;d<a.length;++d){b=a[d];a[d]=cc.pSub(b,c);c=b}a=cc.reverseControlPoints(a);
c=a[a.length-1];a.pop();c.x=-c.x;c.y=-c.y;a.unshift(c);for(d=1;d<a.length;++d){b=a[d];b.x=-b.x;b.y=-b.y;b.x+=c.x;b.y+=c.y;c=a[d]=b}return cc.cardinalSplineBy(this._duration,a,this._tension)},updatePosition:function(a){var b=this._startPosition,c=a.x+b.x;a=a.y+b.y;this._previousPosition.x=c;this._previousPosition.y=a;this.target.setPosition(c,a)},clone:function(){var a=new cc.CardinalSplineBy;a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension);return a}});
cc.cardinalSplineBy=function(a,b,c){return new cc.CardinalSplineBy(a,b,c)};cc.CardinalSplineBy.create=cc.cardinalSplineBy;cc.CatmullRomTo=cc.CardinalSplineTo.extend({ctor:function(a,b){b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,0.5)},clone:function(){var a=new cc.CatmullRomTo;a.initWithDuration(this._duration,cc.copyControlPoints(this._points));return a}});
cc.catmullRomTo=function(a,b){return new cc.CatmullRomTo(a,b)};cc.CatmullRomTo.create=cc.catmullRomTo;cc.CatmullRomBy=cc.CardinalSplineBy.extend({ctor:function(a,b){cc.CardinalSplineBy.prototype.ctor.call(this);b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,0.5)},clone:function(){var a=new cc.CatmullRomBy;a.initWithDuration(this._duration,cc.copyControlPoints(this._points));return a}});
cc.catmullRomBy=function(a,b){return new cc.CatmullRomBy(a,b)};cc.CatmullRomBy.create=cc.catmullRomBy;cc.ActionTweenDelegate=cc.Class.extend({updateTweenAction:function(){}});
cc.ActionTween=cc.ActionInterval.extend({key:"",from:0,to:0,delta:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);this.key="";d!==undefined&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){if(cc.ActionInterval.prototype.initWithDuration.call(this,a)){this.key=b;this.to=d;this.from=c;return true}return false},startWithTarget:function(a){if(!a||!a.updateTweenAction)throw"cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function";
cc.ActionInterval.prototype.startWithTarget.call(this,a);this.delta=this.to-this.from},update:function(a){this.target.updateTweenAction(this.to-this.delta*(1-a),this.key)},reverse:function(){return new cc.ActionTween(this.duration,this.key,this.to,this.from)},clone:function(){var a=new cc.ActionTween;a.initWithDuration(this._duration,this.key,this.from,this.to);return a}});cc.actionTween=function(a,b,c,d){return new cc.ActionTween(a,b,c,d)};cc.ActionTween.create=cc.actionTween;
if(cc.sys._supportWebAudio){var _ctx=cc.webAudioContext=new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext);cc.WebAudio=cc.Class.extend({_events:null,_buffer:null,_sourceNode:null,_volumeNode:null,src:null,preload:null,autoplay:null,controls:null,mediagroup:null,currentTime:0,startTime:0,duration:0,_loop:null,_volume:1,_pauseTime:0,_paused:false,_stopped:true,_loadState:-1,ctor:function(a){this._events={};this.src=a;this._volumeNode=_ctx.createGain?_ctx.createGain():_ctx.createGainNode();
this._onSuccess1=this._onSuccess.bind(this);this._onError1=this._onError.bind(this)},_play:function(a){var b=this._sourceNode=_ctx.createBufferSource(),c=this._volumeNode;a=a||0;b.buffer=this._buffer;c.gain.value=this._volume;b.connect(c);c.connect(_ctx.destination);b.loop=this._loop;b._stopped=false;b.playbackState||(b.onended=function(){this._stopped=true});this._stopped=this._paused=false;if(b.start)b.start(0,a);else if(b.noteGrainOn){c=b.buffer.duration;this.loop?b.noteGrainOn(0,a,c):b.noteGrainOn(0,
a,c-a)}else b.noteOn(0);this._pauseTime=0},_stop:function(){var a=this._sourceNode;if(!this._stopped){a.stop?a.stop(0):a.noteOff(0);this._stopped=true}},play:function(){if(this._loadState==-1)this._loadState=0;else if(this._loadState==1){var a=this._sourceNode;if(!(!this._stopped&&a&&(a.playbackState==2||!a._stopped))){this.startTime=_ctx.currentTime;this._play(0)}}},pause:function(){this._pauseTime=_ctx.currentTime;this._paused=true;this._stop()},resume:function(){if(this._paused)this._play(this._buffer?
(this._pauseTime-this.startTime)%this._buffer.duration:0)},stop:function(){this._pauseTime=0;this._paused=false;this._stop()},load:function(){var a=this;if(a._loadState!=1){a._loadState=-1;a.played=false;a.ended=true;var b=new XMLHttpRequest;b.open("GET",a.src,true);b.responseType="arraybuffer";b.onload=function(){_ctx.decodeAudioData(b.response,a._onSuccess1,a._onError1)};b.send()}},addEventListener:function(a,b){this._events[a]=b.bind(this)},removeEventListener:function(a){delete this._events[a]},
canplay:function(){return cc.sys._supportWebAudio},_onSuccess:function(a){this._buffer=a;a=this._events.success;var b=this._events.canplaythrough;a&&a();b&&b();if(this._loadState==0||this.autoplay=="autoplay"||this.autoplay==true)this._play();this._loadState=1},_onError:function(){var a=this._events.error;a&&a();this._loadState=-2},cloneNode:function(){var a=new cc.WebAudio(this.src);a.volume=this.volume;a._loadState=this._loadState;a._buffer=this._buffer;if(a._loadState==0||a._loadState==-1)a.load();
return a}});_p=cc.WebAudio.prototype;cc.defineGetterSetter(_p,"loop",function(){return this._loop},function(a){this._loop=a;if(this._sourceNode)this._sourceNode.loop=a});cc.defineGetterSetter(_p,"volume",function(){return this._volume},function(a){this._volume=a;this._volumeNode.gain.value=a});cc.defineGetterSetter(_p,"paused",function(){return this._paused});cc.defineGetterSetter(_p,"ended",function(){var a=this._sourceNode;if(this._paused)return false;if(this._stopped&&!a)return true;return a.playbackState==
null?a._stopped:a.playbackState==3});cc.defineGetterSetter(_p,"played",function(){var a=this._sourceNode;return a&&(a.playbackState==2||!a._stopped)})}
cc.AudioEngine=cc.Class.extend({_soundSupported:false,_currMusic:null,_currMusicPath:null,_musicPlayState:0,_audioID:0,_effects:{},_audioPool:{},_effectsVolume:1,_maxAudioInstance:5,_effectPauseCb:null,_playings:[],ctor:function(){this._soundSupported=cc._audioLoader._supportedAudioTypes.length>0;if(this._effectPauseCb)this._effectPauseCb=this._effectPauseCb.bind(this)},willPlayMusic:function(){return false},getEffectsVolume:function(){return this._effectsVolume},playMusic:function(a,b){if(this._soundSupported){var c=
this._currMusic;c&&this._stopAudio(c);if(cc.sys.isMobile&&cc.sys.os==cc.sys.OS_IOS){c=this._getAudioByUrl(a);this._currMusic=c.cloneNode();this._currMusicPath=a}else if(a!=this._currMusicPath){this._currMusic=c=this._getAudioByUrl(a);this._currMusicPath=a}if(this._currMusic){this._currMusic.loop=b||false;this._playMusic(this._currMusic)}}},_getAudioByUrl:function(a){var b=cc.loader,c=b.getRes(a);if(!c){b.load(a);c=b.getRes(a)}return c},_playMusic:function(a){if(!a.ended)if(a.stop)a.stop();else{a.pause();
if(a.readyState>2)a.currentTime=0}this._musicPlayState=2;a.play()},stopMusic:function(a){if(this._musicPlayState>0){var b=this._currMusic;if(b)if(this._stopAudio(b)){a&&cc.loader.release(this._currMusicPath);this._currMusicPath=this._currMusic=null;this._musicPlayState=0}}},_stopAudio:function(a){if(a&&!a.ended){if(a.stop)a.stop();else{a.pause();if(a.readyState>2&&a.duration&&a.duration!=Infinity)a.currentTime=a.duration}return true}return false},pauseMusic:function(){if(this._musicPlayState==2){this._currMusic.pause();
this._musicPlayState=1}},resumeMusic:function(){if(this._musicPlayState==1){this._resumeAudio(this._currMusic);this._musicPlayState=2}},_resumeAudio:function(a){if(a&&!a.ended)a.resume?a.resume():a.play()},rewindMusic:function(){this._currMusic&&this._playMusic(this._currMusic)},getMusicVolume:function(){return this._musicPlayState==0?0:this._currMusic.volume},setMusicVolume:function(a){if(this._musicPlayState>0)this._currMusic.volume=Math.min(Math.max(a,0),1)},isMusicPlaying:function(){return this._musicPlayState==
2&&this._currMusic&&!this._currMusic.ended},_getEffectList:function(a){var b=this._audioPool[a];b||(b=this._audioPool[a]=[]);return b},_getEffect:function(a){var b;if(!this._soundSupported)return null;var c=this._getEffectList(a);if(cc.sys.isMobile&&cc.sys.os==cc.sys.OS_IOS)b=this._getEffectAudio(c,a);else{for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f.ended){b=f;if(b.readyState>2)b.currentTime=0;window.chrome&&b.load();break}}if(!b)(b=this._getEffectAudio(c,a))&&c.push(b)}return b},_getEffectAudio:function(a,
b){if(a.length>=this._maxAudioInstance){cc.log("Error: "+b+" greater than "+this._maxAudioInstance);return null}a=this._getAudioByUrl(b);if(!a)return null;a=a.cloneNode(true);this._effectPauseCb&&cc._addEventListener(a,"pause",this._effectPauseCb);a.volume=this._effectsVolume;return a},playEffect:function(a,b){a=this._getEffect(a);if(!a)return null;a.loop=b||false;a.play();b=this._audioID++;this._effects[b]=a;return b},setEffectsVolume:function(a){a=this._effectsVolume=Math.min(Math.max(a,0),1);var b=
this._effects;for(var c in b)b[c].volume=a},pauseEffect:function(a){(a=this._effects[a])&&!a.ended&&a.pause()},pauseAllEffects:function(){var a=this._effects;for(var b in a){var c=a[b];c.ended||c.pause()}},resumeEffect:function(a){this._resumeAudio(this._effects[a])},resumeAllEffects:function(){var a=this._effects;for(var b in a)this._resumeAudio(a[b])},stopEffect:function(a){this._stopAudio(this._effects[a]);delete this._effects[a]},stopAllEffects:function(){var a=this._effects;for(var b in a){this._stopAudio(a[b]);
delete a[b]}},unloadEffect:function(a){var b=cc.loader,c=this._effects,d=this._getEffectList(a);b.release(a);if(d.length!=0){b=d[0].src;delete this._audioPool[a];for(var e in c)if(c[e].src==b){this._stopAudio(c[e]);delete c[e]}}},end:function(){this.stopMusic();this.stopAllEffects()},_pausePlaying:function(){var a=this._effects,b;for(var c in a)if((b=a[c])&&!b.ended&&!b.paused){this._playings.push(b);b.pause()}if(this.isMusicPlaying()){this._playings.push(this._currMusic);this._currMusic.pause()}},
_resumePlaying:function(){for(var a=this._playings,b=0,c=a.length;b<c;b++)this._resumeAudio(a[b]);a.length=0}});
if(!cc.sys._supportWebAudio&&!cc.sys._supportMultipleAudio)cc.AudioEngineForSingle=cc.AudioEngine.extend({_waitingEffIds:[],_pausedEffIds:[],_currEffect:null,_maxAudioInstance:2,_effectCache4Single:{},_needToResumeMusic:false,_expendTime4Music:0,_isHiddenMode:false,_playMusic:function(a){this._stopAllEffects();this._super(a)},resumeMusic:function(){if(this._musicPlayState==1){this._stopAllEffects();this._needToResumeMusic=false;this._expendTime4Music=0;this._super()}},playEffect:function(a,b){var c=
this._currEffect;a=b?this._getEffect(a):this._getSingleEffect(a);if(!a)return null;a.loop=b||false;b=this._audioID++;this._effects[b]=a;if(this.isMusicPlaying()){this.pauseMusic();this._needToResumeMusic=true}if(c){c!=a&&this._waitingEffIds.push(this._currEffectId);this._waitingEffIds.push(b);c.pause()}else{this._currEffect=a;this._currEffectId=b;a.play()}return b},pauseEffect:function(){cc.log("pauseEffect not supported in single audio mode!")},pauseAllEffects:function(){var a=this._waitingEffIds,
b=this._pausedEffIds,c=this._currEffect;if(c){for(var d=0,e=a.length;d<e;d++)b.push(a[d]);a.length=0;b.push(this._currEffectId);c.pause()}},resumeEffect:function(){cc.log("resumeEffect not supported in single audio mode!")},resumeAllEffects:function(){var a=this._waitingEffIds,b=this._pausedEffIds;if(this.isMusicPlaying()){this.pauseMusic();this._needToResumeMusic=true}for(var c=0,d=b.length;c<d;c++)a.push(b[c]);b.length=0;if(!this._currEffect&&a.length>=0){a=a.pop();if(b=this._effects[a]){this._currEffectId=
a;this._currEffect=b;this._resumeAudio(b)}}},stopEffect:function(a){var b=this._currEffect,c=this._waitingEffIds,d=this._pausedEffIds;if(b&&this._currEffectId==a)this._stopAudio(b);else{b=c.indexOf(a);if(b>=0)c.splice(b,1);else{b=d.indexOf(a);b>=0&&d.splice(b,1)}}},stopAllEffects:function(){this._stopAllEffects();if(!this._currEffect&&this._needToResumeMusic){this._resumeAudio(this._currMusic);this._musicPlayState=2;this._needToResumeMusic=false;this._expendTime4Music=0}},unloadEffect:function(a){var b=
cc.loader,c=this._effects,d=this._effectCache4Single,e=this._getEffectList(a),f=this._currEffect;b.release(a);if(!(e.length==0&&!d[a])){b=e.length>0?e[0].src:d[a].src;delete this._audioPool[a];delete d[a];for(var g in c)c[g].src==b&&delete c[g];f&&f.src==b&&this._stopAudio(f)}},_getSingleEffect:function(a){var b=this._effectCache4Single[a],c=this._waitingEffIds,d=this._pausedEffIds,e=this._effects;if(b){if(b.readyState>2)b.currentTime=0}else{b=this._getAudioByUrl(a);if(!b)return null;b=b.cloneNode(true);
this._effectPauseCb&&cc._addEventListener(b,"pause",this._effectPauseCb);b.volume=this._effectsVolume;this._effectCache4Single[a]=b}a=0;for(var f=c.length;a<f;)if(e[c[a]]==b)c.splice(a,1);else a++;a=0;for(f=d.length;a<f;)if(e[d[a]]==b)d.splice(a,1);else a++;b._isToPlay=true;return b},_stopAllEffects:function(){var a=this._currEffect,b=this._audioPool,c=this._effectCache4Single,d=this._waitingEffIds,e=this._pausedEffIds;if(!(!a&&d.length==0&&e.length==0)){for(var f in c){var g=c[f];if(g.readyState>
2&&g.duration&&g.duration!=Infinity)g.currentTime=g.duration}d.length=0;e.length=0;for(f in b){c=b[f];d=0;for(e=c.length;d<e;d++){g=c[d];g.loop=false;if(g.readyState>2&&g.duration&&g.duration!=Infinity)g.currentTime=g.duration}}a&&this._stopAudio(a)}},_effectPauseCb:function(){if(!this._isHiddenMode){var a=this._getWaitingEffToPlay();if(a)if(a._isToPlay){delete a._isToPlay;a.play()}else this._resumeAudio(a);else if(this._needToResumeMusic){a=this._currMusic;if(a.readyState>2&&a.duration&&a.duration!=
Infinity){var b=a.currentTime+this._expendTime4Music;b-=a.duration*(b/a.duration|0);a.currentTime=b}this._expendTime4Music=0;this._resumeAudio(a);this._musicPlayState=2;this._needToResumeMusic=false}}},_getWaitingEffToPlay:function(){var a=this._waitingEffIds,b=this._effects,c=this._currEffect,d=c?c.currentTime-(c.startTime||0):0;for(this._expendTime4Music+=d;;){if(a.length==0)break;var e=a.pop();if(c=b[e])if(c._isToPlay||c.loop||c.duration&&c.currentTime+d<c.duration){this._currEffectId=e;this._currEffect=
c;if(!c._isToPlay&&c.readyState>2&&c.duration&&c.duration!=Infinity){a=c.currentTime+d;a-=c.duration*(a/c.duration|0);c.currentTime=a}c._isToPlay=false;return c}else if(c.readyState>2&&c.duration&&c.duration!=Infinity)c.currentTime=c.duration}return this._currEffect=this._currEffectId=null},_pausePlaying:function(){var a=this._currEffect;this._isHiddenMode=true;if(a=this._musicPlayState==2?this._currMusic:a){this._playings.push(a);a.pause()}},_resumePlaying:function(){var a=this._playings;this._isHiddenMode=
false;if(a.length>0){this._resumeAudio(a[0]);a.length=0}}});
cc._audioLoader={_supportedAudioTypes:null,getBasePath:function(){return cc.loader.audioPath},_load:function(a,b,c,d,e,f,g){var h=this,j=cc.loader,k=cc.path,m=this._supportedAudioTypes,n="";if(m.length==0)return g("can not support audio!");if(d==-1){n=(k.extname(a)||"").toLowerCase();if(!h.audioTypeSupported(n)){n=m[0];d=0}}else if(d<m.length)n=m[d];else return g("can not found the resource of audio! Last match url is : "+a);if(e.indexOf(n)>=0)return h._load(a,b,c,d+1,e,f,g);a=k.changeExtname(a,n);
e.push(n);f=h._loadAudio(a,f,function(o){if(o)return h._load(a,b,c,d+1,e,f,g);g(null,f)},d==m.length-1);j.cache[b]=f},audioTypeSupported:function(a){if(!a)return false;return this._supportedAudioTypes.indexOf(a.toLowerCase())>=0},_loadAudio:function(a,b,c,d){var e;e=!cc.isObject(window.cc)&&cc.sys.browserType=="firefox"?Audio:location.origin=="file://"?Audio:cc.WebAudio||Audio;if(arguments.length==2){c=b;b=new e}else if(arguments.length>3&&!b)b=new e;b.src=a;b.preload="auto";var f=navigator.userAgent;
if(/Mobile/.test(f)&&(/iPhone OS/.test(f)||/iPad/.test(f)||/Firefox/.test(f))||/MSIE/.test(f)){b.load();c(null,b)}else{cc._addEventListener(b,"canplaythrough",function(){c(null,b);this.removeEventListener("canplaythrough",arguments.callee,false);this.removeEventListener("error",arguments.callee,false)},false);var g=function(){b.removeEventListener("emptied",g);b.removeEventListener("error",g);c("load "+a+" failed");if(d){this.removeEventListener("canplaythrough",arguments.callee,false);this.removeEventListener("error",
arguments.callee,false)}};cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT&&cc._addEventListener(b,"emptied",g,false);cc._addEventListener(b,"error",g,false);b.load()}return b},load:function(a,b,c,d){this._load(a,b,c,-1,[],null,d)}};
cc._audioLoader._supportedAudioTypes=function(){var a=cc.newElement("audio"),b=[];if(a.canPlayType){var c=function(d){d=a.canPlayType(d);return d!="no"&&d!=""};c('audio/ogg; codecs="vorbis"')&&b.push(".ogg");c("audio/mpeg")&&b.push(".mp3");c('audio/wav; codecs="1"')&&b.push(".wav");c("audio/mp4")&&b.push(".mp4");if(c("audio/x-m4a")||c("audio/aac"))b.push(".m4a")}return b}();cc.loader.register(["mp3","ogg","wav","mp4","m4a"],cc._audioLoader);
cc.audioEngine=cc.AudioEngineForSingle?new cc.AudioEngineForSingle:new cc.AudioEngine;cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){cc.audioEngine._pausePlaying()});cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){cc.audioEngine._resumePlaying()});cc._globalFontSize=cc.ITEM_SIZE;cc._globalFontName="Arial";cc._globalFontNameRelease=false;
cc.MenuItem=cc.Node.extend({_enabled:false,_target:null,_callback:null,_isSelected:false,_className:"MenuItem",ctor:function(a,b){var c=cc.Node.prototype;c.ctor.call(this);this._callback=this._target=null;this._enabled=this._isSelected=false;c.setAnchorPoint.call(this,0.5,0.5);this._target=b||null;if(this._callback=a||null)this._enabled=true},isSelected:function(){return this._isSelected},setOpacityModifyRGB:function(){},isOpacityModifyRGB:function(){return false},setTarget:function(a,b){this._target=
b;this._callback=a},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a},initWithCallback:function(a,b){this.anchorY=this.anchorX=0.5;this._target=b;this._callback=a;this._enabled=true;this._isSelected=false;return true},rect:function(){var a=this._position,b=this._contentSize,c=this._anchorPoint;return cc.rect(a.x-b.width*c.x,a.y-b.height*c.y,b.width,b.height)},selected:function(){this._isSelected=true},unselected:function(){this._isSelected=false},setCallback:function(a,
b){this._target=b;this._callback=a},activate:function(){if(this._enabled){var a=this._target,b=this._callback;if(b)if(a&&cc.isString(b))a[b](this);else a&&cc.isFunction(b)?b.call(a,this):b(this)}}});_p=cc.MenuItem.prototype;cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled);cc.MenuItem.create=function(a,b){return new cc.MenuItem(a,b)};
cc.MenuItemLabel=cc.MenuItem.extend({_disabledColor:null,_label:null,_orginalScale:0,_colorBackup:null,ctor:function(a,b,c){cc.MenuItem.prototype.ctor.call(this,b,c);this._label=this._disabledColor=null;this._orginalScale=0;this._colorBackup=null;if(a){this._originalScale=1;this._colorBackup=cc.color.WHITE;this._disabledColor=cc.color(126,126,126);this.setLabel(a);this.cascadeOpacity=this.cascadeColor=true}},getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(a){this._disabledColor=
a},getLabel:function(){return this._label},setLabel:function(a){if(a){this.addChild(a);a.anchorX=0;a.anchorY=0;this.width=a.width;this.height=a.height}this._label&&this.removeChild(this._label,true);this._label=a},setEnabled:function(a){if(this._enabled!=a){var b=this._label;if(a)b.color=this._colorBackup;else{this._colorBackup=b.color;b.color=this._disabledColor}}cc.MenuItem.prototype.setEnabled.call(this,a)},setOpacity:function(a){this._label.opacity=a},getOpacity:function(){return this._label.opacity},
setColor:function(a){this._label.color=a},getColor:function(){return this._label.color},initWithLabel:function(a,b,c){this.initWithCallback(b,c);this._originalScale=1;this._colorBackup=cc.color.WHITE;this._disabledColor=cc.color(126,126,126);this.setLabel(a);return this.cascadeOpacity=this.cascadeColor=true},setString:function(a){this._label.string=a;this.width=this._label.width;this.height=this._label.height},getString:function(){return this._label.string},activate:function(){if(this._enabled){this.stopAllActions();
this.scale=this._originalScale;cc.MenuItem.prototype.activate.call(this)}},selected:function(){if(this._enabled){cc.MenuItem.prototype.selected.call(this);var a=this.getActionByTag(cc.ZOOM_ACTION_TAG);if(a)this.stopAction(a);else this._originalScale=this.scale;a=cc.scaleTo(0.1,this._originalScale*1.2);a.setTag(cc.ZOOM_ACTION_TAG);this.runAction(a)}},unselected:function(){if(this._enabled){cc.MenuItem.prototype.unselected.call(this);this.stopActionByTag(cc.ZOOM_ACTION_TAG);var a=cc.scaleTo(0.1,this._originalScale);
a.setTag(cc.ZOOM_ACTION_TAG);this.runAction(a)}}});_p=cc.MenuItemLabel.prototype;cc.defineGetterSetter(_p,"string",_p.getString,_p.setString);cc.defineGetterSetter(_p,"disabledColor",_p.getDisabledColor,_p.setDisabledColor);cc.defineGetterSetter(_p,"label",_p.getLabel,_p.setLabel);cc.MenuItemLabel.create=function(a,b,c){return new cc.MenuItemLabel(a,b,c)};
cc.MenuItemAtlasFont=cc.MenuItemLabel.extend({ctor:function(a,b,c,d,e,f,g){var h;if(a&&a.length>0)h=new cc.LabelAtlas(a,b,c,d,e);cc.MenuItemLabel.prototype.ctor.call(this,h,f,g)},initWithString:function(a,b,c,d,e,f,g){if(!a||a.length==0)throw"cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0";var h=new cc.LabelAtlas;h.initWithString(a,b,c,d,e);this.initWithLabel(h,f,g);return true}});
cc.MenuItemAtlasFont.create=function(a,b,c,d,e,f,g){return new cc.MenuItemAtlasFont(a,b,c,d,e,f,g)};
cc.MenuItemFont=cc.MenuItemLabel.extend({_fontSize:null,_fontName:null,ctor:function(a,b,c){var d;if(a&&a.length>0){this._fontName=cc._globalFontName;this._fontSize=cc._globalFontSize;d=new cc.LabelTTF(a,this._fontName,this._fontSize)}else{this._fontSize=0;this._fontName=""}cc.MenuItemLabel.prototype.ctor.call(this,d,b,c)},initWithString:function(a,b,c){if(!a||a.length==0)throw"Value should be non-null and its length should be greater than 0";this._fontName=cc._globalFontName;this._fontSize=cc._globalFontSize;
this.initWithLabel(new cc.LabelTTF(a,this._fontName,this._fontSize),b,c);return true},setFontSize:function(a){this._fontSize=a;this._recreateLabel()},getFontSize:function(){return this._fontSize},setFontName:function(a){this._fontName=a;this._recreateLabel()},getFontName:function(){return this._fontName},_recreateLabel:function(){this.setLabel(new cc.LabelTTF(this._label.string,this._fontName,this._fontSize))}});cc.MenuItemFont.setFontSize=function(a){cc._globalFontSize=a};
cc.MenuItemFont.fontSize=function(){return cc._globalFontSize};cc.MenuItemFont.setFontName=function(a){if(cc._globalFontNameRelease)cc._globalFontName="";cc._globalFontName=a;cc._globalFontNameRelease=true};_p=cc.MenuItemFont.prototype;cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize);cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName);cc.MenuItemFont.fontName=function(){return cc._globalFontName};
cc.MenuItemFont.create=function(a,b,c){return new cc.MenuItemFont(a,b,c)};
cc.MenuItemSprite=cc.MenuItem.extend({_normalImage:null,_selectedImage:null,_disabledImage:null,ctor:function(a,b,c,d,e){cc.MenuItem.prototype.ctor.call(this);this._disabledImage=this._selectedImage=this._normalImage=null;if(b!==undefined){a=a;b=b;var f,g,h;if(e!==undefined){f=c;h=d;g=e}else if(d!==undefined&&cc.isFunction(d)){f=c;h=d}else if(d!==undefined&&cc.isFunction(c)){g=d;h=c;f=new cc.Sprite(b)}else if(c===undefined)f=new cc.Sprite(b);this.initWithNormalSprite(a,b,f,h,g)}},getNormalImage:function(){return this._normalImage},
setNormalImage:function(a){if(this._normalImage!=a){if(a){this.addChild(a,0,cc.NORMAL_TAG);a.anchorX=0;a.anchorY=0}this._normalImage&&this.removeChild(this._normalImage,true);this._normalImage=a;this.width=this._normalImage.width;this.height=this._normalImage.height;this._updateImagesVisibility();a.textureLoaded&&!a.textureLoaded()&&a.addEventListener("load",function(b){this.width=b.width;this.height=b.height},this)}},getSelectedImage:function(){return this._selectedImage},setSelectedImage:function(a){if(this._selectedImage!=
a){if(a){this.addChild(a,0,cc.SELECTED_TAG);a.anchorX=0;a.anchorY=0}this._selectedImage&&this.removeChild(this._selectedImage,true);this._selectedImage=a;this._updateImagesVisibility()}},getDisabledImage:function(){return this._disabledImage},setDisabledImage:function(a){if(this._disabledImage!=a){if(a){this.addChild(a,0,cc.DISABLE_TAG);a.anchorX=0;a.anchorY=0}this._disabledImage&&this.removeChild(this._disabledImage,true);this._disabledImage=a;this._updateImagesVisibility()}},initWithNormalSprite:function(a,
b,c,d,e){this.initWithCallback(d,e);this.setNormalImage(a);this.setSelectedImage(b);this.setDisabledImage(c);if(a=this._normalImage){this.width=a.width;this.height=a.height;a.textureLoaded&&!a.textureLoaded()&&a.addEventListener("load",function(f){this.width=f.width;this.height=f.height;this.cascadeOpacity=this.cascadeColor=true},this)}return this.cascadeOpacity=this.cascadeColor=true},setColor:function(a){this._normalImage.color=a;if(this._selectedImage)this._selectedImage.color=a;if(this._disabledImage)this._disabledImage.color=
a},getColor:function(){return this._normalImage.color},setOpacity:function(a){this._normalImage.opacity=a;if(this._selectedImage)this._selectedImage.opacity=a;if(this._disabledImage)this._disabledImage.opacity=a},getOpacity:function(){return this._normalImage.opacity},selected:function(){cc.MenuItem.prototype.selected.call(this);if(this._normalImage){if(this._disabledImage)this._disabledImage.visible=false;if(this._selectedImage){this._normalImage.visible=false;this._selectedImage.visible=true}else this._normalImage.visible=
true}},unselected:function(){cc.MenuItem.prototype.unselected.call(this);if(this._normalImage){this._normalImage.visible=true;if(this._selectedImage)this._selectedImage.visible=false;if(this._disabledImage)this._disabledImage.visible=false}},setEnabled:function(a){if(this._enabled!=a){cc.MenuItem.prototype.setEnabled.call(this,a);this._updateImagesVisibility()}},_updateImagesVisibility:function(){var a=this._normalImage,b=this._selectedImage,c=this._disabledImage;if(this._enabled){if(a)a.visible=
true;if(b)b.visible=false;if(c)c.visible=false}else if(c){if(a)a.visible=false;if(b)b.visible=false;if(c)c.visible=true}else{if(a)a.visible=true;if(b)b.visible=false}}});_p=cc.MenuItemSprite.prototype;cc.defineGetterSetter(_p,"normalImage",_p.getNormalImage,_p.setNormalImage);cc.defineGetterSetter(_p,"selectedImage",_p.getSelectedImage,_p.setSelectedImage);cc.defineGetterSetter(_p,"disabledImage",_p.getDisabledImage,_p.setDisabledImage);
cc.MenuItemSprite.create=function(a,b,c,d,e){return new cc.MenuItemSprite(a,b,c,d,e||undefined)};
cc.MenuItemImage=cc.MenuItemSprite.extend({ctor:function(a,b,c,d,e){var f=null,g=null,h=null,j=null,k=null;if(a===undefined)cc.MenuItemSprite.prototype.ctor.call(this);else{f=new cc.Sprite(a);b&&(g=new cc.Sprite(b));if(d===undefined)j=c;else if(e===undefined){j=c;k=d}else if(e){h=new cc.Sprite(c);j=d;k=e}cc.MenuItemSprite.prototype.ctor.call(this,f,g,h,j,k)}},setNormalSpriteFrame:function(a){this.setNormalImage(new cc.Sprite(a))},setSelectedSpriteFrame:function(a){this.setSelectedImage(new cc.Sprite(a))},
setDisabledSpriteFrame:function(a){this.setDisabledImage(new cc.Sprite(a))},initWithNormalImage:function(a,b,c,d,e){var f=null,g=null,h=null;if(a)f=new cc.Sprite(a);if(b)g=new cc.Sprite(b);if(c)h=new cc.Sprite(c);return this.initWithNormalSprite(f,g,h,d,e)}});cc.MenuItemImage.create=function(a,b,c,d,e){return new cc.MenuItemImage(a,b,c,d,e)};
cc.MenuItemToggle=cc.MenuItem.extend({subItems:null,_selectedIndex:0,_opacity:null,_color:null,ctor:function(){cc.MenuItem.prototype.ctor.call(this);this._selectedIndex=0;this.subItems=[];this._opacity=0;this._color=cc.color.WHITE;arguments.length>0&&this.initWithItems(Array.prototype.slice.apply(arguments))},getOpacity:function(){return this._opacity},setOpacity:function(a){this._opacity=a;if(this.subItems&&this.subItems.length>0)for(var b=0;b<this.subItems.length;b++)this.subItems[b].opacity=a;
this._color.a=a},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},setColor:function(a){var b=this._color;b.r=a.r;b.g=a.g;b.b=a.b;if(this.subItems&&this.subItems.length>0)for(b=0;b<this.subItems.length;b++)this.subItems[b].setColor(a);a.a!==undefined&&!a.a_undefined&&this.setOpacity(a.a)},getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(a){if(a!=this._selectedIndex){this._selectedIndex=a;(a=this.getChildByTag(cc.CURRENT_ITEM))&&a.removeFromParent(false);
a=this.subItems[this._selectedIndex];this.addChild(a,0,cc.CURRENT_ITEM);var b=a.width,c=a.height;this.width=b;this.height=c;a.setPosition(b/2,c/2)}},getSubItems:function(){return this.subItems},setSubItems:function(a){this.subItems=a},initWithItems:function(a){var b=a.length;if(cc.isFunction(a[a.length-2])){this.initWithCallback(a[a.length-2],a[a.length-1]);b-=2}else if(cc.isFunction(a[a.length-1])){this.initWithCallback(a[a.length-1],null);b-=1}else this.initWithCallback(null,null);var c=this.subItems;
for(var d=c.length=0;d<b;d++)a[d]&&c.push(a[d]);this._selectedIndex=cc.UINT_MAX;this.setSelectedIndex(0);return this.cascadeOpacity=this.cascadeColor=true},addSubItem:function(a){this.subItems.push(a)},activate:function(){this._enabled&&this.setSelectedIndex((this._selectedIndex+1)%this.subItems.length);cc.MenuItem.prototype.activate.call(this)},selected:function(){cc.MenuItem.prototype.selected.call(this);this.subItems[this._selectedIndex].selected()},unselected:function(){cc.MenuItem.prototype.unselected.call(this);
this.subItems[this._selectedIndex].unselected()},setEnabled:function(a){if(this._enabled!=a){cc.MenuItem.prototype.setEnabled.call(this,a);var b=this.subItems;if(b&&b.length>0)for(var c=0;c<b.length;c++)b[c].enabled=a}},selectedItem:function(){return this.subItems[this._selectedIndex]},onEnter:function(){cc.Node.prototype.onEnter.call(this);this.setSelectedIndex(this._selectedIndex)}});_p=cc.MenuItemToggle.prototype;cc.defineGetterSetter(_p,"selectedIndex",_p.getSelectedIndex,_p.setSelectedIndex);
cc.MenuItemToggle.create=function(){arguments.length>0&&arguments[arguments.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");var a=new cc.MenuItemToggle;a.initWithItems(Array.prototype.slice.apply(arguments));return a};cc.MENU_STATE_WAITING=0;cc.MENU_STATE_TRACKING_TOUCH=1;cc.MENU_HANDLER_PRIORITY=-128;cc.DEFAULT_PADDING=5;
cc.Menu=cc.Layer.extend({enabled:false,_selectedItem:null,_state:-1,_touchListener:null,_className:"Menu",ctor:function(a){cc.Layer.prototype.ctor.call(this);this._color=cc.color.WHITE;this.enabled=false;this._opacity=255;this._selectedItem=null;this._state=-1;this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:true,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded,onTouchCancelled:this._onTouchCancelled});
arguments.length>0&&arguments[arguments.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");var b=arguments.length,c;if(b==0)c=[];else if(b==1)c=a instanceof Array?a:[a];else if(b>1){c=[];for(var d=0;d<b;d++)arguments[d]&&c.push(arguments[d])}this.initWithArray(c)},onEnter:function(){var a=this._touchListener;a._isRegistered()||cc.eventManager.addListener(a,this);cc.Node.prototype.onEnter.call(this)},isEnabled:function(){return this.enabled},setEnabled:function(a){this.enabled=
a},initWithItems:function(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c]&&b.push(a[c]);return this.initWithArray(b)},initWithArray:function(a){if(cc.Layer.prototype.init.call(this)){this.enabled=true;var b=cc.winSize;this.setPosition(b.width/2,b.height/2);this.setContentSize(b);this.setAnchorPoint(0.5,0.5);this.ignoreAnchorPointForPosition(true);if(a)for(b=0;b<a.length;b++)this.addChild(a[b],b);this._selectedItem=null;this._state=cc.MENU_STATE_WAITING;return this.cascadeOpacity=this.cascadeColor=
true}return false},addChild:function(a,b,c){if(!(a instanceof cc.MenuItem))throw"cc.Menu.addChild() : Menu only supports MenuItem objects as children";cc.Layer.prototype.addChild.call(this,a,b,c)},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(a){var b=-a,c=this._children,d,e,f,g;if(c&&c.length>0){e=0;for(d=c.length;e<d;e++)b+=c[e].height*c[e].scaleY+a;var h=b/2;e=0;for(d=c.length;e<d;e++){g=c[e];f=g.height;b=g.scaleY;
g.setPosition(0,h-f*b/2);h-=f*b+a}}},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(a){var b=-a,c=this._children,d,e,f,g;if(c&&c.length>0){d=0;for(e=c.length;d<e;d++)b+=c[d].width*c[d].scaleX+a;var h=-b/2;d=0;for(e=c.length;d<e;d++){g=c[d];b=g.scaleX;f=c[d].width;g.setPosition(h+f*b/2,0);h+=f*b+a}}},alignItemsInColumns:function(){arguments.length>0&&arguments[arguments.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");
for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c=-5,d=0,e=0,f=0,g,h,j,k=this._children;if(k&&k.length>0){b=0;for(j=k.length;b<j;b++)if(!(d>=a.length))if(g=a[d]){h=k[b].height;e=e>=h||isNaN(h)?e:h;++f;if(f>=g){c+=e+5;e=f=0;++d}}}var m=cc.director.getWinSize();var n=g=e=d=0,o=0;c=c/2;if(k&&k.length>0){b=0;for(j=k.length;b<j;b++){var r=k[b];if(g==0){g=a[d];o=n=m.width/(1+g)}h=r._getHeight();e=e>=h||isNaN(h)?e:h;r.setPosition(o-m.width/2,c-h/2);o+=n;++f;if(f>=g){c-=e+5;e=g=f=0;++d}}}},
alignItemsInRows:function(){arguments.length>0&&arguments[arguments.length-1]==null&&cc.log("parameters should not be ending with null in Javascript");var a=[],b;for(b=0;b<arguments.length;b++)a.push(arguments[b]);var c=[],d=[],e=-10,f=-5,g=0,h=0,j=0,k,m,n,o,r=this._children;if(r&&r.length>0){b=0;for(n=r.length;b<n;b++){m=r[b];if(!(g>=a.length))if(k=a[g]){o=m.width;h=h>=o||isNaN(o)?h:o;f+=m.height+5;++j;if(j>=k){c.push(h);d.push(f);e+=h+10;h=j=0;f=-5;++g}}}}f=cc.director.getWinSize();k=h=g=0;e=-e/
2;var q=0;if(r&&r.length>0){b=0;for(n=r.length;b<n;b++){m=r[b];if(k==0){k=a[g];q=d[g]}o=m._getWidth();h=h>=o||isNaN(o)?h:o;m.setPosition(e+c[g]/2,q-f.height/2);q-=m.height+10;++j;if(j>=k){e+=h+5;h=k=j=0;++g}}}},removeChild:function(a,b){if(a!=null)if(a instanceof cc.MenuItem){if(this._selectedItem==a)this._selectedItem=null;cc.Node.prototype.removeChild.call(this,a,b)}else cc.log("cc.Menu.removeChild():Menu only supports MenuItem objects as children")},_onTouchBegan:function(a,b){b=b.getCurrentTarget();
if(b._state!=cc.MENU_STATE_WAITING||!b._visible||!b.enabled)return false;for(var c=b.parent;c!=null;c=c.parent)if(!c.isVisible())return false;b._selectedItem=b._itemForTouch(a);if(b._selectedItem){b._state=cc.MENU_STATE_TRACKING_TOUCH;b._selectedItem.selected();return true}return false},_onTouchEnded:function(a,b){a=b.getCurrentTarget();if(a._state!==cc.MENU_STATE_TRACKING_TOUCH)cc.log("cc.Menu.onTouchEnded(): invalid state");else{if(a._selectedItem){a._selectedItem.unselected();a._selectedItem.activate()}a._state=
cc.MENU_STATE_WAITING}},_onTouchCancelled:function(a,b){a=b.getCurrentTarget();if(a._state!==cc.MENU_STATE_TRACKING_TOUCH)cc.log("cc.Menu.onTouchCancelled(): invalid state");else{this._selectedItem&&a._selectedItem.unselected();a._state=cc.MENU_STATE_WAITING}},_onTouchMoved:function(a,b){b=b.getCurrentTarget();if(b._state!==cc.MENU_STATE_TRACKING_TOUCH)cc.log("cc.Menu.onTouchMoved(): invalid state");else{a=b._itemForTouch(a);if(a!=b._selectedItem){b._selectedItem&&b._selectedItem.unselected();b._selectedItem=
a;b._selectedItem&&b._selectedItem.selected()}}},onExit:function(){if(this._state==cc.MENU_STATE_TRACKING_TOUCH){if(this._selectedItem){this._selectedItem.unselected();this._selectedItem=null}this._state=cc.MENU_STATE_WAITING}cc.Node.prototype.onExit.call(this)},setOpacityModifyRGB:function(){},isOpacityModifyRGB:function(){return false},_itemForTouch:function(a){a=a.getLocation();var b=this._children,c;if(b&&b.length>0)for(var d=b.length-1;d>=0;d--){c=b[d];if(c.isVisible()&&c.isEnabled()){var e=
c.convertToNodeSpace(a),f=c.rect();f.x=0;f.y=0;if(cc.rectContainsPoint(f,e))return c}}return null}});_p=cc.Menu.prototype;cc.Menu.create=function(a){var b=arguments.length;b>0&&arguments[b-1]==null&&cc.log("parameters should not be ending with null in Javascript");return b==0?new cc.Menu:b==1?new cc.Menu(a):new cc.Menu(Array.prototype.slice.call(arguments,0))};function setMenuEnabled(a){for(var b=0;b<a.getChildrenCount();++b)a.children[b].setColor(cc.color(255,255,255,255));a.setEnabled(true)}function setItemDisEnabled(a){var b=a.getParent();a.setColor(cc.color(128,128,128,32));b.setEnabled(false)}function HeartBeat(a,b,c,d,e){var f=cc.delayTime(c);c=f.clone();f=cc.sequence(f,cc.callFunc(function(g){g.setScale(b)}));c=cc.sequence(c,cc.callFunc(function(g){g.setScale(a)}));c=cc.sequence(f,c);d!=0?e.runAction(c.repeat(d)):e.runAction(c.repeatForever())}
function StartGame_Callback(){GameService.startGame();cc.director.runScene(new GameScene)}
function GameOver_Callback(a){g_bSubPhone=a;if(g_iMile<1E3)AddPopup(g_popupWay.GameOver);else{if(g_bSubPhone=="0"){$("#mile").html(Math.floor(g_iMile));if(g_iMile<3E3){$("#img_results_1_2").css("display","block");$("#img_results_1_1").css("display","none");$("#mile").css("display","block");$("#moneynum").css("display","none");$("#moneynum1").html(g_iMoney);$("#moneynum1").css("display","block")}else{$("#mile").css("display","none");$("#img_results_1_1").css("display","block");$("#img_results_1_2").css("display",
"none");$("#moneynum").html(g_iMoney);$("#moneynum").css("display","block");$("#moneynum1").css("display","none")}$("#tjxx").css("display","block")}else{$("#mile2").html(Math.floor(g_iMile));if(g_iMile<3E3){$("#img_results_2_2").css("display","block");$("#img_results_2_1").css("display","none");$("#mile2").css("display","block");$("#moneynum2").html(g_iMoney);$("#moneynum2").css("display","block");$("#moneynum2_2").css("display","none")}else{$("#mile2").css("display","none");$("#img_results_2_1").css("display",
"block");$("#img_results_2_2").css("display","none");$("#moneynum2").css("display","none");$("#moneynum2_2").html(g_iMoney);$("#moneynum2_2").css("display","block")}$("#tjcg").css("display","block")}$("#Cocos2dGameContainer").css("display","none")}}
function SubSuccess(a){var b=$("#tip"),c=$("#btn_submit");if(a=="repeat"){b.html("\u624b\u673a\u53f7\u5df2\u63d0\u4ea4\uff01");c.css("display","block")}else if(a=="false"){b.html("\u7f51\u7edc\u5f02\u5e38\uff01");c.css("display","block")}else{$("#tjxx").css("display","none");g_bSubPhone=a;AddPopup(g_popupWay.SubSuccess)}}
function AddPopup(a){var b=new CPopupLayer;b.Init(a);cc.director.getRunningScene().getChildByTag(1).addChild(b,g_zOrderTag.popup,2);$("#Cocos2dGameContainer").css("display","block")}function setName(a){$("#img_name").css("display",a);$("#img_phone").css("display",a);$("#name").css("display",a);$("#phone").css("display",a)};var preRes={loadBgLogo_png:"preRes/bg_index.jpg",loadProcessUp_png:"preRes/loadProcessUp.png",loadProcessDown_png:"preRes/loadProcessDown.png"},g_preRes=[];for(var i in preRes)g_preRes.push(preRes[i]);
var res={bg_index_jpg:"res/bg_index.jpg",caption_png:"res/caption.png",bg_rules_jpg:"res/BG_rules.jpg",bg_main_jpg:"res/bg_main.jpg",bg_playing_jpg:"res/bg_playing.png",bg_mp3:"res/audio/bg.mp3",btn_start_png:"res/btn_start.png",btn_focus_png:"res/btn_focus.png",btn_replay_png:"res/btn_replay.png",btn_rule_png:"res/btn_rule.png",btn_share_png:"res/btn_share.png",btn_return_png:"res/btn_return.png",caption_result_png:"res/caption_result.png",caption_subSuccess_png:"res/caption_subSuccess.png",mile_png:"res/mile.png",
processBarDown_png:"res/processBarDown.png",processBarUp_png:"res/processBarUp.png",title_hand_png:"res/title_hand.png",leg1_png:"res/leg1.png",leg2_png:"res/leg2.png",leg3_png:"res/leg3.png",player_plist:"res/player.plist",player_png:"res/player.png",popup_png:"res/popup.png",title_plist:"res/title.plist",title_png:"res/title.png",guide_png:"res/share.png",grass_png:"res/grass.png",sign_png:"res/sign.png",hand_png:"res/title_hand.png",building1_png:"res/building1.png",building2_png:"res/building2.png",
building3_png:"res/building3.png",building4_png:"res/building4.png",building5_png:"res/building5.png",building6_png:"res/building6.png",billboard1_png:"res/1.png",billboard2_png:"res/2.png",billboard3_png:"res/3.png",billboard4_png:"res/4.png",billboard5_png:"res/5.png",billboard6_png:"res/6.png",billboard7_png:"res/7.png",billboard8_png:"res/8.png"},g_resources=[];for(i in res)g_resources.push(res[i]);if(typeof g_GameStatusTag=="undefined")var g_GameStatusTag={Ready:0,Playing:1,Over:2};
var g_GameStatus=g_GameStatusTag.Ready,g_iMile=0,g_iMoney=0,g_iPercent=0,g_iTimeProcessBar=0.5,g_iDelta=1/g_iTimeProcessBar*100,g_iMostTime=15,g_iMostDistance=5E3,g_iDistance=2E3,g_iMilePerSec=g_iMostDistance/g_iMostTime,g_iLimitPercent=90,g_arrBuilding=[res.building1_png,res.building2_png,res.building3_png,res.building4_png,res.building5_png,res.building6_png],g_iCurID=0,g_iMilePer=g_iMostDistance/g_arrBuilding.length,g_arrBillboard=[res.billboard1_png,res.billboard2_png,res.billboard3_png,res.billboard4_png,
res.billboard5_png,res.billboard6_png,res.billboard7_png,res.billboard8_png];var CGuide=cc.Sprite.extend({callback:null,Init:function(a,b){this.setPosition(cc.winSize.width*0.5,cc.winSize.height*0.5);b==undefined?this.addTouch():this.addMenu(b);a!=0&&a!=undefined&&this.Enter(a)},addMenu:function(a){var b=new cc.Menu;b.setPosition(cc.p(0,0));this.addChild(b,1,1);var c=new cc.MenuItemImage(a[0],null,this.onSelected,this);c.setPosition(a[1]);b.addChild(c)},addTouch:function(){var a=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:true,onTouchBegan:this.onTouchBegan,
onTouchEnded:this.onTouchEnded});cc.eventManager.addListener(a,this)},onTouchBegan:function(a,b){b=b.getCurrentTarget();var c=b.getContentSize();c=cc.rect(0,0,c.width,c.height);a=b.convertToNodeSpace(a.getLocation());return cc.rectContainsPoint(c,a)},onTouchEnded:function(a,b){b.getCurrentTarget().onSelected()},onSelected:function(){this.callback!=null?this.callback(this):this.removeSelf()},SetCallback:function(a){this.callback=a==undefined?null:a},removeSelf:function(a){a!=0&&a!=undefined?this.Exit(a):
this.removeFromParent(true)},Enter:function(a){this.setOpacity(0);this.runAction(cc.fadeIn(a))},Exit:function(a){this.setOpacity(255);a=cc.fadeOut(a);this.runAction(cc.sequence(a,cc.callFunc(function(b){b.removeFromParent(true)})))}});if(typeof g_way=="undefined")var g_way={Scale:0,VisibleRect:1};if(typeof g_direction=="undefined")var g_direction={H_LeftToRight:0,H_RightToLeft:1,V_BottomToTop:2,V_TopToBottom:3};
var g_iniProcessBar=[[cc.p(0,0.5),cc.p(0,1),cc.p(0,0.5)],[cc.p(1,0.5),cc.p(0,1),cc.p(1,0.5)],[cc.p(0.5,0),cc.p(1,0),cc.p(0.5,0)],[cc.p(0.5,1),cc.p(1,0),cc.p(0.5,1)]],g_anchorID=0,g_scaleID=1,g_posID=2,CProcessBar=cc.Node.extend({way:g_way.Scale,direction:g_direction.H_LeftToRight,processBarUp:null,preSize:cc.size(0,0),preRect:cc.rect(0,0,0,0),percent:0,bCallback:false,callback:null,offsetPos:cc.p(0,0),deltaPerPercent:0,Init:function(a,b,c,d,e){this.direction=b;this.way=a;a=new cc.Sprite(c);this.addChild(a,
1,1);b=a.getContentSize();this.processBarUp=d=new cc.Sprite(d);a.addChild(d,1,1);this.preSize=d.getContentSize();this.preRect=cc.rect(0,0,0,0);d.attr({anchorX:g_iniProcessBar[this.direction][g_anchorID].x,anchorY:g_iniProcessBar[this.direction][g_anchorID].y,x:b.width*(g_iniProcessBar[this.direction][g_posID].x+0.013),y:b.height*g_iniProcessBar[this.direction][g_posID].y});this.way==g_way.Scale?d.setScale(g_iniProcessBar[this.direction][g_scaleID].x,g_iniProcessBar[this.direction][g_scaleID].y):d.setTextureRect(this.preRect);
if(e==undefined)this.percent=0;else{this.percent=e;this.updateProcess()}},setCallback:function(a){if(a==undefined)this.bCallback=false;else{this.bCallback=true;this.callback=a}},setOffsetPos:function(a){this.offsetPos=a==undefined?cc.p(0,0):a;this.processBarUp.setPosition(cc.pAdd(this.processBarUp.getPosition(),this.offsetPos))},getPercent:function(){return this.percent},setPercent:function(a){this.percent=a;if(this.percent>=100)this.percent=100;else if(this.percent<=0)this.percent=0;this.updateProcess();
if(this.percent==0||this.percent==100)this.Over()},Over:function(){this.bCallback&&this.callback(this)},updateProcess:function(){if(this.way==g_way.Scale)this.direction>=2?this.processBarUp.setScaleY(0.01*this.percent*this.getScaleY()):this.processBarUp.setScaleX(0.01*this.percent*this.getScaleX());else{if(this.direction==g_direction.H_LeftToRight){this.preRect.x=this.preSize.width*this.percent*0.01*0;this.preRect.y=0;this.preRect.width=this.preSize.width*this.percent*0.01;this.preRect.height=this.preSize.height;
this.processBarUp.x=0}else if(this.direction==g_direction.H_RightToLeft){this.preRect.x=this.preSize.width*this.percent*0.01*1;this.preRect.y=0;this.preRect.width=this.preSize.width;this.preRect.height=this.preSize.height;this.processBarUp.x=this.preSize.width*(this.percent*0.01+1)}else if(this.direction==g_direction.V_TopToBottom){this.preRect.x=0;this.preRect.y=0;this.preRect.width=this.preSize.width;this.preRect.height=this.preSize.height*(1-this.percent*0.01);this.processBarUp.y=this.preSize.height}else if(this.direction==
g_direction.V_BottomToTop){this.preRect.x=0;this.preRect.y=this.preSize.height*(1-this.percent*0.01);this.preRect.width=this.preSize.width;this.preRect.height=this.preSize.height;this.processBarUp.y=this.preSize.height*(this.percent*0.01-1)}this.processBarUp.setTextureRect(this.preRect)}}});var CRuleSprite=cc.Sprite.extend({callback:null,posYLimit:0,Init:function(a,b){this.initBg();this.addMenu(a,b);this.enterEffect()},SetCallback:function(a){this.callback=a==undefined?null:a},initBg:function(){this.attr({anchorX:0,anchorY:1,x:0,y:cc.winSize.height});this.addListener();this.posYLimit=this.getContentSize().height},addMenu:function(a,b){var c=new cc.Menu;c.setPosition(cc.p(0,0));this.addChild(c,1,1);var d=this.getContentSize();a=new cc.MenuItemImage(a,null,this.onReturn,this);a.setPosition(b==
undefined?cc.p(d.width*0.9,d.height*0.78):b);a.setScale(1,cc.view.getScaleX()/cc.view.getScaleY());c.addChild(a,1)},addListener:function(){var a=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:true,onTouchBegan:this.onTouchBegan,onTouchMoved:this.onTouchMoved});cc.eventManager.addListener(a,this)},onTouchBegan:function(a,b){b=b.getCurrentTarget();var c=b.getContentSize();c=cc.rect(0,0,c.width,c.height);a=b.convertToNodeSpace(a.getLocation());return cc.rectContainsPoint(c,
a)},onTouchMoved:function(a,b){b.getCurrentTarget().moveByHand(a.getDelta())},moveByHand:function(a){a=this.getPositionY()+a.y;if(a<=cc.winSize.height)a=cc.winSize.height;else if(a>=this.posYLimit)a=this.posYLimit;this.setPositionY(a)},onReturn:function(){this.callback!=null?this.callback(this):this.removeFromParent(true)},enterEffect:function(){var a=this.getChildByTag(1).children[0];this.setOpacity(0);a.setOpacity(0);var b=cc.fadeIn(0.5);this.runAction(b);a.runAction(b.clone())}});if(typeof g_popupWay=="undefined")var g_popupWay={undefined:0,GameOver:1,SubSuccess:2};
var CPopupLayer=cc.LayerColor.extend({way:g_popupWay.undefined,Init:function(a){cc.spriteFrameCache.addSpriteFrames(res.title_plist,res.title_png);this.way=a;if(a==g_popupWay.GameOver||a==g_popupWay.SubSuccess){this.setBgColor();this.addPopup(a);this.addMenu()}},addPopup:function(a){var b=new cc.Sprite(res.popup_png);b.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.65});this.addChild(b,1,1);this.addCaption(b);a==g_popupWay.GameOver?this.addMsg_GameOver(b):this.addMsg_SubSuccess(b)},addCaption:function(a){var b=
new cc.Sprite(this.way==g_popupWay.GameOver?res.caption_result_png:res.caption_subSuccess_png);b.attr({x:a.getContentSize().width*0.5,y:a.getContentSize().height*0.92});a.addChild(b,1,1)},addMsg_GameOver:function(a){var b="";b=cc.p(0.53,0.5);var c=cc.p(0.17,0.39);if(g_iMile<10)b="#end_1.png";else if(g_iMile<100){b=cc.p(0.52,0.495);c=cc.p(0.17,0.39);this.addLabel(b,c,a);b="#end_2.png"}else if(g_iMile<500){b=cc.p(0.505,0.45);c=cc.p(0.15,0.34);this.addLabel(b,c,a);b="#end_3.png"}else{b=cc.p(0.48,0.45);
c=cc.p(0.1,0.34);this.addLabel(b,c,a);b="#end_4.png"}b=new cc.Sprite(b);b.attr({x:a.getContentSize().width*0.5,y:a.getContentSize().height*0.5});a.addChild(b,1,1)},addMsg_SubSuccess:function(a){var b=new cc.Sprite("#title_subSuccess.png");b.attr({x:a.getContentSize().width*0.5,y:a.getContentSize().height*0.5});a.addChild(b,1,1)},addMenu:function(){var a=new cc.Menu;a.setPosition(0,0);this.addChild(a,1,2);var b=new cc.MenuItemImage(res.btn_replay_png,null,this.onReplay,this);b.attr({x:cc.winSize.width*
0.2,y:cc.winSize.height*0.25});var c=new cc.MenuItemImage(res.btn_share_png,null,this.onShare,this);c.attr({x:cc.winSize.width*0.8,y:cc.winSize.height*0.25});var d=new cc.MenuItemImage(res.btn_focus_png,null,this.onFocus,this);d.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.1});a.addChild(b);a.addChild(c);a.addChild(d)},addLabel:function(a,b,c){var d=new cc.LabelTTF("","\u5fae\u8f6f\u96c5\u9ed1",30);d.attr({x:c.getContentSize().width*a.x,y:c.getContentSize().height*a.y,color:cc.color(88,49,13)});
c.addChild(d,1,6);d.setString(Math.floor(g_iMile));a=new cc.LabelTTF("","\u5fae\u8f6f\u96c5\u9ed1",30);a.attr({x:c.getContentSize().width*b.x,y:c.getContentSize().height*b.y,color:cc.color(88,49,13)});c.addChild(a,1,7);a.setString(g_iMoney)},setBgColor:function(){this.setOpacity(128);this.setColor(cc.color(0,0,0))},resetBgColor:function(){this.setOpacity(255);this.setColor(cc.color(255,255,255))},onShare:function(a){setItemDisEnabled(a);a=new CGuide(res.guide_png);a.Init(0.5);this.addChild(a,10,10);
a.SetCallback(this.callback_share)},callback_share:function(a){var b=a.getParent().getChildByTag(2);setMenuEnabled(b);a.removeSelf(0.5)},onReplay:function(a){setItemDisEnabled(a);Replay()},onFocus:function(a){setItemDisEnabled(a);Focus()}});var MyLoaderScene=cc.Scene.extend({_length:0,_count:0,bgLayer:null,onEnter:function(){cc.Node.prototype.onEnter.call(this)},onExit:function(){cc.Node.prototype.onExit.call(this)},init:function(){this.initLayer();this.initBg();this.initProcessBar();this.startLoading();return true},initLayer:function(){var a=cc.LayerColor.create(cc.color(255,255,255));a.setPosition(cc.visibleRect.bottomLeft);this.addChild(a,0);this.bgLayer=a},initBg:function(){var a=new cc.Sprite(preRes.loadBgLogo_png);a.attr({x:cc.winSize.width/
2,y:cc.winSize.height/2});this.bgLayer.addChild(a,1)},initProcessBar:function(){var a=new cc.Sprite(preRes.loadProcessDown_png);a.attr({x:cc.winSize.width/2,y:cc.winSize.height/2});this.bgLayer.addChild(a,10);var b=a.getContentSize();this.ProcessBarUp=new cc.Sprite(preRes.loadProcessUp_png);this.ProcessBarUp.attr({anchorX:0,anchorY:0.5,x:2,y:b.height*0.5,scaleX:0,scaleY:1});a.addChild(this.ProcessBarUp,11)},initWithResources:function(a,b){if(typeof a=="string")a=[a];this.resources=a||[];this._length=
this.resources.length;this.cb=b},preLoading:function(a,b,c){var d=this;if(typeof a=="string")a=[a];cc.loader.load(a,function(){d.initWithResources(b,c);d.init()})},startLoading:function(){var a=this,b=a.resources;a._count=0;cc.loader.load(b,function(){a._count++;a.updatePercent()},function(){a.ProcessBarUp.setScaleX(1);a.cb&&a.cb()})},updatePercent:function(){var a=this._count/this._length*100|0;a=Math.min(a,100);this.ProcessBarUp.setScaleX(a*0.01)}});
MyLoaderScene.preLoad=function(a,b,c){var d=new MyLoaderScene;d.preLoading(a,b,c);cc.director.runScene(d);return d};var IndexScene=cc.Scene.extend({onEnter:function(){this._super();this.addChild(new IndexLayer,1,1)}}),IndexLayer=cc.Layer.extend({ctor:function(){this._super();this.init()},init:function(){g_GameStatus=g_GameStatusTag.Ready;this.initBg();this.addMenu()},initBg:function(){var a=new cc.Sprite(res.bg_index_jpg);a.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.5});this.addChild(a,1,1);var b=new cc.Sprite(res.caption_png);b.attr({x:a.getContentSize().width*0.455,y:a.getContentSize().height*0.73});
a.addChild(b,1,1);HeartBeat(1,1.1,0.5,0,b)},addMenu:function(){var a=new cc.Menu;a.setPosition(cc.p(0,0));this.addChild(a,1,2);var b=new cc.MenuItemImage(res.btn_start_png,null,this.onStart,this);b.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.5});var c=new cc.MenuItemImage(res.btn_rule_png,null,this.onRule,this);c.attr({x:cc.winSize.width*0.2,y:cc.winSize.height*0.1});a.addChild(b,1,1);a.addChild(c,1,2)},onStart:function(a){setItemDisEnabled(a);StartGame()},onRule:function(a){setItemDisEnabled(a);
a=new CRuleSprite(res.bg_rules_jpg);a.Init(res.btn_return_png,cc.p(cc.winSize.width*0.5,cc.winSize.height*0.05));a.SetCallback(this.callback_Rule);this.addChild(a,10,10)},callback_Rule:function(a){var b=a.getChildByTag(1).children[0],c=cc.fadeOut(0.5),d=cc.sequence(c,cc.callFunc(function(e){var f=e.getParent().getChildByTag(2);setMenuEnabled(f);e.removeFromParent(true)}));b.runAction(c.clone());a.runAction(d)}});if(typeof g_zOrderTag=="undefined")var g_zOrderTag={staticBg:0,dynamicBg:1,building:2,grass:3,player:4,status:5,popup:10};
var GameLayer=cc.LayerColor.extend({bChange:false,bUpdate:false,arrBuild:[],createBuildingPerMile:0,curCenterShip:0,billboard:null,mile:0,bShow:0,ctor:function(){this._super(cc.color(255,255,255));this.init()},init:function(){cc.audioEngine.playMusic(res.bg_mp3,true);g_iCurID=-1;g_GameStatus=g_GameStatusTag.Playing;cc.spriteFrameCache.addSpriteFrames(res.player_plist,res.player_png);this.initBg();this.createBuilding();this.addLeg();this.addBillboard();this.addPlayer()},initBg:function(){var a=new cc.Sprite(res.bg_main_jpg);
a.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.5});this.addChild(a,g_zOrderTag.staticBg);a=new cc.Sprite(res.bg_playing_jpg);a.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.55});this.addChild(a,g_zOrderTag.dynamicBg,1);a=new cc.Sprite(res.grass_png);a.attr({x:cc.winSize.width*0.5,y:cc.winSize.height*0.15});this.addChild(a,g_zOrderTag.grass,7);this.addBg();this.addGrass()},addBg:function(){var a=new cc.Sprite(res.bg_playing_jpg);a.attr({x:cc.winSize.width*1.5,y:cc.winSize.height*0.55});
this.addChild(a,g_zOrderTag.dynamicBg,2)},addGrass:function(){var a=new cc.Sprite(res.grass_png);a.attr({x:cc.winSize.width*1.5,y:cc.winSize.height*0.15});this.addChild(a,g_zOrderTag.grass,8)},addLeg:function(){var a=res.leg1_png.substring(0,res.leg1_png.length-5);a+=Math.ceil(Math.random()*3)+".png";a=new cc.Sprite(a);a.attr({anchorX:0,anchorY:1,x:-30,y:cc.winSize.height*0.7});this.addChild(a,g_zOrderTag.player,3)},addPlayer:function(){var a=this,b=new cc.Sprite("#run_8.png");b.attr({x:cc.winSize.width*
1.2,y:cc.winSize.height*0.3});a.addChild(b,g_zOrderTag.player,4);for(var c=new cc.Animation,d=1;d<=8;++d){var e=cc.spriteFrameCache.getSpriteFrame("run_"+d+".png");c.addSpriteFrame(e)}c.setDelayPerUnit(0.125);c.setRestoreOriginalFrame(true);c=cc.animate(c);d=cc.moveTo(1,cc.p(cc.winSize.width*0.46,cc.winSize.height*0.3));c=cc.spawn(c,d);c=cc.sequence(c,cc.callFunc(function(){a.addTouch();a.bChange=true;a.addHand();a.addProcessBar();a.scheduleUpdate()}));b.runAction(c)},addProcessBar:function(){var a=
new CProcessBar;a.Init(g_way.Scale,g_direction.V_BottomToTop,res.processBarUp_png,res.processBarDown_png,0);a.setOffsetPos(cc.p(16,0));a.setCallback(this.isOver);a.attr({x:cc.winSize.width*0.9,y:cc.winSize.height*0.3});this.addChild(a,g_zOrderTag.status,5)},isOver:function(a){var b=a.getParent();if(b.bChange){g_iPercent=1;a.setPercent(1)}else{g_iPercent=0;a.setPercent(0.01);b.bUpdate=false;b.unscheduleUpdate()}},createBuilding:function(){g_iCurID++;var a=new cc.Sprite(g_arrBuilding[g_iCurID]);a.attr({x:cc.winSize.width+
a.getContentSize().width*0.5,y:cc.winSize.height*0.3});this.addChild(a,g_zOrderTag.building,11);this.arrBuild.push(a)},addMile:function(){var a=this;a.bChange=false;a.unscheduleUpdate();a.getChildByTag(10).removeFromParent(true);var b=new cc.Sprite(res.mile_png);b.attr({x:cc.winSize.width*0.8,y:cc.winSize.height*0.93});a.addChild(b,g_zOrderTag.status,6);var c=new cc.LabelTTF("","\u5fae\u8f6f\u96c5\u9ed1",30);c.attr({x:b.getContentSize().width*0.55,y:b.getContentSize().height*0.5});b.addChild(c,1,
1);c.setString(g_iMile);b=a.getChildByTag(4);c=cc.rotateTo(1,1080);var d=cc.moveTo(1,cc.p(cc.winSize.width*0.9,cc.winSize.height*0.75));c=cc.spawn(c,d);g_iMilePerSec=g_iPercent<=g_iLimitPercent?g_iDistance/g_iMostTime:(g_iDistance*g_iLimitPercent*0.01+(g_iMostDistance-g_iDistance*g_iLimitPercent*0.01)*(g_iPercent-g_iLimitPercent)*0.1)/g_iMostTime;var e=g_iPercent;d=cc.moveTo(e*0.01*g_iMostTime*0.8,cc.p(cc.winSize.width*0.3,cc.winSize.height*0.75));e=cc.moveTo(e*0.01*g_iMostTime*0.2,cc.p(cc.winSize.width*
0.5,cc.winSize.height*0.15));c=cc.sequence(c,cc.callFunc(function(f){a.Fly(f)}),d,e,cc.callFunc(function(f){a.Drop(f)}));b.runAction(c);b=a.getChildByTag(3);c=cc.rotateTo(0.1,-10);d=cc.rotateTo(0.1,0);c=cc.sequence(c,d);b.runAction(c)},Fly:function(a){this.bUpdate=true;this.scheduleUpdate();for(var b=new cc.Animation,c=1;c<=2;++c){var d=cc.spriteFrameCache.getSpriteFrame("fly_"+c+".png");b.addSpriteFrame(d)}b.setDelayPerUnit(1/6);b.setRestoreOriginalFrame(true);b=cc.animate(b);a.runAction(b.repeatForever())},
Drop:function(a){this.addSign();this.bUpdate=false;this.unscheduleUpdate();a.stopAllActions();for(var b=g_iMile>=100?"jump_":"cry_",c=new cc.Animation,d=1;d<=2;++d){var e=cc.spriteFrameCache.getSpriteFrame(b+d+".png");c.addSpriteFrame(e)}c.setDelayPerUnit(1/6);c.setRestoreOriginalFrame(true);b=cc.animate(c);a.runAction(b.repeatForever())},addSign:function(){var a=this,b=new cc.Sprite(res.sign_png);b.attr({x:cc.winSize.width*0.75,y:cc.winSize.height*0.2});a.addChild(b,g_zOrderTag.player,9);var c=new cc.LabelTTF("",
"\u5fae\u8f6f\u96c5\u9ed1",30);c.attr({x:b.getContentSize().width*0.425,y:b.getContentSize().height*0.525,color:cc.color(0,0,0)});b.addChild(c,1,1);c.setString(Math.floor(g_iMile));c=cc.delayTime(1);c=cc.sequence(c,cc.callFunc(function(){a.GameOver()}));b.runAction(c)},addBillboard:function(){this.curCenterShip=-1;var a=new cc.Sprite(g_arrBillboard[0]);a.attr({anchorX:0.5,anchorY:0,x:cc.winSize.width*0.5,y:0,visible:false,rotation:90});this.addChild(a,g_zOrderTag.grass);this.billboard=a},changeBillboard:function(){if(!(this.curCenterShip>=
7)){this.curCenterShip++;this.billboard.setTexture(cc.textureCache.addImage(g_arrBillboard[this.curCenterShip]));this.billboardShow()}},billboardShow:function(){this.billboard.stopAllActions();this.billboard.setVisible(true);this.billboard.setRotation(90);this.billboard.runAction(cc.rotateTo(0.3,0))},billboardHide:function(){var a=this;a.billboard.stopAllActions();a.billboard.setRotation(0);var b=cc.rotateTo(0.3,-90);b=cc.sequence(b,cc.callFunc(function(){a.billboard.setVisible(false)}));a.billboard.runAction(b)},
addHand:function(){var a=new cc.Sprite(res.hand_png);a.attr({x:cc.winSize.width*0.35,y:cc.winSize.height*0.05});this.addChild(a,g_zOrderTag.player,10)},addTouch:function(a){var b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:true,onTouchBegan:this.onTouchBegan,onTouchEnded:this.onTouchEnded});cc.eventManager.addListener(b,a==undefined?this:a)},onTouchBegan:function(a,b){b=b.getCurrentTarget();var c=b.getContentSize();c=cc.rect(0,0,c.width,c.height);a=b.convertToNodeSpace(a.getLocation());
return g_GameStatus==g_GameStatusTag.Playing&&cc.rectContainsPoint(c,a)},onTouchEnded:function(a,b){a=b.getCurrentTarget();g_GameStatus=g_GameStatusTag.GameOver;a.addMile()},update:function(a){var b=this.getChildByTag(5);g_iPercent=b.getPercent()+a*(this.bChange?g_iDelta:-1/g_iMostTime*100);if(g_iPercent>100)g_iPercent=100;else if(g_iPercent<0)g_iPercent=0;b.setPercent(g_iPercent);if(this.bUpdate){a=g_iMilePerSec*a;this.createBuildingPerMile+=a;if(this.createBuildingPerMile>g_iMilePer){this.createBuildingPerMile-=
g_iMilePer;this.createBuilding();this.bShow=this.mile=0}this.mile+=a;if(this.bShow==0&&this.billboard!=null&&!this.billboard.isVisible()&&this.mile>g_iMilePer*0.3){this.changeBillboard();this.bShow=1}if(this.bShow==1&&this.billboard!=null&&this.billboard.isVisible()&&this.mile>g_iMilePer*0.7){this.billboardHide();this.bShow=2}this.BgMoving(a*5);this.GrassMoving(a*5);this.legMoving(a*5);this.buildingMoving(a*5);g_iMile+=a;this.getChildByTag(6).getChildByTag(1).setString(Math.floor(g_iMile))}},BgMoving:function(a){var b=
this.getChildByTag(1),c=this.getChildByTag(2);b.setPosition(cc.pSub(b.getPosition(),cc.p(a,0)));c.setPosition(cc.pSub(c.getPosition(),cc.p(a,0)));b.getPosition().x<cc.winSize.width*-0.5&&b.setPosition(cc.pAdd(c.getPosition(),cc.p(640,0)));c.getPosition().x<cc.winSize.width*-0.5&&c.setPosition(cc.pAdd(b.getPosition(),cc.p(640,0)))},GrassMoving:function(a){var b=this.getChildByTag(7),c=this.getChildByTag(8);b.setPosition(cc.pSub(b.getPosition(),cc.p(a,0)));c.setPosition(cc.pSub(c.getPosition(),cc.p(a,
0)));b.getPosition().x<cc.winSize.width*-0.5&&b.setPosition(cc.pAdd(c.getPosition(),cc.p(640,0)));c.getPosition().x<cc.winSize.width*-0.5&&c.setPosition(cc.pAdd(b.getPosition(),cc.p(640,0)))},legMoving:function(a){var b=this.getChildByTag(3);if(b!=null){b.setPosition(cc.pSub(b.getPosition(),cc.p(a,0)));b.getPositionX()<-0.5*b.getContentSize().width&&b.removeFromParent(true)}},buildingMoving:function(a){for(var b=0;b<this.arrBuild.length;++b){var c=cc.pSub(this.arrBuild[b].getPosition(),cc.p(a,0));
this.arrBuild[b].setPosition(c);c.x<this.arrBuild[b].getContentSize().width*0.5*-1&&this.arrBuild[b].removeFromParent(true)}},GameOver:function(){cc.audioEngine.stopMusic(res.bg_mp3);g_iMoney=g_iMile<10?0:g_iMile<100?10:g_iMile<500?50:g_iMile<1E3?100:g_iMile<3E3?500:1E3;this.billboard.stopAllActions();this.billboard.setRotation(0);GameOver(g_iMile)}}),GameScene=cc.Scene.extend({onEnter:function(){this._super();this.addChild(new GameLayer,1,1)}});