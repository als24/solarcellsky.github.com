define("activity/5zhounian/shake/shake",["require","./pixi","./global","./result"],function(require){var t,e,r=require("./pixi"),i=new r.Container,n=require("./global"),o=[],s=n.loader;s.loadImage("fat"),s.loadImage("shakeFatLeft"),s.loadImage("shakeFatRight");var a={totalCount:0,avaliableShake:15,time:{startTime:0,duration:0,isValid:function(){return this.startTime>0},getDuration:function(){return this.duration=((Date.now()-this.startTime)/1e3).toFixed(2),this.duration}}},h=a.time,l={font:"90px Helvetica bold",fill:"#fffc00"},u={font:"60px Helvetica bold",fill:"#ffffff"},c=new r.Text("0.00",l);c.x=229,c.y=212,i.addChild(c);var p=new r.Text("s",u);return p.x=400,p.y=233,i.addChild(p),n.loader.loader.once("complete",function(s,l){function u(e){if(t!==e)o.forEach(function(t){if(t!==e)t.renderable=!1;else t.renderable=!0})}function p(t){var e=Object.keys(n.constants.result),r=h.duration;if(t>n.constants.totalShakeX||r>10)e.forEach(function(t){var e=n.constants.result[t];if(r>e.time.min&&r<e.time.max){var i=require("./result")(r,t);n.stage.loadNewStage(i)}})}function d(t){if(n.stage.currentStage===i){var r=t.accelerationIncludingGravity,o=$.os.iphone?-1:1;if(e=r.x*o,Math.abs(r.x)>a.avaliableShake)if(a.totalCount+=Math.abs(r.x),!h.isValid())h.startTime=Date.now()}}function f(){window.addEventListener("devicemotion",d,!1),i.interactive=!0}var v=new r.Sprite(l.fat.texture);v.position.x=63,v.position.y=339,o.push(v),i.addChild(v);var g=new r.Sprite(l.shakeFatLeft.texture);g.position.x=0,g.position.y=339,i.addChild(g),o.push(g);var m=new r.Sprite(l.shakeFatRight.texture);m.position.x=131,m.position.y=339,o.push(m),i.addChild(m),i.specicAnimate=function(){if(h.isValid())c.text=h.getDuration();if(p(a.totalCount),e>-10)u(g);else if(-10>e)u(m);else u(v);if(!e)u(v)},f(),i.dispose=function(){window.removeEventListener("devicemotion",d),i=null}}),i});