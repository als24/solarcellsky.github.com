<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="yes" name="apple-touch-fullscreen" />
    <meta name="robots" content="none" />
    <meta name="viewport" id="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>朋友圈亲密度测试</title>
    <link rel="stylesheet" type="text/css" href="assets/style.css">
    <style type="text/css">
    body {
        background-image: url(assets/bg.jpg);
        -webkit-background-size: cover;
    }
    
    .title {
        width: 80%;
    }
    
    .compare_wrap .compare_eval {
        font-size: 18px;
    }
    
    .user .avatar_wrap {
        width: 80px;
        height: 80px;
    }
    
    .user .avatar {
        width: 72px;
        height: 72px;
    }
    
    .gamedec .gamedec_btn {
        background-color: #3dcc85;
        color: #fff;
    }
    
    .title {
        width: 80%;
    }
    
    .share_layer {
        width: 60px;
        position: absolute;
        top: 10px;
        right: 20px;
        z-index: 100;
    }
    
    .share_layer img {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        display: none;
    }
    
    .logo {
        left: 20px;
        right: auto;
    }
    
    .ad_banner {
        padding: 0 10px;
        margin-top: 10px;
    }
    
    .ad_banner img {
        width: 100%;
    }
    
    .wrap {
        padding-bottom: 62px;
    }
    
    .wrap {
        padding-bottom: 62px;
    }
    
    .float_a_d {
        position: fixed;
        z-index: 102;
        width: 45px;
        right: 20px;
        top: 280px;
    }
    
    .float_a_d img {
        width: 100%;
    }
    
    .a_d {
        position: fixed;
        bottom: 0;
        z-index: 100;
        width: 100%;
        height: 50px;
        background: rgba(0, 0, 0, .8);
    }
    
    .a_d_box {
        overflow: hidden;
    }
    
    .a_d_pic {
        width: 28px;
        height: auto;
        float: left;
        margin-top: 8px;
        margin-left: 10px;
    }
    
    .a_d_link {
        float: right;
        color: #fff;
        padding: 0 14px;
        line-height: 26px;
        text-align: center;
        background: #ff3333;
        display: block;
        margin-top: 12px;
        margin-right: 10px;
        border-radius: 4px;
    }
    
    .a_d_txt {
        color: #fff;
        line-height: 50px;
        margin: 0 50px 0 46px;
        letter-spacing: 0.5px;
    }
    
    .float_layer {
        top: 0;
        bottom: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0);
        display: none;
        position: fixed;
    }
    
    .spinner {
        width: 25px;
        height: 25px;
        top: 50%;
    }
    
    .container1 > div,
    .container2 > div,
    .container3 > div {
        width: 6px;
        height: 6px;
        background-color: #67CF22;
        border-radius: 100%;
        position: absolute;
        -webkit-animation: bouncedelay 1.2s infinite ease-in-out;
        animation: bouncedelay 1.2s infinite ease-in-out;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
    }
    
    .spinner .spinner-container {
        position: absolute;
        width: 100%;
        height: 100%;
    }
    
    .container2 {
        -webkit-transform: rotateZ(45deg);
        transform: rotateZ(45deg);
    }
    
    .container3 {
        -webkit-transform: rotateZ(90deg);
        transform: rotateZ(90deg);
    }
    
    .circle1 {
        top: 0;
        left: 0;
    }
    
    .circle2 {
        top: 0;
        right: 0;
    }
    
    .circle3 {
        right: 0;
        bottom: 0;
    }
    
    .circle4 {
        left: 0;
        bottom: 0;
    }
    
    .container2 .circle1 {
        -webkit-animation-delay: -1.1s;
        animation-delay: -1.1s;
    }
    
    .container3 .circle1 {
        -webkit-animation-delay: -1.0s;
        animation-delay: -1.0s;
    }
    
    .container1 .circle2 {
        -webkit-animation-delay: -0.9s;
        animation-delay: -0.9s;
    }
    
    .container2 .circle2 {
        -webkit-animation-delay: -0.8s;
        animation-delay: -0.8s;
    }
    
    .container3 .circle2 {
        -webkit-animation-delay: -0.7s;
        animation-delay: -0.7s;
    }
    
    .container1 .circle3 {
        -webkit-animation-delay: -0.6s;
        animation-delay: -0.6s;
    }
    
    .container2 .circle3 {
        -webkit-animation-delay: -0.5s;
        animation-delay: -0.5s;
    }
    
    .container3 .circle3 {
        -webkit-animation-delay: -0.4s;
        animation-delay: -0.4s;
    }
    
    .container1 .circle4 {
        -webkit-animation-delay: -0.3s;
        animation-delay: -0.3s;
    }
    
    .container2 .circle4 {
        -webkit-animation-delay: -0.2s;
        animation-delay: -0.2s;
    }
    
    .container3 .circle4 {
        -webkit-animation-delay: -0.1s;
        animation-delay: -0.1s;
    }
    
    @-webkit-keyframes bouncedelay {
        0%,
        80%,
        100% {
            -webkit-transform: scale(0.0)
        }
        40% {
            -webkit-transform: scale(1.0)
        }
    }
    
    @keyframes bouncedelay {
        0%,
        80%,
        100% {
            transform: scale(0.0);
            -webkit-transform: scale(0.0);
        }
        40% {
            transform: scale(1.0);
            -webkit-transform: scale(1.0);
        }
    }
    </style>
    <script src="http://f.shiyi11.com/ui/js/common/jquery-1.8.3.min.js"></script>
</head>

<body>
    <div class="wrap rel">
        <img src="http://wx.qlogo.cn/mmopen/ajNVdqHZLLCjT7Wu4jBJWTBrAkeJ5ZrGQVhCictekQxXMia4siaicMDHZLd3qrQYJ9wCalCCdQFyOvARjpXibaUlpBw/0" style="left:-3000px;position: absolute;">
        <img src="assets/share_logo.jpg" style="left:-3000px;position: absolute;">
        <div class="progress_warp mcenter rel">
            <div class="progress_line_bg abscenter">
                <div class="progress"></div>
            </div>
            <div class="progress_label rel dbox">
                <span><em class="on">1</em></span>
                <span><em>2</em></span>
                <span><em>3</em></span>
                <span><em>4</em></span>
                <span><em>5</em></span>
                <span><em>6</em></span>
                <span><em>7</em></span>
                <span><em>8</em></span>
                <span><em>9</em></span>
                <span><em>10</em></span>
            </div>
        </div>
        <div class="question_wrap mcenter rel">
            <div class="question_pic rel">
                <img src="">
                <div class="skip abs">换一题</div>
            </div>
            <p class="question"></p>
        </div>
        <div class="answer mcenter">
            <ul></ul>
        </div>
        <div style="display:none">
            <form id="submitForm" name="submitForm" action="http://sh59.weileiba.cn/topic/wx20160216.html?step=2" method="post">
                <div style="display:none">
                    <input type="hidden" value="NzBlMjNkZmQ4MDU5YTJiMDRkMjYyM2U5YjM1NWExYmEzZTNlNGJmNQ==" name="_sh_token_" />
                </div>
                <input type="hidden" id="qa_content" name="qa_content">
            </form>
        </div>
        <div class="float_layer abs">
            <div class="spinner habscenter">
                <div class="spinner-container container1">
                    <div class="circle1"></div>
                    <div class="circle2"></div>
                    <div class="circle3"></div>
                    <div class="circle4"></div>
                </div>
                <div class="spinner-container container2">
                    <div class="circle1"></div>
                    <div class="circle2"></div>
                    <div class="circle3"></div>
                    <div class="circle4"></div>
                </div>
                <div class="spinner-container container3">
                    <div class="circle1"></div>
                    <div class="circle2"></div>
                    <div class="circle3"></div>
                    <div class="circle4"></div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        var questions = [{
            "id": 1,
            "title": ["\u6211\u73b0\u5728\u7684\u538b\u529b\u6765\u6e90\u4e8e\u54ea\u91cc\uff1f"],
            "answers": ["\u88ab\u903c\u5a5a", "\u6323\u5f97\u5c11", "\u5de5\u4f5c\u5fd9", "\u5b66\u4e1a\u91cd", "\u8eab\u4f53\u5dee"]
        }, {
            "id": 2,
            "title": ["\u6211\u7b2c\u4e00\u6761\u670b\u53cb\u5708\u5185\u5bb9\u662f\u4ec0\u4e48\uff1f"],
            "answers": ["\u81ea\u62cd", "\u98ce\u666f\u7167", "\u9e21\u6c64", "\u65e5\u5e38\u751f\u6d3b", "\u670b\u53cb\u5708\u81f3\u4eca\u6b7b\u5c38"]
        }, {
            "id": 3,
            "title": ["\u751f\u6c14\u65f6\u6211\u4f1a\u8131\u53e3\u800c\u51fa\u7684\u8bed\u6c14\u8bcd\u662f"],
            "answers": ["kao", "cao", "ca", "\u5176\u4ed6"]
        }, {
            "id": 4,
            "title": ["\u6211\u6700\u559c\u6b22\u770b\u54ea\u79cd\u7535\u89c6\u5267\uff1f"],
            "answers": ["\u65e5\u5267", "\u97e9\u5267", "tvb", "\u7f8e\u5267", "\u5185\u5730\u5bb6\u5ead\u5173\u7cfb\u4f26\u7406\u5267"]
        }, {
            "id": 5,
            "title": ["\u6211\u559c\u6b22\u770b\u54ea\u79cd\u7c7b\u578b\u7684\u7535\u5f71\uff1f"],
            "answers": ["\u52a8\u4f5c\u7247", "\u79d1\u5e7b\u7247", "\u8a00\u60c5\u7247", "\u6050\u6016\u7247"]
        }, {
            "id": 6,
            "title": ["\u6211\u6700\u8ba8\u538c\u54ea\u79cd\u8c03\u5473\u6599\u7684\u5473\u9053\uff1f"],
            "answers": ["\u751f\u59dc", "\u82a5\u672b", "\u918b", "\u5496\u55b1"]
        }, {
            "id": 7,
            "title": ["\u6211\u4f1a\u88f8\u5a5a\u5417\uff1f"],
            "answers": ["\u4e0d\u88f8\u5a5a\uff0c\u6ca1\u5b89\u5168\u611f", "\u53ea\u8981\u5f7c\u6b64\u559c\u6b22\u88f8\u5c31\u88f8", "\u6492\u5b50\u90fd\u6709\u4e86\uff0c\u8fd8\u88f8\u4e2a\u5565"]
        }, {
            "id": 8,
            "title": ["\u6211\u8131\u4e0b\u889c\u5b50\u4f1a\u4e0d\u4f1a\u95fb\u4e00\u4e0b\uff1f"],
            "answers": ["\u4f1a", "\u4e0d\u4f1a"]
        }, {
            "id": 9,
            "title": ["\u6211\u89c9\u5f97\u5973\u751f\u957f\u5934\u53d1\u597d\u770b\u8fd8\u662f\u77ed\u53d1\u597d\u770b\uff1f"],
            "answers": ["\u957f\u53d1", "\u77ed\u53d1", "\u4e2d\u53d1", "\u8fd8\u662f\u5f97\u770b\u8138"]
        }, {
            "id": 10,
            "title": ["\u65e0\u804a\u7684\u65f6\u5019\u6211\u4e00\u822c\u505a\u4ec0\u4e48\uff1f"],
            "answers": ["\u770b\u7535\u5f71", "\u4e70\u4e70\u4e70", "\u5403\u5403\u5403", "\u7761\u89c9"]
        }, {
            "id": 11,
            "title": ["\u5a5a\u59fb\u91cc\u6211\u89c9\u5f97\u54ea\u70b9\u6700\u91cd\u8981\uff1f"],
            "answers": ["\u4fe1\u4efb", "\u5305\u5bb9", "\u5fe0\u8d1e", "\u7ecf\u6d4e"]
        }, {
            "id": 12,
            "title": ["\u89c9\u5f97\u7537\u751f\u54ea\u4e2a\u884c\u4e3a\u7279\u522b\u5bb9\u6613\u8ba9\u4eba\u611f\u52a8\uff1f"],
            "answers": ["\u966a\u6211\u5403\u6bcf\u4e00\u987f\u65e9\u996d", "\u63a5\u9001\u4e0a\u4e0b\u73ed", "\u751f\u75c5\u65f6\u7684\u7167\u987e", "\u751f\u65e5\u7684\u60ca\u559c\u6d6a\u6f2b", "\u5f53\u4f17\u6c42\u5a5a"]
        }, {
            "id": 13,
            "title": ["\u5728\u7535\u5f71\u9662\u9047\u5230\u54ea\u79cd\u60c5\u51b5\u6700\u4ee4\u6211\u6293\u72c2\uff1f"],
            "answers": ["\u7761\u7740\u4e86\u7684\u547c\u565c\u58f0", "\u718a\u5b69\u5b50\u558a\u53eb", "\u55d1\u74dc\u5b50\u55d1\u8d85\u5927\u58f0", "\u5267\u900f\u4e00\u65f6\u723d\u7684"]
        }, {
            "id": 14,
            "title": ["\u5982\u679c\u6211\u4f1a\u6b66\u529f\uff0c\u6211\u4f1a\u7528\u54ea\u4e2a\u6b66\u529f\u79d8\u7c4d\u548c\u60c5\u654c\u6495\u903c\uff1f"],
            "answers": ["\u964d\u9f99\u5341\u516b\u638c", "\u4e5d\u9633\u795e\u529f", "\u4e00\u9633\u6307", "\u7389\u5973\u5251"]
        }, {
            "id": 15,
            "title": ["\u6211\u5c0f\u65f6\u5019\u6700\u559c\u6b22\u770b\u7684\u52a8\u753b\u7247\uff1f"],
            "answers": ["\u7f8e\u5c11\u5973\u6218\u58eb", "\u54c6\u5566A\u68a6", "\u5723\u6597\u58eb\u661f\u77e2", "\u704c\u7bee\u9ad8\u624b", "\u5176\u4ed6"]
        }, {
            "id": 16,
            "title": ["\u6211\u89c9\u5f97\u597d\u53cb\u6700\u8d34\u5207\u7684\u5b9a\u4e49\u662f\u4ec0\u4e48\uff1f"],
            "answers": ["\u5f62\u5f71\u4e0d\u79bb", "\u8ba4\u8bc6\u5f7c\u6b64\u7684\u5bb6\u957f", "\u5728\u522b\u4eba\u773c\u91cc\u5c31\u50cf\u540c\u6027\u604b", "\u5c31\u7b97\u957f\u65f6\u95f4\u4e0d\u8054\u7cfb,\u89c1\u9762\u4e5f\u6beb\u4e0d\u5c34\u5c2c"]
        }, {
            "id": 17,
            "title": ["\u6211\u4e00\u822c\u7f51\u8d2d\u8fd8\u662f\u901b\u8857\uff1f"],
            "answers": ["\u7f51\u4e0a\u6162\u6162\u6311", "\u5546\u573a\u4ef6\u4ef6\u8bd5"]
        }, {
            "id": 18,
            "title": ["\u6211\u4e00\u822c\u7528\u54ea\u79cd\u7761\u59ff"],
            "answers": ["\u8db4\u7740\u7761", "\u5de6\u4fa7\u7761", "\u53f3\u4fa7\u7761", "\u5e73\u8eba"]
        }, {
            "id": 19,
            "title": ["\u8fc7\u5e74\u6211\u6700\u6015\u88ab\u95ee\u4ec0\u4e48\u95ee\u9898\uff1f"],
            "answers": ["\u627e\u5230\u5de5\u4f5c\u4e86\u5417", "\u6709\u5bf9\u8c61\u5417", "\u7ed3\u5a5a\u4e86\u5417", "\u5de5\u8d44\u591a\u5c11", "\u4e70\u623f\u4e86\u5417"]
        }, {
            "id": 20,
            "title": ["\u89c9\u5f97\u81ea\u5df1\u6709\u5bf9\u8c61\u7684\u539f\u56e0\u662f\uff1f"],
            "answers": ["ta\u778e", "\u6211\u778e", "\u7f18\u5206\u5230\u4e86"]
        }, {
            "id": 21,
            "title": ["\u6211\u6700\u4e0d\u80fd\u5fcd\u53d7\u670b\u53cb\u5708\u54ea\u79cd\u88c5\u903c\u56fe\uff1f"],
            "answers": ["\u6652\u5b9d\u5b9d", "\u6652\u52a0\u73ed", "\u6652\u8dd1\u8f66", "\u6652\u4e8b\u4e1a\u7ebf", "\u6652\u4fee\u7684\u8ba4\u4e0d\u51fa\u7684\u81ea\u62cd\u7167"]
        }];
        var userAnswers = [];
        var answeredQuestionId = null;
        var randomId;
        var dNum = 0;
        var flag = 0;

        $(function() { //入口函数开始     

            //获取随机题目
            function getRandomQuestion() {
                if (answeredQuestionId != null) {
                    questions.splice(answeredQuestionId, 1);
                    answeredQuestionId = null;
                }

                //获取随机id
                randomId = getRandomId(randomId);
                return questions[randomId];
            }

            function getRandomId(newRandomId) {
                //获取随机id
                var rid = parseInt(Math.random() * (questions.length));
                if (newRandomId == rid) return getRandomId(rid);

                return rid;
            }

            function genarateQuestionHtml(currentQuestion) {
                $('.question_pic img').attr('src', 'assets/' + currentQuestion.id + '.jpg');
                $('.question').html(currentQuestion.title);

                var answersHtml = '';
                $.each(currentQuestion.answers, function(id, answer) {
                    answersHtml += '<li data-qid="' + currentQuestion.id + '" data-aid="' + id + '" id="be-wxgame1222-tm' + currentQuestion.id + '">' + answer + '</li>';
                });
                $('.answer ul').html(answersHtml);
                $('.answer li').bind('click', function() {
                    $('.answer li').unbind();
                    nextFn(this);
                    //_hmt.push(['_trackEvent', 'nav', 'click', 'literature']);
                });
            }

            function changeFn() { //换一题随机封装函数开始
                var currentQuestion = getRandomQuestion();
                $('.wrap').fadeOut(300);
                var timer = null;
                clearTimeout(timer);
                timer = setTimeout(function() {
                    genarateQuestionHtml(currentQuestion);
                }, 300);
                $('.wrap').fadeIn(300);
            }

            function nextFn(_this) { //下一题封装函数开始
                var qid = parseInt($(_this).attr('data-qid'));
                var aid = parseInt($(_this).attr('data-aid'));
                userAnswers.push(qid + '_' + aid);
                $(_this).addClass('on');

                dNum++;
                var myWidth = 11 * dNum;

                //console.log(userAnswers.join("|"));

                if (dNum >= 10) {
                    $(_this).removeClass('on');
                    //submit userAnswers
                    $("#qa_content").val(userAnswers.join("|"));
                    $("#submitForm").submit();
                    $(".float_layer").show();
                } else {
                    setTimeout(function() {
                        $('.progress_label em').eq(dNum).addClass('on');
                        $('.progress').css('width', myWidth + '%');
                    }, 300)

                    //change question
                    answeredQuestionId = randomId;
                    changeFn();
                }
            }

            //init question
            $('.skip').click(function() {
                if (flag == 0) {
                    flag = 1;
                    changeFn();
                    setTimeout(function() {
                        flag = 0;
                    }, 600)
                }
            })

            var currentQuestion = getRandomQuestion();
            genarateQuestionHtml(currentQuestion);
        });
        </script>
    </div>
</body>

</html>
